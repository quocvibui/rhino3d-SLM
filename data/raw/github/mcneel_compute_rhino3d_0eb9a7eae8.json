{
  "source_url": "https://github.com/mcneel/compute.rhino3d/blob/677087c3683fb307c9d3a6e55651377c28c41e92/src/ghhops-server-py/examples/app_rhinside.py",
  "repo": "mcneel/compute.rhino3d",
  "repo_stars": 378,
  "repo_description": "REST geometry server based on RhinoCommon and headless Rhino",
  "license": "NOASSERTION",
  "filepath": "src/ghhops-server-py/examples/app_rhinside.py",
  "instruction": "Hops default HTTP server swith rhinoinside example",
  "code": "\"\"\"Hops default HTTP server swith rhinoinside example\"\"\"\nimport sys\nimport os\nimport rhinoinside\n\n# load ghhops-server-py source from this directory\nsys.path.append(os.path.dirname(os.path.dirname(__file__)))\nimport ghhops_server as hs\n\n\nrhinoinside.load()\n# System and Rhino can only be loaded after rhinoinside is initialized\nimport System  # noqa\nimport Rhino  # noqa\n\nhops = hs.Hops(app=rhinoinside)\n\n\n@hops.component(\n    \"/add\",\n    name=\"Add\",\n    nickname=\"Add\",\n    description=\"Add numbers with CPython\",\n    category=\"Maths\",\n    subcategory=\"CPython\",\n    inputs=[\n        hs.HopsNumber(\"A\", \"A\", \"First number\"),\n        hs.HopsNumber(\"B\", \"B\", \"Second number\"),\n    ],\n    outputs=[hs.HopsNumber(\"Sum\", \"S\", \"A + B\")],\n)\ndef add(a, b):\n    # testing error report\n    f = 12 / 0\n    return a + b\n\n\n@hops.component(\n    \"/pointat\",\n    name=\"PointAt\",\n    nickname=\"PtAt\",\n    description=\"Get point along curve\",\n    category=\"Curve\",\n    subcategory=\"Analysis\",\n    icon=\"pointat.png\",\n    inputs=[\n        hs.HopsCurve(\"Curve\", \"C\", \"Curve to evaluate\"),\n        hs.HopsNumber(\"t\", \"t\", \"Parameter on Curve to evaluate\"),\n    ],\n    outputs=[\n        hs.HopsPoint(\n            \"P\",\n            \"P\",\n            \"Point on curve at t\",\n        )\n    ],\n)\ndef pointat(curve, t):\n    return curve.PointAt(t)\n\n\n@hops.component(\n    \"/srf4pt\",\n    name=\"4Point Surface\",\n    nickname=\"Srf4Pt\",\n    description=\"Create ruled surface from four points\",\n    category=\"Surface\",\n    subcategory=\"Freeform\",\n    inputs=[\n        hs.HopsPoint(\"Corner A\", \"A\", \"First corner\"),\n        hs.HopsPoint(\"Corner B\", \"B\", \"Second corner\"),\n        hs.HopsPoint(\"Corner C\", \"C\", \"Third corner\"),\n        hs.HopsPoint(\"Corner D\", \"D\", \"Fourth corner\"),\n    ],\n    outputs=[hs.HopsSurface(\"Surface\", \"S\", \"Resulting surface\")],\n)\ndef ruled_surface(a, b, c, d):\n    edge1 = Rhino.Geometry.LineCurve(a, b)\n    edge2 = Rhino.Geometry.LineCurve(c, d)\n    return Rhino.Geometry.NurbsSurface.CreateRuledSurface(edge1, edge2)\n\n\n@hops.component(\n    \"/interplength\",\n    name=\"InterpCurve Length\",\n    nickname=\"ICL\",\n    inputs=[\n        hs.HopsPoint(\"P1\", \"P1\", \"First point\"),\n        hs.HopsPoint(\"P2\", \"P2\", \"Second point\"),\n        hs.HopsPoint(\"P3\", \"P3\", \"Third point\"),\n    ],\n    outputs=[hs.HopsNumber(\"Length\", \"L\", \"Interpolated curve length\")],\n)\ndef interp_length(p1, p2, p3):\n    print(p1, p2, p3)\n    pts = System.Collections.Generic.List[Rhino.Geometry.Point3d]()\n    pts.Add(p1)\n    pts.Add(p2)\n    pts.Add(p3)\n    crv = Rhino.Geometry.Curve.CreateInterpolatedCurve(pts, 3)\n    return crv.GetLength()\n\n\n@hops.component(\n    \"/test.IntegerOutput\",\n    name=\"tIntegerOutput\",\n    nickname=\"tIntegerOutput\",\n    description=\"Add numbers with CPython and Test Integer output.\",\n    inputs=[\n        hs.HopsInteger(\"A\", \"A\", \"First number\"),\n        hs.HopsInteger(\"B\", \"B\", \"Second number\"),\n    ],\n    outputs=[hs.HopsInteger(\"Sum\", \"S\", \"A + B\")],\n)\ndef test_IntegerOutput(a, b):\n    return a + b\n\n\nif __name__ == \"__main__\":\n    hops.start(debug=True)\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}