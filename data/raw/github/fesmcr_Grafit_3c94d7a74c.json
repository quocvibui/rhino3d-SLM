{
  "source_url": "https://github.com/fesmcr/Grafit/blob/0b80fd011af1d84bb50d5cafb684feb331ec3435/examples/rhino/Python%20F17%20Dijkstra%20Graph.py",
  "repo": "fesmcr/Grafit",
  "repo_stars": 1,
  "repo_description": null,
  "license": "MIT",
  "filepath": "examples/rhino/Python F17 Dijkstra Graph.py",
  "instruction": "Python f17 dijkstra graph",
  "code": "ï»¿import rhinoscriptsyntax as rs\nimport Rhino.Geometry as rg\nimport sys\nimport clr \n\nclr.AddReference(\"System.IO\")\n\nfrom System import Environment\nfrom System.IO import *\n\nif CustomLibPath is not None: \n\t# Check if the assembly is loaded\n\tif \"Grafit\" not in sys.modules: \n\t\tsearchResult = Directory.GetFiles(CustomLibPath, \"Grafit.dll\", SearchOption.AllDirectories)\n\n\t\tif len(searchResult) == 0:\n\t\t\traise Exception(\"Grafit.dll is not found in folder.\")\n\t\t\t\n\t\tLibPathGrafit = searchResult[0] \n\t\tLibPathGrafitRhino = Path.GetDirectoryName(LibPathGrafit) + \"\\\\\"  + \"GrafitRhino.dll\"   \n\t\n\t\tclr.AddReferenceToFileAndPath(LibPathGrafit)\n\t\tclr.AddReferenceToFileAndPath(LibPathGrafitRhino) \nelse:\n\tclr.AddReference(\"Grafit\") \n\tclr.AddReference(\"GrafitRhino\")  \n\nfrom Grafit import *\nfrom GrafitRhino import *\nfrom System import Array\n\nprimalGraph = {}\n\n# prepare graph geometry\nlineGeometry = Array[CWLine](map(lambda s: CWLine(s), LineGeometry))\ngraphElements, edgeLengths = GeometryToGraphElements.GetNodesAndEdgesFromLines(lineGeometry)\n\n# create graph\nprimalGraph = CPrimalDirectedGraph(graphElements)\n\n# add weight matrices\nprimalGraph.AddWeightMatrix(edgeLengths)  # index 0 - metric (or any other)\nprimalGraph.AddEmptyWeightMatrix(0, True )  # index 1 - angles (should always be #1) \n\n# init angle matrix\nfor i in range(len(primalGraph.UndirectedEdges)):\n    n1 = primalGraph.UndirectedEdges[i][0]  # start node of edge #i\n    n2 = primalGraph.UndirectedEdges[i][1]  # end node of edge #i \n\n    weight_1 = 0.0  # angle of a single edge is 0.0 deg\n    weight_matrix_id = 1\n\n    primalGraph.SetWeightMatrixAndEdgeValue(weight_1, n1, n2, weight_matrix_id)  # forward direction\n    primalGraph.SetWeightMatrixAndEdgeValue(weight_1, n2, n1, weight_matrix_id)  # backward direction   \n  \n\nStartNodeIds = Array[int](OriginIds)\nWeightMatrixId = WeightMatrixIndex\nRadiusMatrixId = RadiusMatrixIndex\nTolerance = 0.000001\n\nprimalGraph.APDijkstraSPSingleWeight(Radius, StartNodeIds, WeightMatrixId, RadiusMatrixId, Tolerance) \ngraph = primalGraph  \n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax"
  ],
  "has_docstring": false
}