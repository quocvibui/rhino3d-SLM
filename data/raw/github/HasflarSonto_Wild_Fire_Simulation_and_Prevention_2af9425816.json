{
  "source_url": "https://github.com/HasflarSonto/Wild_Fire_Simulation_and_Prevention/blob/4408ce1c860a8f7823953dc12ea05d197e2db8bf/CentralSimulationModule/ImportTopoModel.py",
  "repo": "HasflarSonto/Wild_Fire_Simulation_and_Prevention",
  "repo_stars": 1,
  "repo_description": "Parametric algorithm which simulates how wild fires grow and then suggests infrastructural improvements to combat fire",
  "license": "unknown",
  "filepath": "CentralSimulationModule/ImportTopoModel.py",
  "instruction": "Import topo model",
  "code": "import Rhino\nimport rhinoscriptsyntax as rs\nimport scriptcontext as sc\nimport clr\nclr.AddReference(\"Grasshopper\")\nclr.AddReference(\"RhinoCommon\")\nfrom Grasshopper import DataTree\nfrom Grasshopper.Kernel.Data import GH_Path\nfrom Rhino.Geometry import Point3d\n\ndef scale_to_fit(points, max_size=100):\n    \"\"\"Scales all points proportionally to fit within a max_size x max_size bounding box while preserving relative proportions.\"\"\"\n    min_x = min(p[0] for p in points)\n    max_x = max(p[0] for p in points)\n    min_y = min(p[1] for p in points)\n    max_y = max(p[1] for p in points)\n\n    range_x = max_x - min_x\n    range_y = max_y - min_y\n    scale_factor = max_size / max(range_x, range_y)\n    \n    scaled_points = [\n        ((p[0] - min_x) * scale_factor, (p[1] - min_y) * scale_factor, (p[2] - min(points, key=lambda p: p[2])[2]) * scale_factor)\n        for p in points\n    ]\n    return scaled_points\n\n# Raw input data as a list of strings\ntopology_data = [\n    \"X,Y,Z\",  # Example header, will be skipped\n    \"-2012355.0,2765325.0,32767.0\",\n    \"-2012325.0,2765325.0,32767.0\",\n    \"-2012295.0,2765325.0,32767.0\",\n    \"-2012265.0,2765325.0,32767.0\",\n    \"-2010645.0,2765325.0,547.0\",\n    \"-2010615.0,2765325.0,560.0\",\n    \"-2010585.0,2765325.0,572.0\"\n]\n\n# Extract valid points and compute bounds\ntopology_data.pop(0)  # Remove header\nvalid_points = []\nfor line in topology_data:\n    x, y, z = map(float, line.split(\",\"))\n    if z != 32767.0:  # Filter out invalid values\n        valid_points.append((x, y, z))\n\nif not valid_points:\n    a = \"No valid points found.\"\nelse:\n    # Scale all points proportionally to fit within 100x100\n    scaled_points = scale_to_fit(valid_points, max_size=100)\n\n    # Create Rhino points and store them in a list\n    rhino_points = [Point3d(x, y, z) for x, y, z in scaled_points]\n    a = rhino_points  # Output only the list of points\n\nprint(\"Topology Data Processed, Scaled Proportionally to Fit 100x100, and Points Output Successfully!\")\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "RhinoCommon",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}