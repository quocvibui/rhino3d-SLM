{
  "source_url": "https://github.com/localsoftware/localsoftware_rhino-grasshopper/blob/4aafec57e33b9f09cce6fd73dcda12b17cf794a5/plugin_files/UnPickle_Data.py",
  "repo": "localsoftware/localsoftware_rhino-grasshopper",
  "repo_stars": 0,
  "repo_description": null,
  "license": "BSD-2-Clause",
  "filepath": "plugin_files/UnPickle_Data.py",
  "instruction": "Un pickle data",
  "code": "ï»¿\"\"\"Deserializes data from binary file.\n\nUn-pickles (de-serializes) pickled files into Grasshopper geometries.\nUn-pickling geometry is faster and more efficient than importing Rhino files.\nBased on the work of Jackie Berry.\n\n    Typical usage:\n        You need to provide a path for the folder that contains the files to be imported.\n        Use the string concatenate component to join the file path of the folder with the number of the file to be imported.\n        You can specify the file number with a slider. Specify the name of the layers you want to import from the rhino file.\n        Type the layer names in a Panel. Make sure the Multiline Data option is unchecked (you can uncheck the box while typing in the panel or by right click).\n\n    Inputs:\n        siteNumber: site number\n        layer: layer name\n        path: path to source file directory.\n        read: boolean\n\n    Outputs:\n        geometry: converted geometry\"\"\"\n\n__author__ = \"palomagr\"\n__version__ = \"2020.07.09\"\n\n#ghenv.Component.Name = \"Unpicke Data\"\n#ghenv.Component.NickName = \"Unpickle Data\"\n\nfrom ghpythonlib.componentbase import dotnetcompiledcomponent as component\nimport Grasshopper, GhPython, System, Rhino, os\nimport rhinoscriptsyntax as rs\nimport cPickle as pickle\nfrom Grasshopper.Kernel import GH_RuntimeMessageLevel as RML\n\nclass MyComponent(component):\n    def __new__(cls):\n        instance = Grasshopper.Kernel.GH_Component.__new__(cls,\n            \"UnPickleData\", \"UnPickleData\", \"\"\"Deserializes data from binary file.\nUn-pickles (de-serializes) pickled files into Grasshopper geometries.\nUn-pickling geometry is faster and more efficient than importing Rhino files.\nBased on the work of Jackie Berry.\n    Typical usage:\nYou need to provide a path for the folder that contains the files to be imported.\nUse the string concatenate component to join the file path of the folder with the number of the file to be imported.\nYou can specify the file number with a slider. Specify the name of the layers you want to import from the rhino file.\nType the layer names in a Panel. Make sure the Multiline Data option is unchecked (you can uncheck the box while typing in the panel or by right click).\"\"\", \"Extra\", \"LocalCode\")\n        return instance\n    \n    def get_ComponentGuid(self):\n        return System.Guid(\"9ee7b433-de34-4fe0-be43-bf9858f66520\")\n    \n    def SetUpParam(self, p, name, nickname, description):\n        p.Name = name\n        p.NickName = nickname\n        p.Description = description\n        p.Optional = True\n    \n    def RegisterInputParams(self, pManager):\n        p = GhPython.Assemblies.MarshalParam()\n        self.SetUpParam(p, \"siteNumber\", \"siteNumber\", \"site number\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = GhPython.Assemblies.MarshalParam()\n        self.SetUpParam(p, \"layer\", \"layer\", \"layer name\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = GhPython.Assemblies.MarshalParam()\n        self.SetUpParam(p, \"path\", \"path\", \"path to source file directory.\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = GhPython.Assemblies.MarshalParam()\n        self.SetUpParam(p, \"read\", \"read\", \"boolean\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n    \n    def RegisterOutputParams(self, pManager):\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"geometry\", \"geometry\", \"converted geometry\")\n        self.Params.Output.Add(p)\n        \n    \n    def SolveInstance(self, DA):\n        p0 = self.marshal.GetInput(DA, 0)\n        p1 = self.marshal.GetInput(DA, 1)\n        p2 = self.marshal.GetInput(DA, 2)\n        p3 = self.marshal.GetInput(DA, 3)\n        result = self.RunScript(p0, p1, p2, p3)\n\n        if result is not None:\n            self.marshal.SetOutput(result, DA, 0, True)\n        \n    def get_Internal_Icon_24x24(self):\n        o = \"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAO5SURBVEhL3ZRrTBRXFMeXZZzlsSwy67AoIOAuu8rCIrZawAV2pU01GjXRRE3VanwbhbTBR7Rp2sa2toqEIK1awEcQEB+BxEf0A03TNDXxERtUYnz0QzFBRdcHiqzQf8+dcR8DszWN33qSX3b2nnP+/zt37r2a/03oiU2iGHkkMTG6lWh5C1oFQddIeqWEjolrTaaIM61Hs3Gv0wnPXYL9/kce+/rot6tzMhr2ZyIulq9nBtZ1q5IBfAB4C4E+FfqLgAFCLc/GMIUolvHVkd78uQmvmIFzx7Z0uehZQYCnBCum8YEnhfB66D/chCtQ00P0u7B/TwbmzErAF1vMeEm1eCGblpWmghlM3v7VIAMmTmIdf+Ri6eIkWC16pKVEYfZME34+O0E2YuJ/u9F8KIuJ+Fm/JkXOk96n69UMJHEXfmt7F4YYXtEsE4aaHzP8IosWjFLk2UTQK7+5ukFvIZ57ipA6OlrRGAwXHo5b7bnUU4z62kxFbsWSJL+5ugHN/uRRh6JJjS+3muUerwu7d43Fh++PQFlJKnq6af1pkv9iMAUV2y1DBAezcF6C3MO+hTRjedZ4SeLSMoc0cKPpgPK11dj4SWqgh8GMfM+STigD2tvddGBiDWofOEDHJfYNqIfNNljYR0gDKenGYTqJwYLB7PzGhm2fW9F2KkeqVTUJMijY8bVVaSAVuHHuZA6mTxVhitfBKAxDgVNAfZ0DFd/ZJCPRqMPNa3lUS4dvsAnpbXh90Oxlpexw0DH3JV+fhaddBaiuyEDd3kwc+MmB6ko7ZkyL978JwzJGj66/nENNyODjj0Z6mQFntxtuoJcK2PZiyb4iXLkwSTrBAbGwoGcl74wfjidse7K7ifXTTnr1rAi2dP1lykuxuq56XOAtyH3OzJGqYqFwOY0Y6KNJStu2GLWkR+PLCCm0gsD/cvXSe7IJXXLs6nbYY4YIqaHVhqGq3EZ9ZECTu3M9Dwkj+POUCyf8ISYmRl1sOZaNnkd0XdCtePn3XCQnRSMubhjiRd0Q2LhBz2NflR1eWuIXjwvRdm4CLJaoG6SXLMsqI5LYkpam71y9PA0bN6Sj/HsHTjRPRE11Fup+CLCvKhMtxyeisjwbWzdbUbLWDJst2kP93xICEwsZHMcd76Dl6u7Kx6NuJ5oOZoHnOcWyGI0RON2SA88DJx525uP+n/lIGR3RzvrfGFqtZqUocI0mE99gErkGszmygePCjlHKZ3A7Vi+PszyrE0W+keO0n7H+t4kS4lciXvr3xtBo/gE4ldbcQK6WtAAAAABJRU5ErkJggg==\"\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\n\n    geometry=None\n    def RunScript(self, siteNumber, layer, path, read):\n        if path!=None and read==True and layer!=None:\n            try:\n                if siteNumber!=None:\n                    filepath = os.path.join(path,str(int(siteNumber))+layer)\n                else:\n                    filepath = os.path.join(path,layer)\n                f=open(filepath,'rb')\n                geometry = pickle.load(f)\n                if len(geometry)>0:\n                    print \"file loaded successfully.\"\n                    self.AddRuntimeMessage(RML.Remark,\"file loaded successfully.\")\n                else:\n                    print \"the file is empty.\"\n                    self.AddRuntimeMessage(RML.Error,\"the file is empty.\")\n                f.close()\n\n            except:\n                print 'problem loading\\n %s\\nfile may not exist or the path may be invalid.' % filepath\n                self.AddRuntimeMessage(RML.Warning,'problem loading\\n %s\\nfile may not exist or the path may be invalid.' % filepath)\n        else:\n            if path==None:\n                geometry = \"please provide path to source directory.\"\n                self.AddRuntimeMessage(RML.Warning,\"please provide path to source directory.\")\n            if layer==None:\n                geometry = \"please provide layer name of source file.\"\n                self.AddRuntimeMessage(RML.Warning, \"please provide layer name of source file.\")\n            if read!=True:\n                geometry = \"set read to True to load file contents.\"\n                self.AddRuntimeMessage(RML.Warning, \"set read to True to load file contents.\")\n        return geometry\n\n\nimport GhPython\nimport System\n\nclass AssemblyInfo(GhPython.Assemblies.PythonAssemblyInfo):\n    def get_AssemblyName(self):\n        return \"UnPickleData\"\n    \n    def get_AssemblyDescription(self):\n        return \"\"\"\"\"\"\n\n    def get_AssemblyVersion(self):\n        return \"0.1\"\n\n    def get_AuthorName(self):\n        return \"\"\n    \n    def get_Id(self):\n        return System.Guid(\"de56e969-a57c-4863-917c-548a14d495ab\")",
  "language": "python",
  "imports": [
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": false
}