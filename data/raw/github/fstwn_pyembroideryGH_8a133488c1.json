{
  "source_url": "https://github.com/fstwn/pyembroideryGH/blob/ee7fd47316b364962a69976b4168ce9fef2702cf/usrobj_src/pyembroideryGH_AddStitchblock.py",
  "repo": "fstwn/pyembroideryGH",
  "repo_stars": 11,
  "repo_description": "Set of UserObjects enabling Grasshopper to directly read, write and manipulate various kinds of embroidery formats. It is based on an IronPython-compatible fork of the original pyembroidery library.",
  "license": "MIT",
  "filepath": "usrobj_src/pyembroideryGH_AddStitchblock.py",
  "instruction": "Adds one or many StitchBlocks to an embroidery pattern supplied as\npyembroidery.EmbPattern instance\n    Inputs:\n        Pattern: The pattern to be modified as pyembroidery.EmbPattern \n               ...",
  "code": "\"\"\"\nAdds one or many StitchBlocks to an embroidery pattern supplied as\npyembroidery.EmbPattern instance\n    Inputs:\n        Pattern: The pattern to be modified as pyembroidery.EmbPattern \n                 instance.\n                 {item, EmbPattern}\n        StitchBlock: The stitchblock(s) to add to the pattern.\n                     {list, StitchBlock}\n    Output:\n        Pattern: The modified pattern with the newly added stitchblock(s).\n                 {item/list/tree, EmbPattern}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 201030\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"AddStitchBlock\"\nghenv.Component.NickName = \"ASB\"\nghenv.Component.Category = \"pyembroideryGH\"\nghenv.Component.SubCategory = \"3 Pattern Creation\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import pyembroidery\nexcept ImportError:\n    errMsg = (\"The pyembroidery python module seems to be not correctly \" +\n              \"installed! Please make sure the module is in you search \" +\n              \"path, see README for instructions!.\")\n    raise ImportError(errMsg)\n\nclass StitchBlock(object):\n    \n    def __init__(self, stitches, thread):\n        self._set_stitches(stitches)\n        self._set_thread(thread)\n    \n    def __getitem__(self, item):\n        return (self.stitches, self.thread)[item]\n    \n    def get_stitches_iter(self):\n        for s in self._stitches:\n            yield s\n    \n    def _get_stitches(self):\n        return self._stitches\n    \n    def _set_stitches(self, stitches):\n        if isinstance(stitches, list):\n            self._stitches = stitches\n        elif isinstance(stitches, tuple):\n            self._stitches = list(stitches)\n        else:\n            raise ValueError(\"Supplied data for stitches is not a valid list \" +\n                             \"of stitches!\")\n    \n    stitches = property(_get_stitches, _set_stitches, None,\n                        \"The stitches of this StitchBlock\")\n    \n    def _get_thread(self):\n        return self._thread\n    \n    def _set_thread(self, thread):\n        if isinstance(thread, pyembroidery.EmbThread):\n            self._thread = thread\n        else:\n            raise ValueError(\"Supplied thread is not a valid EmbThread \" + \n                             \"instance!\")\n    \n    thread = property(_get_thread, _set_thread, None,\n                      \"The thread of this StitchBlock\")\n    \n    def ToString(self):\n        descr = \"StitchBlock ({} Stitches, EmbThread {})\"\n        color = self.thread.hex_color()\n        descr = descr.format(len(self.stitches), color)\n        return descr\n\nclass AddStitchBlock(component):\n\n    def RunScript(self, pattern_in, stitchblock):\n        # initialize outputs\n        Pattern = Grasshopper.DataTree[object]()\n        \n        if pattern_in is not None and stitchblock:\n            # copy the input pattern to avoid modification on the original object\n            if isinstance(pattern_in, pyembroidery.EmbPattern):\n                pattern_in = pattern_in.copy()\n            else:\n                raise TypeError(\"Supplied pattern is no valid \" +\n                                \"pyembroidery.EmbPattern instance! \" +\n                                \"Please check your inputs and try again.\")\n            \n            # loop over all stitchblocks and add to pattern\n            for i, sb in enumerate(stitchblock):\n                pattern_in.add_stitchblock(sb)\n            \n            # add pattern to output tree\n            Pattern.Add(pattern_in)\n        else:\n            rml = self.RuntimeMessageLevel.Warning\n            if pattern_in is None:\n                errMsg = (\"Input Pattern failed to collect data!\")\n                self.AddRuntimeMessage(rml, errMsg)\n            if not stitchblock:\n                errMsg = (\"Input StitchBlock failed to collect data!\")\n                self.AddRuntimeMessage(rml, errMsg)\n        \n        # return outputs if you have them; here I try it for you:\n        return Pattern\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}