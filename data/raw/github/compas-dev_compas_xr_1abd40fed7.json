{
  "source_url": "https://github.com/compas-dev/compas_xr/blob/2ef8117009c9d775d61b4e8b5f412615aac480db/src/compas_xr/ghpython/components/Cx_PlanningServiceResponse/code.py",
  "repo": "compas-dev/compas_xr",
  "repo_stars": 15,
  "repo_description": "COMPAS XR streamlines extended reality workflows to ease the implementation of human-machine collaborative applications in architectural research and educational environments.",
  "license": "MIT",
  "filepath": "src/compas_xr/ghpython/components/Cx_PlanningServiceResponse/code.py",
  "instruction": "Planning service response.",
  "code": "\"\"\"\nPlanning service response.\n\nCOMPAS XR v1.0.0\n\"\"\"\n\nfrom compas_eve import Publisher\nfrom compas_eve import Topic\nfrom compas_eve.mqtt import MqttTransport\nfrom ghpythonlib.componentbase import executingcomponent as component\n\nfrom compas_xr.mqtt import GetTrajectoryResult\n\n\nclass PlanningServiceResponseComponent(component):\n    def RunScript(self, options, result, publish):\n        if not result:\n            self.Message = \"Null Result, unable to publish\"\n            return\n\n        if publish:\n            topic_name_result = \"compas_xr/get_trajectory_result/\" + options.project_name\n            topic = Topic(topic_name_result, GetTrajectoryResult)\n            tx = MqttTransport(options.host)\n            publisher = Publisher(topic, transport=tx)\n            message = GetTrajectoryResult(\n                element_id=result.requested_element_id,\n                robot_name=options.robot_name,\n                robot_base_frame=result.robot_base_frame,\n                trajectory=result.trajectory,\n                pick_and_place=result.pick_and_place,\n                pick_index=result.pick_index,\n                end_effector_link_name=result.end_effector_link_name,\n            )\n            publisher.publish(message)\n            self.Message = \"Send trajectory for #{}\".format(result.requested_element_id)\n",
  "language": "python",
  "imports": [
    "ghpythonlib"
  ],
  "has_docstring": true
}