{
  "source_url": "https://github.com/255ribeiro/Mestrado/blob/07e9939e80a3217834a7cd6707bda1bf5fb46389/python/propidadedes%20dos%20funiculares.py",
  "repo": "255ribeiro/Mestrado",
  "repo_stars": 0,
  "repo_description": "Arquivos da Dissertação de Mestrado",
  "license": "unknown",
  "filepath": "python/propidadedes dos funiculares.py",
  "instruction": "Propidadedes dos funiculares",
  "code": "﻿from __future__ import division\n\nfrom Rhino.Geometry import Point3d, Line\nimport ghpythonlib.components as gh\nimport rhinoscriptsyntax as rs\n\n#Cirando Listas vazias para os outputs\nfunicular=[]\nPF=[]\nraios=[]\nresultante=[]\nconstruc_aux=[]\n\n#função de desenho das cordas\ndef estendeCorda(linha,ponto,indice):\n    pto1 = gh.EndPoints(linha)[indice]\n    return Line(pto1,ponto)\n\n#função de redesenho das  linhas de ação para melhor visualisação\ndef estendeFG(linha,corda,ponto):\n    linnha = rs.coerceline(linha)\n    ponto = rs.coerce3dpoint(ponto)\n    if not gh.CurveXCurve(linha,corda)[0]:\n        pt =gh.EndPoints(linha)[0]\n        construc_aux.append(Line(pt,ponto))\n        return True\n    else:\n        return False\n\n#função que testa se o funicular é fechado ou aberto\ndef testeFunicular(vetores,funicular,tolerancia):\n    prm1 = gh.LineXLine(rs.coerceline(vetores[0]),funicular[0])[0]\n    prm2 = gh.LineXLine(rs.coerceline(vetores[0]),funicular[-1])[0]\n    if abs(prm1 - prm2) <= tolerancia :\n        return True\n    else:\n        return False\n\n#Calcula a distãncia entre duas retas paralelas\ndef distParalela(reta1,reta2):\n    pt1 = gh.EndPoints(reta1)[0]\n    pt2 = reta2.ClosestPoint(pt1,False)\n    return gh.Length(Line(pt1,pt2))\n\n\n# Desenhando o poligono de forças\npAux = rs.coerce3dpoint(pto_inicial)\n\n\npolo = rs.coerce3dpoint(polo)\n\n#primeiro raio polar\nraios.append(Line(polo,pAux))\n\nfor v in vetores:\n    vAux1 = rs.coerceline(v)\n    vAux2 = pAux - v.PointAt(0)\n    vAux3 = gh.Move(vAux1,vAux2)[0]\n    pAux = vAux3.PointAt(1)\n    PF.append(vAux3)\n    r=Line(polo,pAux)\n    raios.append(r)\n\n#desenhando a resultante\nresult=Line(rs.coerce3dpoint(pto_inicial),pAux)\n\n\n\n#Desenhando o funicular\n\nj = len(raios)\n\nfor i in range(j):\n    r = rs.coerceline(raios[i])\n    if i == 0:\n        pAux = (rs.coerceline(vetores[0]).PointAt(.5))\n        vAux1 = Line(r.PointAt(0),pAux)\n        corda = gh.Move(r,vAux1)[0]\n        corda = rs.coerceline(corda)\n        funicular.append(corda)\n        \n    elif i < j-1:\n        vAux1 = Line(r.PointAt(1),pAux)\n        crdAux = gh.Move(r,vAux1)[0]\n        crdAux = rs.coerceline(crdAux)\n        pAux2 = pAux\n        pAux = gh.LineXLine(crdAux,vetores[i])[-1]\n        corda = Line(pAux2,pAux)\n        funicular.append(corda)\n        estendeFG(vetores[i],corda,pAux)\n            \n            \n    else:\n        vAux1 = Line(r.PointAt(1),pAux)\n        corda = gh.Move(r,vAux1)[0]\n        corda = rs.coerceline(corda)\n        funicular.append(corda)\n\n#testando PF ppara equilíbrio de translação\ntestePF=gh.Length(result)\nif testePF <= 0.0001:\n    eqtrans = True\n    print \"Equilíbrio de Translação\"\n    \n    #Testando o Funicular para equilibrio de Rotação\n    \n    #Testando paralelismo das cordas extremas do funicular\n    if testeFunicular(vetores,funicular,0.0001):\n        print \"Equilíbrio de Rotação\"\n        pAux = gh.LineXLine(funicular[0],vetores[0])[-1]\n        pAux = rs.coerce3dpoint(pAux)\n        funicular[0] = estendeCorda(funicular[0],pAux,0)\n        funicular[-1] = estendeCorda(funicular[-1],pAux,1)\n    else:\n        #Cálculo do Momento\n        braco = distParalela(funicular[0],funicular[-1])\n        force = gh.Length(Line(polo,rs.coerce3dpoint(pto_inicial)))\n        binario = braco * force\n        print \"Momento \", binario\n#Caso o PF seja Aberto\n#Posicionar a linha de ação da resultante na FG\nelse:\n    print \"Módulo da resultante: \", testePF\n    resultante.append(result)\n    pAux = gh.LineXLine(funicular[0],funicular[-1])[-1]\n    funicular[0] = estendeCorda(funicular[0],pAux,0)\n    funicular[-1] = estendeCorda(funicular[-1],pAux,1)\n    vAux1 = Line(result.PointAt(.5),pAux)\n    result2 = gh.Move(result,vAux1)[0]\n    resultante.append(result2)\n    eqtrans = False\n    \n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": false
}