{
  "source_url": "https://github.com/ankitpatnala/RhinoScriptsForSlots/blob/bde3974799b74fda9da7fd928a6b6848db99a94f/GeneratorScripts/CADGeneratorModel5.py",
  "repo": "ankitpatnala/RhinoScriptsForSlots",
  "repo_stars": 0,
  "repo_description": null,
  "license": "MIT",
  "filepath": "GeneratorScripts/CADGeneratorModel5.py",
  "instruction": "Cadgenerator model5",
  "code": "import Rhino \nimport scriptcontext\nimport rhinoscriptsyntax as rs\nimport System.Guid \nimport random\nimport json\nimport sys\nimport os\nimport math\n\n\ndef SquareDistanceBetweenTwoPoints(point1,point2):\n    difference = Rhino.Geometry.Point3d((point2.X-point1.X),\n                    (point2.Y-point1.Y),\n                    (point2.Z-point1.Z))\n                    \n    return difference.X*difference.X + difference.Y*difference.Y +difference.Z*difference.Z\n    \n    \ndef AddBrepBox(point1, point2):\n    box = Rhino.Geometry.BoundingBox(point1, point2)\n    brep = box.ToBrep()\n    rc = Rhino.Commands.Result.Failure\n    return brep\n    \ndef AddCylinder(centerPoint,orientation,radius,height):\n    plane = Rhino.Geometry.Plane(centerPoint, orientation)\n    circle = Rhino.Geometry.Circle(plane, radius)\n    cylinder = Rhino.Geometry.Cylinder(circle, height)\n    brep = cylinder.ToBrep(True, True)\n    return brep\n    \ndef GenerateCylindricalSlot():\n    filled = False\n    radius = 6 + random.random()*6\n    length = 15 + random.random()*5\n    \n    centerPoint = Rhino.Geometry.Point3d(0,0,0)\n    orientation = Rhino.Geometry.Vector3d(1,0,0)\n    brepCylinder = AddCylinder(centerPoint,orientation,radius,length)\n    curveLength = 3 + random.random()*(2*math.pi*radius -3)\n    angleCovered = (curveLength/2*math.pi*radius)*2*math.pi\n    startAngle = 0 + random.random()*(2*math.pi-angleCovered)\n    endAngle = startAngle + angleCovered\n    widthOfSlot = 2 + random.random()*(6-2);\n    randomPointOnALength = 2 + random.random()*(length -2 - widthOfSlot/2);\n    curvPoint1 = Rhino.Geometry.Point3d(randomPointOnALength,radius*(math.cos(startAngle)),radius*(math.sin(startAngle)))\n    curvPoint2 = Rhino.Geometry.Point3d(randomPointOnALength,radius*(math.cos(startAngle*0.5 + endAngle*0.5)),radius*(math.sin(startAngle*0.5 + endAngle*0.5)))\n    curvPoint3 = Rhino.Geometry.Point3d(randomPointOnALength,radius*(math.cos(endAngle)),radius*(math.sin(endAngle)))\n    arc = rs.AddArc3Pt(curvPoint1,curvPoint3,curvPoint2)\n    arcBrep = rs.coercecurve(arc)\n    height = 2 + random.random()*(4-2)\n    point1 = Rhino.Geometry.Point3d(randomPointOnALength - widthOfSlot/2 ,(radius+height/2)*math.cos(startAngle),(radius+height/2)*math.sin(startAngle))\n    point2 = Rhino.Geometry.Point3d(randomPointOnALength - widthOfSlot/2 ,(radius-height/2)*math.cos(startAngle),(radius-height/2)*math.sin(startAngle))\n    point3 = Rhino.Geometry.Point3d(randomPointOnALength + widthOfSlot/2 ,(radius-height/2)*math.cos(startAngle),(radius-height/2)*math.sin(startAngle))\n    point4 = Rhino.Geometry.Point3d(randomPointOnALength + widthOfSlot/2 ,(radius+height/2)*math.cos(startAngle),(radius+height/2)*math.sin(startAngle))\n    point5 = point1\n    points = [point1,point2,point3,point4,point5]\n    rectSrf = rs.AddPolyline(points)\n    rectSurfBrep = rs.coercecurve(rectSrf)\n    rs.DeleteObjects(arc)\n    rs.DeleteObjects(rectSrf)\n    breps = Rhino.Geometry.Brep.CreateFromSweep(arcBrep,rectSurfBrep,True,scriptcontext.doc.ModelAbsoluteTolerance)\n    brepsCurveBox = Rhino.Geometry.Brep.CapPlanarHoles(breps[0],scriptcontext.doc.ModelAbsoluteTolerance)\n    brepArray = Rhino.Geometry.Brep.CreateBooleanDifference([brepCylinder],[brepsCurveBox],scriptcontext.doc.ModelAbsoluteTolerance)\n    scriptcontext.doc.Views.Redraw()\n    if(brepArray is not None and  brepCylinder.GetBoundingBox(Rhino.Geometry.Vector3d(0,0,1)).Volume == brepArray[0].GetBoundingBox(Rhino.Geometry.Vector3d(0,0,1)).Volume):\n        for brep in brepArray: \n            scriptcontext.doc.Objects.AddBrep(brep)\n        scriptcontext.doc.Views.Redraw()\n        return 1\n    else :\n        return 0\n    \nif(__name__ == \"__main__\"):\n    i = 0\n    while(i<10):\n        i = i + GenerateCylindricalSlot()\n    ",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}