{
  "source_url": "https://github.com/TfedUD/PyPH/blob/87fe2ec207a8b0ddcd3fbb682ea71368c11b580a/PyPH_GH/ghuser_py/PyPH%20-%20Zone%20Occupancy.py",
  "repo": "TfedUD/PyPH",
  "repo_stars": 0,
  "repo_description": "Python toolkit for working with Passive House energy models",
  "license": "GPL-3.0",
  "filepath": "PyPH_GH/ghuser_py/PyPH - Zone Occupancy.py",
  "instruction": "Occupancy parameters for each Honeybee room. Note that for the inputs, these values\nshould be PER-HB-ROOM. If a single  value is input, this will be applied for all \nHB-rooms. If a list is input, the...",
  "code": "#\n# PyPH: A Plugin for aadding Passive-House data to LadybugTools Models\n# \n# This component is part of the PH-Tools toolkit <https://github.com/PH-Tools>.\n# \n# Copyright (c) 2021, PH-Tools and bldgtyp, llc <phtools@bldgtyp.com> \n# PyPH is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# PyPH is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# For a copy of the GNU General Public License\n# see <https://github.com/PH-Tools/PyPH/blob/main/LICENSE>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n#\n\"\"\"\nOccupancy parameters for each Honeybee room. Note that for the inputs, these values\nshould be PER-HB-ROOM. If a single  value is input, this will be applied for all \nHB-rooms. If a list is input, the values from the list will be applied to the HB-rooms \nin that same order. \n-----\n-\nEM September 28, 2021\n    Args:\n        \n        num_bedrooms_: (int) For residential only: Enter the number of bedrooms in\n            each Honeybee Room. (Note: For PHIUS, Studio apts = 0 Br, 1 occupant)\n            If a single value is input, this will be applied to all HB-rooms. If a list is input, the values \n            from the list will be applied to the HB-rooms in order. If none are input, default=1\n        \n        num_occupants_: (int) For non-residential or multi-unit residential, enter \n            the annual average occpant quantity for each Honeybee Room input. If a single\n            value is input, this will be applied to all HB-rooms. If a list is input, the values \n            from the list will be applied to the HB-rooms in order. If none are input, default=None\n        \n        num_dwelling_units_: (int) For multi-unit residential ONLY. Enter the number of \n            dwelling units in each Honeybee Room input. If a list is input, the values \n            from the list will be applied to the HB-rooms in that order. For single-family\n            home, or for Non-Residential zones, leave this input empty.\n        ----------\n        _HB_rooms: The Honeybee rooms to apply the occupancy parameters to.\n    Returns:\n        HB_rooms_: The Honeybee rooms with a new Zone-Occupancy applied applied.\n\"\"\"\n\nimport scriptcontext as sc\nimport Rhino as rh\nimport rhinoscriptsyntax as rs\nimport ghpythonlib.components as ghc\nimport Grasshopper as gh\n\nimport PyPH_Rhino.gh_io\nimport LBT_Utils\nimport PHX\nimport PHX.programs.occupancy\n\n# --\nimport PyPH_GH._component_info_\nreload(PyPH_GH._component_info_)\nghenv.Component.Name = \"PyPH - Zone Occupancy\"\nDEV = True\nPyPH_GH._component_info_.set_component_params(ghenv, dev='SEP_28_2021')\n\nif DEV:\n    reload(PyPH_Rhino.gh_io)\n    reload(LBT_Utils)\n    reload(PHX.programs.occupancy)\n    reload(PHX.serialization.to_dict)\n    reload(PHX.serialization.from_dict)\n    \n# Go through and set the occupancy on each HB room, try and get i from list, \n# if none input, default to the first one in the list of inputs\n\ndef clean_get(IGH, _in, _i, _default=None):\n    #type: (IGH, list, int, Any) -> None\n    \"\"\"\n    Allow list inputs, if it can, use the current list index\n    otherwise, try and use th first list input.  If none, return default\n    \"\"\"\n    \n    try:\n        input = _in[i]\n    except IndexError:\n        try:\n            input = _in[0]\n        except IndexError:\n            input = _default\n    \n    return PyPH_Rhino.gh_io.input_to_int(IGH, input, _default)\n\n\n# -- GH Interface\nIGH = PyPH_Rhino.gh_io.IGH( ghdoc, ghenv, sc, rh, rs, ghc, gh )\n\nHB_rooms_ = []\nfor i, room in enumerate(_HB_rooms):\n    if not room: continue\n    \n    new_hb_room = room.duplicate()\n    \n    # -- Build a new occupancy object\n    occupancy = PHX.programs.occupancy.ZoneOccupancy()\n    \n    # -- Get the input data\n    occupancy.num_bedrooms = clean_get(IGH, num_bedrooms_, i, 1)\n    occupancy.num_occupants = clean_get(IGH, num_occupants_, i, 0)\n    occupancy.num_dwelling_units = clean_get(IGH, num_dwelling_units_, i, 0)\n    \n    # -- Add the occupancy dict to the HB-Room\n    occ_dict = occupancy.to_dict()\n    new_hb_room = LBT_Utils.user_data.add_to_HB_Obj_user_data(new_hb_room,\n                                    occ_dict, 'zone_occupancy', _write_mode='overwrite')\n    \n    HB_rooms_.append(new_hb_room)",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}