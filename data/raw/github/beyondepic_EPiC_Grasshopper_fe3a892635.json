{
  "source_url": "https://github.com/beyondepic/EPiC_Grasshopper/blob/dbd60529a190cebf1d0af4d6c2e0ec91e110e388/epic/src/EPiC_Assembly_Linear_Component.py",
  "repo": "beyondepic/EPiC_Grasshopper",
  "repo_stars": 18,
  "repo_description": "EPiC Grasshopper plug-in",
  "license": "GPL-3.0",
  "filepath": "epic/src/EPiC_Assembly_Linear_Component.py",
  "instruction": "Creates a linear assembly based on the selected geometry and EPiC Materials\r\n\r\n    Inputs:\r\n        Assembly_Name: Name for the assembly - this will appear in data EPiC Built Assets and reports.\r\n   ...",
  "code": "# -*- coding: UTF-8 -*-\r\n# EPiC Grasshopper: A Plugin for analysing embodied environmental flows\r\n#\r\n# Copyright (c) 2023, EPiC Grasshopper.\r\n# You should have received a copy of the GNU General Public License\r\n# along with EPiC Grasshopper; If not, see <http://www.gnu.org/licenses/>.\r\n#\r\n# Further information about the EPiC Database can be found at <https://bit.ly/EPiC_Database>\r\n# To download a full copy of the database, goto <http://doi.org/10.26188/5dc228ef98c5a>\r\n#\r\n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\r\n\r\n\"\"\"\r\nCreates a linear assembly based on the selected geometry and EPiC Materials\r\n\r\n    Inputs:\r\n        Assembly_Name: Name for the assembly - this will appear in data EPiC Built Assets and reports.\r\n        ***Optional***\r\n\r\n        Assembly_Category: Name for the assembly category, overrides assembly name. Will use assembly name if none specified.\r\n        Note that assemblies in the same category will be grouped together in the EPiC Built Assets and EPiC Analysis.\r\n        ***Optional***\r\n\r\n        Assembly_Comments: Comments about the assembly - these will appear in the data EPiC Built Assets and reports.\r\n        ***Optional***\r\n\r\n        **Selected_Lines_and/or_Numerical_Values_(m): A selection of lines that represent the EPiC Assembly AND/OR values in meters.\r\n        A length calculation will be performed on geometry to calculate embodied environmental flows.\r\n        (**REQUIRED)\r\n\r\n        Service_Life_(Years)_Assembly_Override: Estimated service_life (in years) for the assembly.\r\n        Note this will override all material service_life attributes.\r\n        ***Optional***\r\n\r\n        Wastage_Coefficient_(%)_Assembly_Override: Estimated wastage percentage (%) for the material.\r\n        Note this will override all material wastage attributes.\r\n        ***Optional***\r\n\r\n    Outputs:\r\n        EPiC_Assembly: Outputs a class object (EPiC_Assembly) to be used in EPiC_Analysis and EPiC_Built_Asset.\r\n        This contains all of the embedded assembly attributes.\r\n        (selected_geometry, name, thickness, service_life, wastage, comments, epic_materials, assembly_units)\r\n        ***Connect that output to a panel for a summary***\r\n\r\n        Initial_Embodied_Energy_(MJ): The total initial Embodied Energy (MJ) for the assembly.\r\n        This includes the wastage coefficient but does NOT include service_life calculations.\r\n\r\n        Initial_Embodied_Water_(L): The total initial Embodied Water (L) for the assembly.\r\n        This includes the wastage coefficient but does NOT include service_life calculations.\r\n\r\n        Initial_Embodied_GHG_(kgCO₂e): The total initial Embodied Greenhouse Gas Emissions (kgCO₂e) for the assembly.\r\n        This includes the wastage coefficient but does NOT include service_life calculations.\r\n\r\n        Geometry: The geometry used to define the assembly.\r\n\"\"\"\r\n\r\nfrom Grasshopper.Kernel import GH_RuntimeMessageLevel as RML\r\nfrom ghpythonlib.componentbase import executingcomponent as component\r\nimport epic\r\n\r\n# Allow realtime feedback with external python files in grasshopper\r\nepic = reload(epic)\r\n\r\n# Specify component attributes and units to use for the assembly\r\nunits = 'm'\r\ncomponent_name = \"EPiC Assembly - Linear (m)\"\r\ngeometry_warning = \"Brep/surface/point input detected. Please input a line, curve, polyline, or numerical value\"\r\n\r\nclass EPiCAssemblyVolumetricComponent(component):\r\n\r\n    def RunScript(self,\r\n            input_assembly_name,\r\n            input_assembly_category,\r\n            input_assembly_comments,\r\n            input_selected_geometry,\r\n            input_service_life_override,\r\n            input_wastage_override,\r\n            _null,\r\n            material_01,\r\n            material_01_qty,\r\n            material_02,\r\n            material_02_qty,\r\n            material_03,\r\n            material_03_qty,\r\n            material_04,\r\n            material_04_qty,\r\n            material_05,\r\n            material_05_qty,\r\n            material_06,\r\n            material_06_qty,\r\n            material_07,\r\n            material_07_qty,\r\n            material_08,\r\n            material_08_qty,\r\n            material_09,\r\n            material_09_qty,\r\n            material_10,\r\n            material_10_qty):\r\n\r\n        # Component and version information\r\n        __author__ = epic.__author__\r\n        __version__ = \"1.02\"\r\n        if __version__ == epic.__version__:\r\n            ghenv.Component.Message = epic.__message__\r\n        else:\r\n            ghenv.Component.Message = epic.version_mismatch(__version__)\r\n            ghenv.Component.AddRuntimeMessage(RML.Remark, ghenv.Component.Message)\r\n        ghenv.Component.Name = component_name\r\n        ghenv.Component.NickName = component_name\r\n\r\n        # Added for compatability with Rhino 8.\r\n        # Get material variables from locals(), so it is possible to create inputs dynamically. Check for up to 20 materials.\r\n        material_list = []\r\n        for num in range(1, 21):\r\n            if num < 10:\r\n                num = str(0) + str(num)\r\n            else:\r\n                num = str(num)\r\n            _ = 'material_' + num\r\n            if _ and _ + '_qty' in locals():\r\n                material_list.append(locals()[_])\r\n                material_list.append(locals()[_ + '_qty'])\r\n            else:\r\n                break\r\n\r\n        # Sort the material inputs and quantities\r\n        material_list = epic.EPiCAssembly.create_list_of_input_materials_and_qty(ghenv.Component, units, material_list)\r\n\r\n        # Create an EPiCAssembly class object\r\n        try:\r\n            assembly = epic.EPiCAssembly(input_selected_geometry, input_assembly_name, input_service_life_override,\r\n                                         input_wastage_override, input_assembly_comments, material_list,\r\n                                         assembly_units=units, category=input_assembly_category)\r\n        except TypeError:\r\n            ghenv.Component.AddRuntimeMessage(RML.Warning, geometry_warning)\r\n            return [geometry_warning]*5\r\n\r\n        # Test to see if geometry is connected to the component\r\n        if not input_selected_geometry:\r\n            ghenv.Component.AddRuntimeMessage(RML.Warning, \"No geometry is connected to the assembly\")\r\n\r\n        # Test to see if any material inputs exist\r\n        if len(material_list) < 1:\r\n            ghenv.Component.AddRuntimeMessage(RML.Warning, \"No input EPiC_Material inputs or material quantities have been found \")\r\n\r\n        # Calculate the environmental flows for the assembly\r\n        assembly.calculate_flows()\r\n\r\n        # Specify the component outputs\r\n        output_initial_energy = assembly.flows['initial']['energy']\r\n        output_initial_water = assembly.flows['initial']['water']\r\n        output_initial_ghg = assembly.flows['initial']['ghg']\r\n\r\n        # Return all component outputs\r\n        return assembly, None, output_initial_energy, output_initial_water, output_initial_ghg, None, assembly.output_geometry\r\n",
  "language": "python",
  "imports": [
    "ghpythonlib"
  ],
  "has_docstring": true
}