{
  "source_url": "https://github.com/mcneel/rhino-developer-samples/blob/8462fc3487f8b7a58595ef73f6a5c09f92717f60/rhinopython/SampleSphere.py",
  "repo": "mcneel/rhino-developer-samples",
  "repo_stars": 743,
  "repo_description": "Rhino and Grasshopper developer sample code",
  "license": "NOASSERTION",
  "filepath": "rhinopython/SampleSphere.py",
  "instruction": "SampleSphere.py Copyright (c) 2017 Robert McNeel & Associates. See License.md in the root of this repository for details.",
  "code": "################################################################################\n# SampleSphere.py\n# Copyright (c) 2017 Robert McNeel & Associates.\n# See License.md in the root of this repository for details.\n################################################################################\nimport Rhino\nimport scriptcontext as sc\n\n# Rhino.Input.Custom.GetPoint derived class that dynamically\n# draws a sphere.   \nclass SampleGetSphere(Rhino.Input.Custom.GetPoint):\n    \n    # Class initializer\n    def __init__(self, plane):\n        self.m_plane = plane\n        self.m_sphere = Rhino.Geometry.Sphere(plane, 1.0)\n        self.m_draw = False\n        self.m_color = Rhino.ApplicationSettings.AppearanceSettings.TrackingColor\n    \n    # Calculates the sphere\n    def CalculateSphere(self, point):\n        rc = False\n        dir = point - self.m_plane.Origin\n        if (not dir.IsTiny()):\n            self.m_sphere.Radius = dir.Length\n            rc = True\n        return rc\n    \n    # OnMouseMove override\n    def OnMouseMove(self, e):\n        self.m_draw = self.CalculateSphere(e.Point)\n        # Call base class...\n        Rhino.Input.Custom.GetPoint.OnMouseMove(self, e)\n    \n    # OnDynamicDraw override\n    def OnDynamicDraw(self, e):\n        if self.m_draw:\n            e.Display.DrawSphere(self.m_sphere, self.m_color)\n        # Call base class...\n        Rhino.Input.Custom.GetPoint.OnDynamicDraw(self, e)\n        \n    # Returns the calculated sphere\n    def Sphere(self):\n        return self.m_sphere\n    \n    \ndef SampleSphere():\n    \n    # Center of sphere\n    gp = Rhino.Input.Custom.GetPoint()\n    gp.SetCommandPrompt(\"Center of sphere\")\n    gp.Get()\n    if gp.CommandResult() <> Rhino.Commands.Result.Success:\n        return gp.CommandResult()\n    \n    # Calculate base plane\n    base_plane = gp.View().ActiveViewport.ConstructionPlane()\n    base_plane.Origin = gp.Point()\n    \n    # Radius\n    gs = SampleGetSphere(base_plane)\n    gs.SetCommandPrompt(\"Radius\")\n    gs.SetBasePoint(base_plane.Origin, True)\n    gs.DrawLineFromPoint(base_plane.Origin, True)\n    gs.Get()\n    if gs.CommandResult() <> Rhino.Commands.Result.Success:\n        return gs.CommandResult()\n    \n    # One final calculation\n    if gs.CalculateSphere(gs.Point()):\n        sc.doc.Objects.AddSphere(gs.Sphere())\n        sc.doc.Views.Redraw()\n    \n# Check to see if this file is being executed as the \"main\" python\n# script instead of being used as a module by some other python script\n# This allows us to use the module which ever way we want.\nif __name__ == \"__main__\":\n    SampleSphere()\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "scriptcontext"
  ],
  "has_docstring": true
}