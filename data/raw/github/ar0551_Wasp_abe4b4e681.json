{
  "source_url": "https://github.com/ar0551/Wasp/blob/66f63c018f2420d37aa451ade0178de260946b0c/src/ghComp/Wasp_Remove%20Parts.py",
  "repo": "ar0551/Wasp",
  "repo_stars": 67,
  "repo_description": "Combinatorial Design with Grasshopper plug-in (LGPL) initiated by Andrea Rossi",
  "license": "LGPL-3.0",
  "filepath": "src/ghComp/Wasp_Remove Parts.py",
  "instruction": "Remove specific parts from an aggregation.\n--> WIP Component: might be incomplete or contain bugs <--\n-\nProvided by Wasp 0.6\n    Args:\n        AGGR: Aggregation to edit\n        ID: ID of the part to...",
  "code": "# Wasp: Discrete Design with Grasshopper plug-in (LGPL) initiated by Andrea Rossi\n# \n# This file is part of Wasp.\n# \n# Copyright (c) 2017-2023, Andrea Rossi <a.rossi.andrea@gmail.com>\n# Wasp is free software; you can redistribute it and/or modify \n# it under the terms of the GNU Lesser General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# Wasp is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU Lesser General Public License for more details.\n# \n# You should have received a copy of the GNU Lesser General Public License\n# along with Wasp; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license LGPL-3.0 https://www.gnu.org/licenses/lgpl-3.0.html\n#\n# Early development of Wasp has been carried out by Andrea Rossi\n# as part of research on digital materials and discrete design at:\n# DDU Digital Design Unit - Prof. Oliver Tessmann\n# Technische Universitt Darmstadt\n\n\n#########################################################################\n##                            COMPONENT INFO                           ##\n#########################################################################\n\n\"\"\"\nRemove specific parts from an aggregation.\n--> WIP Component: might be incomplete or contain bugs <--\n-\nProvided by Wasp 0.6\n    Args:\n        AGGR: Aggregation to edit\n        ID: ID of the part to remove\n        CHILD: OPTIONAL // Remove also all children of the part (False by default)\n        REM: True to remove the part from the aggregation\n        RESET: Reset the aggregation to the initial state\n    Returns:\n        AGGR_OUT: Edited aggregation object\n        PART_OUT: Edited parts\n        C_PART: Currently selected part (for visualization).\n        C_CHILD: Children of the selected part (for visualization).\n\"\"\"\n\nghenv.Component.Name = \"Wasp_Remove Parts\"\nghenv.Component.NickName = 'RemovePart'\nghenv.Component.Message = 'v0.6.001'\nghenv.Component.IconDisplayMode = ghenv.Component.IconDisplayMode.application\nghenv.Component.Category = \"Wasp\"\nghenv.Component.SubCategory = \"X | Experimental\"\ntry: ghenv.Component.AdditionalHelpFromDocStrings = \"2\"\nexcept: pass\n\n\nimport sys\nimport copy\nimport Rhino.Geometry as rg\nimport Grasshopper as gh\n\n\n## add Wasp install directory to system path\nwasp_loaded = False\nghcompfolder = gh.Folders.DefaultAssemblyFolder\nif ghcompfolder not in sys.path:\n    sys.path.append(ghcompfolder)\ntry:\n    from wasp import __version__\n    wasp_loaded = True\nexcept:\n    msg = \"Cannot import Wasp. Is the wasp folder available in \" + ghcompfolder + \"?\"\n    ghenv.Component.AddRuntimeMessage(gh.Kernel.GH_RuntimeMessageLevel.Error, msg)\n\n## if Wasp is installed correctly, load the classes required by the component\nif wasp_loaded:\n    pass\n\n\ndef main(base_aggregation, id, remove_children, remove, reset, aggregation):\n    \n    def returnChildren(base_aggregation, part, list):\n        if len(part.children) > 0:\n            for child in part.children:\n                list.append(child)\n                returnChildren(base_aggregation, base_aggregation.aggregated_parts[child], list)\n        return list\n    \n    \n    check_data = True\n    \n    ##check inputs\n    if base_aggregation is None:\n        check_data = False\n        msg = \"No aggregation provided\"\n        ghenv.Component.AddRuntimeMessage(gh.Kernel.GH_RuntimeMessageLevel.Warning, msg)\n    \n    if remove_children is None:\n        remove_children = False\n    \n    if remove is None:\n        remove = False\n    \n    if reset is None:\n        reset = False\n    \n    if check_data:\n        \n        new_name = base_aggregation.name + \"_edit\"\n        remove_ids = []\n        current_part = None\n        current_children = []\n        \n        if reset or aggregation is None:\n            parts_list = [base_aggregation.parts[key] for key in base_aggregation.parts]\n            aggregation = copy.deepcopy(base_aggregation)\n            aggregation.name = new_name\n        \n        for i in range(len(aggregation.aggregated_parts)):\n            if aggregation.aggregated_parts[i].id == id:\n                current_part = aggregation.aggregated_parts[i]\n                break\n        \n        if current_part is not None:\n            remove_ids.append(id)\n            if remove_children:\n                remove_ids = returnChildren(aggregation, current_part, remove_ids)\n            remove_ids.sort()\n            \n            if remove:\n                for i in range(len(aggregation.aggregated_parts)-1, -1, -1):\n                    if aggregation.aggregated_parts[i].id in remove_ids:\n                        aggregation.aggregated_parts.pop(i)\n            \n            else:\n                for i in range(len(aggregation.aggregated_parts)-1, -1, -1):\n                    if aggregation.aggregated_parts[i].id in remove_ids:\n                        if aggregation.aggregated_parts[i].id == id:\n                            current_part = aggregation.aggregated_parts[i]\n                        else:\n                            current_children.append(aggregation.aggregated_parts[i])\n        \n        else:\n            msg = \"The provided id does not exist in the current aggregation. Might be out of range or already removed.\"\n            ghenv.Component.AddRuntimeMessage(gh.Kernel.GH_RuntimeMessageLevel.Warning, msg)\n        \n        return aggregation, current_part, current_children\n    else:\n        return -1\n\n## create aggregation container in global variables dict\nif 'aggregation_container' not in globals():\n    aggregation_container = None\n\nresult = main(AGGR, ID, CHILD, REM, RESET, aggregation_container)\n\nif result != -1:\n    aggregation_container = result[0]\n    \n    AGGR_OUT = aggregation_container\n    PART_OUT = aggregation_container.aggregated_parts\n    C_PART = result[1]\n    C_CHILD = result[2]\n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}