{
  "source_url": "https://github.com/fromenlab/LatticeTools/blob/4ed52adaf55fdab72c4b6c9566f011a3bdc9f8d3/log/system_info.py",
  "repo": "fromenlab/LatticeTools",
  "repo_stars": 1,
  "repo_description": "Components for generating lattice structures in Rhino®/Grasshopper®",
  "license": "NOASSERTION",
  "filepath": "log/system_info.py",
  "instruction": "System info",
  "code": "from ghpythonlib.componentbase import dotnetcompiledcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\nimport scriptcontext\nimport os\nimport hashlib\nfrom datetime import datetime\nimport log_utils\n\nclass SystemInfo(component):\n    def __new__(cls):\n        instance = Grasshopper.Kernel.GH_Component.__new__(cls,\n            \"Logging - System Info\", \"SystemInfo\", \"\"\"Provides a scripting component.\"\"\", \"LatticeTools\", \"Log\")\n        return instance\n    \n    def get_ComponentGuid(self):\n        return System.Guid(\"61f4317f-f9d1-4e44-a7d2-d7c3492db396\")\n    \n    def SetUpParam(self, p, name, nickname, description):\n        p.Name = name\n        p.NickName = nickname\n        p.Description = description\n        p.Optional = True\n    \n    def RegisterInputParams(self, pManager):\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"refresh\", \"refresh\", \"Recalculate the component\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.list\n        self.Params.Input.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_String()\n        self.SetUpParam(p, \"project_dir\", \"project_dir\", \"The project's main directory\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"save_directory\", \"save_directory\", \"Folder to save the STL and log output\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"id_properties\", \"id_properties\", \"Key features of the part. Takes single value or list of properties\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.list\n        self.Params.Input.Add(p)\n        \n    \n    def RegisterOutputParams(self, pManager):\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"part_id\", \"part_id\", \"A unique ID for the generated part. Takes the format (date)-(properties fragment)-(instance fragment)\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"date_utc\", \"date_utc\", \"The UTC date and time at which computation was performed\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"mesh_path\", \"mesh_path\", \"Full path for the STL output\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"log_path\", \"log_path\", \"Full path for the log output\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"gh_file\", \"gh_file\", \"Path and name of the Grasshopper definition\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"base_unit\", \"base_unit\", \"Base unit of the Rhino and Grasshopper file (e.g. millimeter)\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"device\", \"device\", \"Device used for computation\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"rhino_build\", \"rhino_build\", \"Rhino software version\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"rhino_date\", \"rhino_date\", \"Rhino software version release date\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"gh_build\", \"gh_build\", \"Grasshopper software version\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"gh_date\", \"gh_date\", \"Grasshopper software version release date\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"core_dependencies\", \"core_dependencies\", \"Default libraries used in this definition\")\n        self.Params.Output.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"addon_dependencies\", \"addon_dependencies\", \"Installed libraries used in this definition\")\n        self.Params.Output.Add(p)\n        \n    \n    def SolveInstance(self, DA):\n        p0 = self.marshal.GetInput(DA, 0)\n        p1 = self.marshal.GetInput(DA, 1)\n        p2 = self.marshal.GetInput(DA, 2)\n        p3 = self.marshal.GetInput(DA, 3)\n        result = self.RunScript(p0, p1, p2, p3)\n\n        if result is not None:\n            if not hasattr(result, '__getitem__'):\n                self.marshal.SetOutput(result, DA, 0, True)\n            else:\n                self.marshal.SetOutput(result[0], DA, 0, True)\n                self.marshal.SetOutput(result[1], DA, 1, True)\n                self.marshal.SetOutput(result[2], DA, 2, True)\n                self.marshal.SetOutput(result[3], DA, 3, True)\n                self.marshal.SetOutput(result[4], DA, 4, True)\n                self.marshal.SetOutput(result[5], DA, 5, True)\n                self.marshal.SetOutput(result[6], DA, 6, True)\n                self.marshal.SetOutput(result[7], DA, 7, True)\n                self.marshal.SetOutput(result[8], DA, 8, True)\n                self.marshal.SetOutput(result[9], DA, 9, True)\n                self.marshal.SetOutput(result[10], DA, 10, True)\n                self.marshal.SetOutput(result[11], DA, 11, True)\n                self.marshal.SetOutput(result[12], DA, 12, True)\n        \n    def get_Internal_Icon_24x24(self):\n        o = \"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAF6SURBVEhLYwgICNeUlJF9zMvL91dMXOI/NTAPL+9fkJkgsxlAjLTsvP9nrt2lKgaZKSkj95iBF+hykMD+i/f/Lz/xiCoYZBbITJBPGEBeAnFAErFr31AFg8wCmQkye9QCrHjUAoJ41AKCmL4WCAoJgTmbzz7437T7OVUwyCyQmYKCQv8Z+AUEvqzYsBUsQE0MMpNfQPALg5WtfSk3D88fSxu7/9HxSRg4Nin1f0t3//+O/skoGCQGksOmB2QWyEyQ2QwgEBoaymxiYdmrpaW7BR2rqKk/9PQP/J5TUvUZGYPEQHLY9JhYWPWAzAQbTghExCUvL6xu/L9qxyEUDBIDyUGVkQ8CQsL6QEGCHsYgMZAcVBlukJCcnmNkbP7R08f3v5ePHwb2Dwz+f/zsxf8PX7xFwSAxkBw2PSCzQGYmpmRkM4AYNx88/f/u87f/T998AGMQG2TIq/efwRjEJlUeZCbIbNpbAPKGsanZB1xBRA4GmQUyMzElIxsAgSzS87fNrvUAAAAASUVORK5CYII=\"\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\n\n    def RunScript(self, refresh, project_dir, save_directory, id_properties):\n        ghdoc = scriptcontext.doc\n        part_id = None\n        date_utc = None\n        gh_file = None\n        base_unit = None\n        device = None\n        rhino_build = None\n        rhino_date = None\n        gh_build = None\n        gh_date = None\n        core_dependencies = None\n        addon_dependencies = None\n\n\n        part_id, date_utc = log_utils.make_id(id_properties)\n        gh_path = os.path.realpath(ghdoc.Path)\n\n        if not save_directory:\n            save_directory = os.path.dirname(ghdoc.Path)\n\n        file_name_base = \"\\\\\".join([save_directory, part_id])\n        mesh_path = \"\\\"{}.stl\\\"\".format(file_name_base)\n        log_path = \"{}.txt\".format(file_name_base)\n\n        if project_dir:\n            gh_file = gh_path.split(project_dir)[1]\n        else:\n            gh_file = gh_path\n\n        base_unit = log_utils.get_units(ghdoc)\n        device = log_utils.get_device()\n        rhino_build, rhino_date, gh_build, gh_date = log_utils.get_software_build()\n\n\n        core_libraries, addon_libraries = log_utils.get_libraries(self)\n\n        core_dependencies = []\n        for id, lib in core_libraries.iteritems():\n            core_dependencies.append(\"{0} {1}\".format(lib.Name, lib.Version))\n\n        addon_dependencies = []\n        for id, lib in addon_libraries.iteritems():\n            addon_dependencies.append(\"{0} {1}\".format(lib.Name, lib.Version))\n        \n        return part_id, date_utc, mesh_path, log_path, gh_file, base_unit, device, rhino_build, rhino_date, gh_build, gh_date, core_dependencies, addon_dependencies\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}