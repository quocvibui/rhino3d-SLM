{
  "source_url": "https://github.com/mahaidong/p4r-vscode/blob/f75b8596c881faf1d5c2d0b7159ab2ec228acc4c/lib/rhinoscript/hatch.py",
  "repo": "mahaidong/p4r-vscode",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "lib/rhinoscript/hatch.py",
  "instruction": null,
  "code": "import scriptcontext\nimport utility as rhutil\nimport Rhino\nimport System.Guid\n\ndef AddHatch(curve_id, hatch_pattern=None, scale=1.0, rotation=0.0):\n    \"\"\"Creates a new hatch object from a closed planar curve object\n    Parameters:\n      curve_id (guid): identifier of the closed planar curve that defines the\n          boundary of the hatch object\n      hatch_pattern (str, optional): name of the hatch pattern to be used by the hatch\n          object. If omitted, the current hatch pattern will be used\n      scale (number, optional): hatch pattern scale factor\n      rotation (number, optional): hatch pattern rotation angle in degrees.\n    Returns:\n      guid:identifier of the newly created hatch on success\n      None on error\n    Example:\n      import rhinoscriptsyntax as rs\n      circle = rs.AddCircle(rs.WorldXYPlane(), 10.0)\n      if rs.IsHatchPattern(\"Grid\"):\n          rs.AddHatch( circle, \"Grid\" )\n      else:\n          rs.AddHatch( circle, rs.CurrentHatchPattern() )\n    See Also:\n      AddHatches\n      CurrentHatchPattern\n      HatchPatternNames\n    \"\"\"\n    rc = AddHatches(curve_id, hatch_pattern, scale, rotation)\n    if rc: return rc[0]\n    return scriptcontext.errorhandler()\n\n\ndef AddHatches(curve_ids, hatch_pattern=None, scale=1.0, rotation=0.0, tolerance=None):\n    \"\"\"Creates one or more new hatch objects a list of closed planar curves\n    Parameters:\n      curve_ids ([guid, ...]): identifiers of the closed planar curves that defines the\n          boundary of the hatch objects\n      hatch_pattern (str, optional):  name of the hatch pattern to be used by the hatch\n          object. If omitted, the current hatch pattern will be used\n      scale (number, optional): hatch pattern scale factor\n      rotation (number, optional): hatch pattern rotation angle in degrees.\n      tolerance (number, optional): tolerance for hatch fills.\n    Returns:\n      list(guid, ...): identifiers of the newly created hatch on success\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      curves = rs.GetObjects(\"Select closed planar curves\", rs.filter.curve)\n      if curves:\n          if rs.IsHatchPattern(\"Grid\"):\n              rs.AddHatches( curves, \"Grid\" )\n          else:\n              rs.AddHatches( curves, rs.CurrentHatchPattern() )\n    See Also:\n      AddHatch\n      CurrentHatchPattern\n      HatchPatternNames\n    \"\"\"\n    id = rhutil.coerceguid(curve_ids, False)\n    if id: curve_ids = [id]\n    index = scriptcontext.doc.HatchPatterns.CurrentHatchPatternIndex\n    if hatch_pattern and hatch_pattern!=index:\n        if isinstance(hatch_pattern, int):\n            index = hatch_pattern\n        else:\n            pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n            index = Rhino.RhinoMath.UnsetIntIndex if pattern_instance is None else pattern_instance.Index\n        if index<0: return scriptcontext.errorhandler()\n    curves = [rhutil.coercecurve(id, -1, True) for id in curve_ids]\n    rotation = Rhino.RhinoMath.ToRadians(rotation)\n    if tolerance is None or tolerance < 0:\n        tolerance = scriptcontext.doc.ModelAbsoluteTolerance\n    hatches = Rhino.Geometry.Hatch.Create(curves, index, rotation, scale, tolerance)\n    if not hatches: return scriptcontext.errorhandler()\n    ids = []\n    for hatch in hatches:\n        id = scriptcontext.doc.Objects.AddHatch(hatch)\n        if id==System.Guid.Empty: continue\n        ids.append(id)\n    if not ids: return scriptcontext.errorhandler()\n    scriptcontext.doc.Views.Redraw()\n    return ids\n\n\ndef AddHatchPatterns(filename, replace=False):\n    \"\"\"Adds hatch patterns to the document by importing hatch pattern definitions\n    from a pattern file.\n    Parameters:\n      filename (str): name of the hatch pattern file\n      replace (bool, optional): If hatch pattern names already in the document match hatch\n          pattern names in the pattern definition file, then the existing hatch\n          patterns will be redefined\n    Returns:\n      list(str, ...): Names of the newly added hatch patterns if successful\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      filename = rs.OpenFileName(\"Import\", \"Pattern Files (*.pat)|*.pat||\")\n      if filename:\n          patterns = rs.AddHatchPatterns(filename)\n          if patterns:\n              for pattern in patterns: print pattern\n    See Also:\n      HatchPatternCount\n      HatchPatternNames\n    \"\"\"\n    patterns = Rhino.DocObjects.HatchPattern.ReadFromFile(filename, True)\n    if not patterns: return scriptcontext.errorhandler()\n    rc = []\n    for pattern in patterns:\n         index = scriptcontext.doc.HatchPatterns.Add(pattern)\n         if index>=0:\n             pattern = scriptcontext.doc.HatchPatterns[index]\n             rc.append(pattern.Name)\n    if not rc: return scriptcontext.errorhandler()\n    return rc\n\n\ndef CurrentHatchPattern(hatch_pattern=None):\n    \"\"\"Returns or sets the current hatch pattern file\n    Parameters:\n      hatch_pattern(str, optional):  name of an existing hatch pattern to make current\n    Returns:\n      str: if hatch_pattern is not specified, the current hatch pattern\n      str: if hatch_pattern is specified, the previous hatch pattern\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      if rs.IsHatchPattern(\"Hatch2\"): rs.CurrentHatchPattern(\"Hatch2\")\n    See Also:\n      HatchPatternCount\n      HatchPatternNames\n    \"\"\"\n    rc = scriptcontext.doc.HatchPatterns.CurrentHatchPatternIndex\n    if hatch_pattern:\n        pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n        if pattern_instance is None: return scriptcontext.errorhandler()\n        scriptcontext.doc.HatchPatterns.CurrentHatchPatternIndex = pattern_instance.Index\n    return rc\n\n\ndef ExplodeHatch(hatch_id, delete=False):\n    \"\"\"Explodes a hatch object into its component objects. The exploded objects\n    will be added to the document. If the hatch object uses a solid pattern,\n    then planar face Brep objects will be created. Otherwise, line curve objects\n    will be created\n    Parameters:\n      hatch_id (guid): identifier of a hatch object\n      delete (bool, optional): delete the hatch object\n    Returns:\n      list(guid, ...): list of identifiers for the newly created objects\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      id = rs.GetObject(\"Select object\")\n      if rs.IsHatch(id): rs.ExplodeHatch(id, True)\n    See Also:\n      IsHatch\n      HatchPattern\n      HatchRotation\n      HatchScale\n    \"\"\"\n    rhobj = rhutil.coercerhinoobject(hatch_id, True, True)\n    pieces = rhobj.HatchGeometry.Explode()\n    if not pieces: return scriptcontext.errorhandler()\n    attr = rhobj.Attributes\n    rc = []\n    for piece in pieces:\n        id = None\n        if isinstance(piece, Rhino.Geometry.Curve):\n            id = scriptcontext.doc.Objects.AddCurve(piece, attr)\n        elif isinstance(piece, Rhino.Geometry.Brep):\n            id = scriptcontext.doc.Objects.AddBrep(piece, attr)\n        if id: rc.append(id)\n    if delete: scriptcontext.doc.Objects.Delete(rhobj)\n    return rc\n\n\ndef HatchPattern(hatch_id, hatch_pattern=None):\n    \"\"\"Returns or changes a hatch object's hatch pattern\n    Parameters:\n      hatch_id (guid): identifier of a hatch object\n      hatch_pattern (str, optional): name of an existing hatch pattern to replace the\n          current hatch pattern\n    Returns:\n      str: if hatch_pattern is not specified, the current hatch pattern\n      str: if hatch_pattern is specified, the previous hatch pattern\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      objects = rs.AllObjects()\n      if objects is not None:\n          for obj in objects:\n              if rs.IsHatch(obj) and rs.HatchPattern(obj)==\"Solid\":\n                  rs.SelectObject(obj)\n    See Also:\n      AddHatch\n      AddHatches\n      HatchRotation\n      HatchScale\n      IsHatch\n    \"\"\"\n    hatchobj = rhutil.coercerhinoobject(hatch_id, True, True)\n    if not isinstance(hatchobj, Rhino.DocObjects.HatchObject):\n        return scriptcontext.errorhandler()\n    old_index = hatchobj.HatchGeometry.PatternIndex\n    if hatch_pattern:\n        new_patt = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n        if new_patt is None: return scriptcontext.errorhandler()\n        hatchobj.HatchGeometry.PatternIndex = new_patt.Index\n        hatchobj.CommitChanges()\n        scriptcontext.doc.Views.Redraw()\n    return scriptcontext.doc.HatchPatterns[old_index].Name\n\n\ndef HatchPatternCount():\n    \"\"\"Returns the number of hatch patterns in the document\n    Returns:\n      number: the number of hatch patterns in the document\n    Example:\n      import rhinoscriptsyntax as rs\n      print \"There are\", rs.HatchPatternCount(), \"hatch patterns.\"\n    See Also:\n      HatchPatternNames\n    \"\"\"\n    return scriptcontext.doc.HatchPatterns.Count\n\n\ndef HatchPatternDescription(hatch_pattern):\n    \"\"\"Returns the description of a hatch pattern. Note, not all hatch patterns\n    have descriptions\n    Parameters:\n      hatch_pattern (str): name of an existing hatch pattern\n    Returns:\n      str: description of the hatch pattern on success otherwise None\n    Example:\n      import rhinoscriptsyntax as rs\n      patterns = rs.HatchPatternNames()\n      for pattern in patterns:\n          description = rs.HatchPatternDescription(pattern)\n          if description: print pattern, \"-\", description\n          else: print pattern\n    See Also:\n      HatchPatternCount\n      HatchPatternNames\n    \"\"\"\n    pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n    if pattern_instance is None: return scriptcontext.errorhandler()\n    return pattern_instance.Description\n\n\ndef HatchPatternFillType(hatch_pattern):\n    \"\"\"Returns the fill type of a hatch pattern.\n    Parameters:\n      hatch_pattern (str): name of an existing hatch pattern\n    Returns:\n      number: hatch pattern's fill type if successful\n              0 = solid, uses object color\n              1 = lines, uses pattern file definition\n              2 = gradient, uses fill color definition\n      None: if unsuccessful\n    Example:\n      import rhinoscriptsyntax as rs\n      patterns = rs.HatchPatternNames()\n      for pattern in patterns:\n          fill = rs.HatchPatternFillType(pattern)\n          print pattern, \"-\", fill\n    See Also:\n      HatchPatternCount\n      HatchPatternNames\n    \"\"\"\n    pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n    if pattern_instance is None: return scriptcontext.errorhandler()\n    return int(pattern_instance.FillType)\n\n\ndef HatchPatternNames():\n    \"\"\"Returns the names of all of the hatch patterns in the document\n    Returns:\n      list(str, ...): the names of all of the hatch patterns in the document\n    Example:\n      import rhinoscriptsyntax as rs\n      patterns = rs.HatchPatternNames()\n      for pattern in patterns:\n          description = rs.HatchPatternDescription(pattern)\n          if description: print pattern, \"-\", description\n          else: print pattern\n    See Also:\n      HatchPatternCount\n    \"\"\"\n    rc = []\n    for i in range(scriptcontext.doc.HatchPatterns.Count):\n        hatchpattern = scriptcontext.doc.HatchPatterns[i]\n        if hatchpattern.IsDeleted: continue\n        rc.append(hatchpattern.Name)\n    return rc\n\ndef HatchRotation(hatch_id, rotation=None):\n    \"\"\"Returns or modifies the rotation applied to the hatch pattern when\n    it is mapped to the hatch's plane\n    Parameters:\n      hatch_id (guid): identifier of a hatch object\n      rotation (number, optional): rotation angle in degrees\n    Returns:\n      number: if rotation is not defined, the current rotation angle\n      number: if rotation is specified, the previous rotation angle\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      objects = rs.AllObjects()\n      if objects:\n          for obj in objects:\n              if rs.IsHatch(obj) and rs.HatchRotation(obj)>0:\n                  rs.HatchRotation(obj,0)\n    See Also:\n      AddHatch\n      AddHatches\n      HatchPattern\n      HatchScale\n      IsHatch\n    \"\"\"\n    hatchobj = rhutil.coercerhinoobject(hatch_id, True, True)\n    if not isinstance(hatchobj, Rhino.DocObjects.HatchObject):\n        return scriptcontext.errorhandler()\n    rc = hatchobj.HatchGeometry.PatternRotation\n    rc = Rhino.RhinoMath.ToDegrees(rc)\n    if rotation is not None and rotation!=rc:\n        rotation = Rhino.RhinoMath.ToRadians(rotation)\n        hatchobj.HatchGeometry.PatternRotation = rotation\n        hatchobj.CommitChanges()\n        scriptcontext.doc.Views.Redraw()\n    return rc\n\n\ndef HatchScale(hatch_id, scale=None):\n    \"\"\"Returns or modifies the scale applied to the hatch pattern when it is\n    mapped to the hatch's plane\n    Parameters:\n      hatch_id (guid): identifier of a hatch object\n      scale (number, optional):  scale factor\n    Returns:\n      number: if scale is not defined, the current scale factor\n      number: if scale is defined, the previous scale factor\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      objects = rs.NormalObjects()\n      if objects:\n          for obj in objects:\n              if rs.IsHatch(obj) and rs.HatchScale(obj)>1.0:\n                  rs.HatchScale(obj, 1.0)\n    See Also:\n      HatchPattern\n      HatchRotation\n      IsHatch\n    \"\"\"\n    hatchobj = rhutil.coercerhinoobject(hatch_id)\n    if not isinstance(hatchobj, Rhino.DocObjects.HatchObject):\n        return scriptcontext.errorhandler()\n    rc = hatchobj.HatchGeometry.PatternScale\n    if scale and scale!=rc:\n        hatchobj.HatchGeometry.PatternScale = scale\n        hatchobj.CommitChanges()\n        scriptcontext.doc.Views.Redraw()\n    return rc\n\n\ndef IsHatch(object_id):\n    \"\"\"Verifies the existence of a hatch object in the document\n    Parameters:\n      object_id (guid): identifier of an object\n    Returns:\n      bool: True or False\n    Example:\n      import rhinoscriptsyntax as rs\n      obj = rs.GetObject(\"Select object\")\n      if rs.IsHatch(obj): print \"Object is a hatch\"\n      else: print \"Object is not a hatch\"\n    See Also:\n      HatchPattern\n      HatchRotation\n      HatchScale\n    \"\"\"\n    rhobj = rhutil.coercerhinoobject(object_id, True, False)\n    return isinstance(rhobj, Rhino.DocObjects.HatchObject)\n\n\ndef IsHatchPattern(name):\n    \"\"\"Verifies the existence of a hatch pattern in the document\n    Parameters:\n      name (str): the name of a hatch pattern\n    Returns:\n      bool: True or False\n    Example:\n      import rhinoscriptsyntax as rs\n      hatch = rs.GetString(\"Hatch pattern name\")\n      if rs.IsHatchPattern(hatch): print \"The hatch pattern exists.\"\n      else: print \"The hatch pattern does not exist.\"\n    See Also:\n      IsHatchPatternCurrent\n      IsHatchPatternReference\n    \"\"\"\n    return scriptcontext.doc.HatchPatterns.FindName(name) is not None\n\n\ndef IsHatchPatternCurrent(hatch_pattern):\n    \"\"\"Verifies that a hatch pattern is the current hatch pattern\n    Parameters:\n      hatch_pattern (str): name of an existing hatch pattern\n    Returns:\n      bool: True or False\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      hatch = rs.GetString(\"Hatch pattern name\")\n      if rs.IsHatchPattern(hatch):\n          if rs.IsHatchPatternCurrent(hatch):\n              print \"The hatch pattern is current.\"\n          else:\n              print \"The hatch pattern is not current.\"\n      else: print \"The hatch pattern does not exist.\"\n    See Also:\n      IsHatchPattern\n      IsHatchPatternReference\n    \"\"\"\n    pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n    if pattern_instance is None: return scriptcontext.errorhandler()\n    return pattern_instance.Index==scriptcontext.doc.HatchPatterns.CurrentHatchPatternIndex\n\n\ndef IsHatchPatternReference(hatch_pattern):\n    \"\"\"Verifies that a hatch pattern is from a reference file\n    Parameters:\n      hatch_pattern (str): name of an existing hatch pattern\n    Returns:\n      bool: True or False\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      hatch = rs.GetString(\"Hatch pattern name\")\n      if rs.IsHatchPattern(hatch):\n          if rs.IsHatchPatternReference(hatch):\n              print \"The hatch pattern is reference.\"\n          else:\n              print \"The hatch pattern is not reference.\"\n      else:\n          print \"The hatch pattern does not exist.\"\n    See Also:\n      IsHatchPattern\n      IsHatchPatternCurrent\n    \"\"\"\n    pattern_instance = scriptcontext.doc.HatchPatterns.FindName(hatch_pattern)\n    if pattern_instance is None: return scriptcontext.errorhandler()\n    return pattern_instance.IsReference",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}