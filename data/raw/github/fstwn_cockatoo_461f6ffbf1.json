{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_KnitContoursOnSurface.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_KnitContoursOnSurface.py",
  "instruction": "Constructs contours for deriving a knitting pattern from a surface.\n---\n[NOTE] When dealing with surfaces, KnitContours are essentially just isocurves.\nSo this is a single-node solution for...",
  "code": "\"\"\"\nConstructs contours for deriving a knitting pattern from a surface.\n---\n[NOTE] When dealing with surfaces, KnitContours are essentially just isocurves.\nSo this is a single-node solution for generating an array of equally distributed\nisocurves on a surface.\n    Inputs:\n        Surface: The surface to create the contours on.\n                 {item, surface}\n        Density: The density (i.e. number) of contour curves.\n                 {item, int}\n        FlipUV: Flip the U and V parameter space of the surface for isocurve\n                extraction.\n                Defaults to False.\n                {item, bool}\n        FlipDir: Flip the curve direction of the contours.\n                 Defualts to False.\n                 {item, bool}\n    Output:\n        KnitContours: The KnitContour curves on the surface for initializing a\n                      KnitNetwork and deriving a knitting pattern.\n                      {item, curve}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200724\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"KnitContoursOnSurface\"\nghenv.Component.NickName =\"KCOS\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"05 Contouring\"\n\nclass KnitContoursOnSurface(component):\n    \n    def RunScript(self, Surface, Density, FlipUV, FlipDir):\n        \n        if Surface and Density is not None:\n            \n            # verify density input\n            if Density <= 0:\n                rml = self.RuntimeMessageLevel.Error\n                rMsg = \"Density can not be zero or negative!\"\n                self.AddRuntimeMessage(rml, rMsg)\n                return Grasshopper.DataTree[object]()\n            \n            # reparamterize the surface\n            dom = Rhino.Geometry.Interval(0, 1)\n            Surface.SetDomain(0, dom)\n            Surface.SetDomain(1, dom)\n            \n            # extract surface isocurves\n            contours = []\n            for i in range(Density+1):\n                # extract isocurves based on parameter input\n                if FlipUV:\n                    param = 1\n                else:\n                    param = 0\n                \n                iso = Surface.IsoCurve(param, i/Density)\n                \n                if i == 0 and not iso.IsValid:\n                    isoval = 0.001\n                    while not iso.IsValid:\n                        iso = Surface.IsoCurve(param, isoval)\n                        isoval += 0.001\n                        \n                elif i == Density and not iso.IsValid:\n                    isoval = 0.999\n                    while not iso.IsValid:\n                        iso = Surface.IsoCurve(param, isoval)\n                        isoval -= 0.001\n                \n                # append to list of contours\n                contours.append(iso)\n            \n            # also reverse the curve order if uv was flipped\n            if FlipUV:\n                contours.reverse()\n            \n            # flip direction of curves based on input param\n            if FlipDir:\n                [c.Reverse() for c in contours]\n        \n        else:\n            if not Surface:\n                rml = self.RuntimeMessageLevel.Warning\n                rMsg = \"No Surface input!\"\n                self.AddRuntimeMessage(rml, rMsg)\n            if Density == None:\n                rml = self.RuntimeMessageLevel.Warning\n                rMsg = \"No Density input!\"\n                self.AddRuntimeMessage(rml, rMsg)\n            \n            return Grasshopper.DataTree[object]()\n        \n        return contours\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}