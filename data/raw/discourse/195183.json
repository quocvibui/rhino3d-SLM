{
  "source_url": "https://discourse.mcneel.com/t/how-to-correctly-set-an-event-to-a-document-when-adding-a-component/195183",
  "topic_id": 195183,
  "title": "How to correctly set an event to a document when adding a component?",
  "question": "When adding an event to the \nGH_Document\n corresponding to a component in  \nGH_Component.AddedToDocument()\n, it may not be added correctly.\n\n\nI am trying to add an event to a document in \nGH_Component\n as follows\n\n\npublic void TestDocumentSettingChenged(Object sender, GH_DocSettingsEventArgs e)\n{\n    RhinoApp.WriteLine($\"TestCheckSettingChenged: {InstanceGuid}\");\n}\n\npublic override void AddedToDocument(GH_Document document)\n{\n    base.AddedToDocument(document);\n    document.SettingsChanged += TestDocumentSettingChenged;\n}\n\n\n\nWhen executed, there were cases of unintended behavior as follows.\n\n\nWhen adding a component from a panel or search box when loading a GH file, I can correctly add an event to the document by adding a method to the \nSettingsChanged\n event for the \nGH_Document\n object in the argument.\n\n\nHowever, when the \nAddToDocument()\n method is called during copy and paste or duplication on the canvas, the event cannot be added. It runs without error, but does not seem to actually add the intended method to the intended document event.\n\n\nI would like to know how to add events from the component to the document for various cases. Thank you in advance.",
  "code_blocks": [
    {
      "code": "public void TestDocumentSettingChenged(Object sender, GH_DocSettingsEventArgs e)\n{\n    RhinoApp.WriteLine($\"TestCheckSettingChenged: {InstanceGuid}\");\n}\n\npublic override void AddedToDocument(GH_Document document)\n{\n    base.AddedToDocument(document);\n    document.SettingsChanged += TestDocumentSettingChenged;\n}",
      "language": "csharp",
      "author": "ymz.ptr",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "geometry"
  ],
  "has_accepted_answer": false,
  "category_id": 8,
  "posts_count": 1,
  "views": 47
}