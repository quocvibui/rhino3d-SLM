{
  "source_url": "https://github.com/contextmachine/mmodel/blob/0545e5c2a11c641fc54e91f603e709d3dea549f3/panels_gh/for_stats/unroll_optional_elems.py",
  "repo": "contextmachine/mmodel",
  "repo_stars": 0,
  "repo_description": "Deployment branch",
  "license": "Apache-2.0",
  "filepath": "panels_gh/for_stats/unroll_optional_elems.py",
  "instruction": "Provides a scripting component.\n    Inputs:\n        x: The x script variable\n        y: The y script variable\n    Output:\n        a: The a output variable",
  "code": "\"\"\"Provides a scripting component.\n    Inputs:\n        x: The x script variable\n        y: The y script variable\n    Output:\n        a: The a output variable\"\"\"\n\n__author__ = \"sofyadobycina\"\n\nimport json\n\ntry:\n    rs = __import__(\"rhinoscriptsyntax\")\nexcept:\n    import rhinoscript as rs\n#  Copyright (c) 2022. Computational Geometry, Digital Engineering and Optimizing your construction processe\"\n\nimport imp\nimport os\nimport sys\nimport Rhino.Geometry as rh\n\nif os.getenv(\"USER\") == \"sofyadobycina\":\n    PWD = os.getenv(\"HOME\") + \"/Documents/GitHub/mmodel/panels_gh\"\n    sys.path.extend([os.getenv(\"HOME\") + \"/Documents/GitHub/mmodel/panels_gh\",\n                     os.getenv(\"HOME\") + \"Documents/GitHub/mmodel/panels_gh/cogs\"])\nelse:\n    PWD = os.getenv(\"MMODEL_DIR\") + \"/panels_gh\"\n    sys.path.extend(\n        [os.getenv(\"MMODEL_DIR\") + \"/panels_gh\", os.getenv(\"MMODEL_DIR\") + \"/panels_gh/cogs\"])\n\ncogsfile, cogsfilename, (cogssuffix, cogsmode, cogstype) = imp.find_module(\"cogs\", path=[PWD])\ncogs = imp.load_module(\"cogs\", cogsfile, PWD, (cogssuffix, cogsmode, cogstype))\n# sys.path.extend([\"/Users/sofyadobycina/Documents/GitHub/mmodel/panels_gh\"])\n\nimport cogs\n\nreload(cogs)\nTT = cogs.TT\nPattern = cogs.Pattern\nPanel = panel\nNicheSide = niche_side\nBackNiche = back_niche\nRibs = ribs\nFramePanel = frame\n\n\nclass UnrollPack:\n\n    def __init__(self, x, y, circle, elements, cog_type=False):\n\n        self.cog_type = cog_type\n        self.cog = TT(x, y, circle)\n\n\n        self.panels = []\n        self.data = []\n        self.bound = []\n\n        self.sizes = {}\n\n        for key, value in elements.items():\n            try:\n                iter(value)\n                for i, v in enumerate(value):\n                    elem = self.args_test(key, v[1], n=i)\n\n                    self.panels.append(elem)\n                    self.data.append(elem.all_elems)\n\n                    self.bound.append(elem.bound_frame_r)\n                    self.sizes[v[0]] = {'width': round(elem.bound_frame_r.Width), 'height': round(elem.bound_frame_r.Height)}\n\n            except TypeError:\n                elem = self.args_test(key, value)\n\n                self.panels.append(elem)\n                self.data.append(elem.all_elems)\n\n                self.bound.append(elem.bound_frame_r)\n\n\n    def args_test(self, key, value, n=None):\n\n        try:\n            cog_type = self.cog_type[n]\n        except TypeError:\n            cog_type = self.cog_type\n\n        if key == 'P-0':\n            p_r = Panel(value, 0, cog_type, 'P-0')\n            p_r.niche.cg = self.cog\n            p_r.niche.generate_cogs()\n\n            r = FramePanel(p_r, FramePanel.p_niche)\n            return r\n\n        elif key == 'P-1':\n            p_l = Panel(value, 1, cog_type, 'P-1')\n            p_l.niche.cg = self.cog\n            p_l.niche.generate_cogs()\n\n            r = FramePanel(p_l, FramePanel.p_niche)\n            return r\n\n        elif key == 'N-4':\n            r = Ribs(value)\n            return r\n\n        elif key == 'N-1':\n            n_r = NicheSide(value, 1)\n            r = FramePanel(n_r, FramePanel.n_niche)\n            return r\n\n        elif key == 'N-3':\n            n_l = NicheSide(value, 0)\n            r = FramePanel(n_l, FramePanel.n_niche)\n            return r\n\n        else:\n            pass\n\n\n\nclass MarkerDict:\n    def __init__(self, input_dict):\n        self.__dict__.update(input_dict)\n\n    def GetString(self):\n        return self.__dict__.__str__()\n\n\n#packs = []\npack_unrolls = []\n\n\nimport ghpythonlib.treehelpers as th\n\n\na = UnrollPack(x, y, circle, unroll_elems.__dict__)\n\nprint(a.panels)\npacks = th.list_to_tree(a.panels)\ngeom = th.list_to_tree(a.data)\nbound = a.bound\n\njson_object = json.dumps(a.sizes, indent=3)\n\nwith open('/Users/sofyadobycina/Documents/GitHub/mmodel/panels_gh/for_stats/niche_sizes.json', 'w') as out_file:\n    out_file.write(json_object)\n\n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}