{
  "source_url": "https://github.com/Ennead-Architects-LLP/EA_Dist/blob/635520d89b8308b78eabf5b60bb80121d0fa3838/Apps/lib/EnneadTab/RHINO/_RHINO_FORMS_NOTIFICATION.py",
  "repo": "Ennead-Architects-LLP/EA_Dist",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "Apps/lib/EnneadTab/RHINO/_RHINO_FORMS_NOTIFICATION.py",
  "instruction": "Rhino forms notification",
  "code": "import os\r\nimport sys\r\nroot_folder = os.path.abspath((os.path.dirname(os.path.dirname(os.path.abspath(__file__)))))\r\nsys.path.append(root_folder)\r\nimport ENVIRONMENT\r\n\r\nif ENVIRONMENT.IS_RHINO_ENVIRONMENT:\r\n    import Rhino # pyright: ignore\r\n    import System # pyright: ignore\r\n\r\n    import rhinoscriptsyntax as rs\r\n\r\n    import Eto # pyright: ignore\r\n\r\n\r\n    import scriptcontext as sc\r\n    REF_CLASS = Eto.Forms.Dialog[bool]\r\nelse:\r\n    REF_CLASS = object   \r\n\r\n\r\nimport os\r\nimport fnmatch\r\n\r\nimport itertools\r\nflatten = itertools.chain.from_iterable\r\ngraft = itertools.combinations\r\ntry:\r\n    import RHINO_UI\r\nexcept:\r\n    pass\r\n\r\n\r\n# make modal dialog\r\nclass NotificationDialog(REF_CLASS):\r\n    # Initializer\r\n    def __init__(self, title, main_text,  sub_text,  self_destruct, button_name , width, height):\r\n        # Eto initials\r\n        self.Title = title\r\n        self.Resizable = True\r\n        self.Padding = Eto.Drawing.Padding(5)\r\n        self.Spacing = Eto.Drawing.Size(5, 5)\r\n        # \r\n        #self.Bounds = Eto.Drawing.Rectangle()\r\n        self.height = height\r\n        self.width = width\r\n        self.self_destruct = self_destruct\r\n        self.main_text = main_text\r\n        self.sub_text = sub_text\r\n        self.Button_Name = button_name\r\n\r\n\r\n\r\n\r\n        # initialize layout\r\n        layout = Eto.Forms.DynamicLayout()\r\n        layout.Padding = Eto.Drawing.Padding(5)\r\n        layout.Spacing = Eto.Drawing.Size(5, 5)\r\n\r\n        layout.AddSeparateRow(None, self.CreateLogoImage())\r\n\r\n        # add message\r\n        layout.BeginVertical()\r\n        layout.AddRow(self.CreateMainTextBar())\r\n        layout.EndVertical()\r\n\r\n        layout.BeginVertical()\r\n        layout.AddRow(self.CreateMessageBar())\r\n        layout.EndVertical()\r\n\r\n\r\n\r\n        # add buttons\r\n        layout.BeginVertical()\r\n        layout.AddSpace()\r\n        layout.AddRow(*self.CreateButtons())\r\n        layout.EndVertical()\r\n\r\n        layout.Width = self.width\r\n        layout.Height = self.height\r\n\r\n        # set content\r\n        self.Content = layout\r\n        \r\n        \r\n        RHINO_UI.apply_dark_style(self)\r\n        return\r\n    \r\n    \r\n        if self.self_destruct:\r\n            self.count_down(self.self_destruct)\r\n\r\n\r\n    def count_down(self, life_span):\r\n        import time\r\n        for i in range(int(life_span)):\r\n            time.sleep(i )\r\n            print (int(life_span) - i)\r\n\r\n\r\n\r\n    def CreateLogoImage(self):\r\n        self.logo = Eto.Forms.ImageView()\r\n        return self.logo\r\n\r\n    def CreateMainTextBar(self):\r\n        self.main_msg = Eto.Forms.Label()\r\n        self.main_msg.Text = self.main_text\r\n        self.main_msg.Font = Eto.Drawing.Font(\"Arial\", 20)\r\n        return self.main_msg\r\n\r\n    # create message bar function\r\n    def CreateMessageBar(self):\r\n        self.msg = Eto.Forms.Label()\r\n        self.msg.Text = self.sub_text\r\n        self.msg.Font = Eto.Drawing.Font(\"Arial\", 12)\r\n        return self.msg\r\n        #self.msg.HorizontalAlignment = Eto.Forms.HorizontalAlignment.Left\r\n\r\n\r\n\r\n\r\n    def CreateButtons(self):\r\n        \"\"\"\r\n        Creates buttons for either print the selection result\r\n        or exiting the dialog\r\n        \"\"\"\r\n        user_buttons = []\r\n\r\n        self.btn_Run = Eto.Forms.Button()\r\n        self.btn_Run.Text = self.Button_Name\r\n        self.btn_Run.Click += self.btn_Run_Clicked\r\n        user_buttons.append(self.btn_Run)\r\n\r\n        self.btn_Cancel = Eto.Forms.Button()\r\n        self.btn_Cancel.Text = \"Cancel\"\r\n        self.btn_Cancel.Click += self.btn_Cancel_Clicked\r\n        return user_buttons\r\n\r\n\r\n        user_buttons.extend([ None, self.btn_Cancel])\r\n        return user_buttons\r\n\r\n\r\n\r\n\r\n    # function to run when call at button click\r\n    def RunScript(self):\r\n        # return selected items\r\n        print (\"Something important\")\r\n\r\n\r\n\r\n\r\n    # event handler handling clicking on the 'run' button\r\n    def btn_Run_Clicked(self, sender, e):\r\n        # close window after double click action. Otherwise, run with error\r\n        self.Close(True)\r\n        self.RunScript()\r\n\r\n\r\n    # event handler handling clicking on the 'cancel' button\r\n    def btn_Cancel_Clicked(self, sender, e):\r\n        self.Close(False)\r\n\r\n\r\n\r\ndef show_NotificationDialog(title = ENVIRONMENT.PLUGIN_NAME,\r\n                            main_text = \"\",\r\n                            sub_text = \"\",\r\n                            self_destruct = None,\r\n                            button_name = \"Sure...\",\r\n                            width = 500,\r\n                            height = 150):\r\n\r\n\r\n\r\n    dlg = NotificationDialog(title, main_text, sub_text, self_destruct, button_name, width, height)\r\n    rc = Rhino.UI.EtoExtensions.ShowSemiModal(dlg, Rhino.RhinoDoc.ActiveDoc, Rhino.UI.RhinoEtoApp.MainWindow)\r\n\r\n    if (rc):\r\n\r\n\r\n\r\n        print (\"User clicked primary button\")\r\n        return True\r\n\r\n    else:\r\n        print (\"Dialog did not run\")\r\n        return None\r\n\r\n\r\n\r\n\r\n\r\n",
  "language": "python",
  "imports": [
    "Rhino",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}