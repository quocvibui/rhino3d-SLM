{
  "source_url": "https://github.com/TheoArchi/EsquisSons/blob/00d1b02f7ce3e190b5c4c3429d3e84756c29bfdb/WIP_ESQUISSONS%20PYTHON%20FILES/Listener_Point.py",
  "repo": "TheoArchi/EsquisSons",
  "repo_stars": 3,
  "repo_description": "Esquissons is a grasshopper plugin which help you to design with sound ;)",
  "license": "NOASSERTION",
  "filepath": "WIP_ESQUISSONS PYTHON FILES/Listener_Point.py",
  "instruction": "EsquisSons Listener is used to declare the listening point.\r\nDefine its position, orientation and size :)\r\n-\r\nAAU / Theo Marchal / BETA VERSION / AVRIL2020\r\nWith the Contribution of Manon COUTIER &...",
  "code": "\"\"\"EsquisSons Listener is used to declare the listening point.\r\nDefine its position, orientation and size :)\r\n-\r\nAAU / Theo Marchal / BETA VERSION / AVRIL2020\r\nWith the Contribution of Manon COUTIER & Domitille GRANDJEAN\"\"\"\r\n\r\nfrom ghpythonlib.componentbase import executingcomponent as component\r\nimport Grasshopper, GhPython\r\nimport System\r\nimport Rhino\r\nimport rhinoscriptsyntax as rs\r\n\r\n\r\nclass ListenerPoint(component):\r\n\r\n    def RunScript(self, _listener_location, _listener_direction, _listener_height):\r\n\r\n        # block init\r\n        __author__ = \"theomarchal\"\r\n        self.Params.Input[0].Description = \"Location of the listener foots [as a point] (default = (0,0,0))\"\r\n        self.Params.Input[1].Description = \"Direction of the listener [in degrees from 0 to 360]\"\r\n        self.Params.Input[2].Description = \"How tall is the listener (default = 1.80)\"\r\n        self.Params.Output[0].Description = \"Listener geometry, size and direction\"\r\n        self.Params.Output[1].Description = \"Listener object (plug it into EsquisSons MainEngine)\"\r\n        self.Name = \"Listener Point\"\r\n        self.NickName = \"Listener\"\r\n        self.Message = \"EsquisSons V3\"\r\n        self.Category = \"EsquisSons\"\r\n        self.SubCategory = \"1/ Scene\"\r\n\r\n        # set default values\r\n        if _listener_location is None:\r\n            _listener_location = rs.AddPoint(0, 0, 0)\r\n        if _listener_direction is None:\r\n            _listener_direction = 0\r\n        if _listener_height is None:\r\n            _listener_height = 1.8\r\n\r\n        # creation of a listener (as a list of list)\r\n\r\n        # - height_trans_matrix : matrix transfering a vector or a point along the z-axis with a lenght of _listener_height\r\n        height_trans_matrix = rs.XformTranslation((0, 0, _listener_height))\r\n\r\n        # - listener_head : point representing the head of the listener\r\n        listener_head = rs.PointTransform(_listener_location, height_trans_matrix)\r\n\r\n        # creation of three vectors :\r\n        # - direction_vect : listening direction vector\r\n        # - left_vect : vector orthogonal to direction_vect, on the left\r\n        # - right_vect : vector orthogonal to direction_vect, on the right\r\n        direction_vect = rs.VectorRotate([0, (_listener_height), 0], _listener_direction, [0, 0, 1])\r\n        left_vect = rs.VectorScale((rs.VectorRotate(direction_vect, 90, [0, 0, 1])), 0.5)\r\n        right_vect = rs.VectorScale((rs.VectorRotate(direction_vect, -90, [0, 0, 1])), 0.5)\r\n\r\n        # creation of a triangle/arrow pointing toward the listener_direction\r\n        # - triangle_peak : point at the end of direction_vect\r\n        # - triangle_left : point at the end of left_vect\r\n        # - triangle_right : point at the end of right_vect\r\n        # - triangle_list : list of the three points of the triangle\r\n        triangle_peak = rs.PointTransform(_listener_location, (rs.XformTranslation(direction_vect)))\r\n        triangle_left = rs.PointTransform(_listener_location, (rs.XformTranslation(left_vect)))\r\n        triangle_right = rs.PointTransform(_listener_location, (rs.XformTranslation(right_vect)))\r\n        triangle_list = [triangle_peak, triangle_left, triangle_right]\r\n\r\n        # - listener_preview : creates a Rhinoceros listener with a sphere for the head,\r\n        # - a line for the body and an arrow for the listening direction\r\n        listener_preview = [rs.AddSphere(listener_head, (_listener_height / 10)),\r\n                            rs.AddLine(_listener_location, listener_head), rs.AddSrfPt(triangle_list)]\r\n\r\n        # transfer triangle_left and triangle_right to the listener_height\r\n        triangle_left = rs.PointTransform(triangle_left, height_trans_matrix)\r\n        triangle_right = rs.PointTransform(triangle_right, height_trans_matrix)\r\n\r\n        listener_point = [listener_head, triangle_left, triangle_right, _listener_height]\r\n        listener = [listener_point]\r\n\r\n        return (listener_preview, listener)\r\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}