{
  "source_url": "https://github.com/TfedUD/Gh-2-eQ/blob/f8d0d681aca03b406fced8bb50abb70f2fd42b69/eQuestRhino/_Archives/eQRHGH/surfaces.py",
  "repo": "TfedUD/Gh-2-eQ",
  "repo_stars": 0,
  "repo_description": "initial eQuest model generation project to be developed with further interoperability",
  "license": "GPL-3.0",
  "filepath": "eQuestRhino/_Archives/eQRHGH/surfaces.py",
  "instruction": "Surfaces",
  "code": "import System\nimport helpers\nimport rhinoscriptsyntax as rs\nimport Grasshopper.Kernel as ghk\nimport Rhino\nimport math\nimport ghpythonlib.treehelpers as th\nfrom collections import namedtuple\n\nclass Temp_surface:\n    \"\"\"temp holder for srfc stuff\"\"\"\n\n    def __init__(self, _geom=None, _params=None):\n        self.geom = _geom\n        self.params = _params\n    \n    def __iter__(self):\n        return (i for i in (self.geom, self.params))\n\nclass eQ_surface:\n    \"\"\" A WIP class to get all the data for making eQuest *.inp files\n    Args:\n        _srfc: <Surface> A single 'Surface' obj with .geom and .params\n        _unknown: somthing probably in the future for space activity type ect.\n        _ghenv: The Gh 'ghenv' obj from the scene\n    Properties:\n        * geometry\n        * name\n        * verts \n    \"\"\"\n    def __init__(self, _srfc, _ghenv):\n        self.geometry = _srfc.geom\n        self.params = _srfc.params\n        self._warn_no_name(_ghenv)\n        \n\n    def _warn_no_name(self, _ghenv):\n        nm = self.params.get('Object Name', None)\n        if nm is None or nm == 'None':\n            warning = \"AAAHHHHH line 39\"\n            _ghenv.Component.AddRuntimeMessage(ghk.GH_RuntimeMessageLevel.Remark, warning)\n    \n            \n\n    @property\n    def name(self):\n        ud_val = self.params.get('Object Name', 'No Name')\n        return ud_val\n\n    @property\n    def act(self):\n        ud_val = self.params.get('Object Activ_Disc', None)\n        return ud_val\n       \n           \n\n\ndef get_input_geom(_input_list, _ghenv):\n    \"\"\" Gets geom and guid from whatever objects are input as the '_srfcs' \"\"\"\n\n    _input_num = 0\n    output = []\n    Geom = namedtuple('Geom', ['geom', 'guid'])\n\n    for i, input_obj in enumerate(_input_list):\n        if not input_obj:\n            continue\n\n        input_guid = _ghenv.Component.Params.Input[_input_num].VolatileData[0][i].ReferenceID\n        rh_obj = Rhino.RhinoDoc.ActiveDoc.Objects.Find( input_guid )\n\n        if rh_obj:\n\n            geom = rs.coercegeometry(rh_obj)\n            try:\n                for srfc in geom.Surfaces:\n                    output.append(Geom(srfc, input_guid))\n            except AttributeError as e:\n                output.append(Geom(geom, input_guid))\n        else:\n            try:\n                for srfc in input_obj.Surfaces:\n                    output.append(Geom(srfc,None))\n            except AttributeError as e:\n                output.append(Geom(input_obj, None))\n    return output\n\ndef get_rh_srfc_params(_input_geom, _ghenv, _ghdoc):\n    \"\"\" Pulls geom and UserText params from the Rhino scene.\n    \n    Args:\n        _srfc_GUIDs: <list: Guid:> A list of the surface GUID numbers.\n        _ghenv: The <ghenv> object from Grasshopper component calling this function\n        _ghdoc: The <ghDoc> object from Grasshopper component calling this function\n    Returns: \n        surfaces: A list of surface objects. Each object has a .geom and a .param property\n    \"\"\"\n    surfaces = []\n\n    for item in _input_geom:\n\n        srfc_user_text = _get_surface_rh_userText(item.guid, _ghenv, _ghdoc)\n\n        new_srfc_obj = Temp_surface(item.geom, srfc_user_text)\n        surfaces.append(new_srfc_obj)\n    \n    return surfaces\n\n\n\n\n\ndef _get_surface_rh_userText(_srfc_GUID, _ghdoc, _ghenv):\n    \"\"\" Takes in an objects GUID and returns the full dictionary of\n    Attribute UserText Key and Value pairs. Cleans up a bit as well.\n    \n    Args:\n        _GUID: <Guid> the Rhino GUID of the surface object to try and read from\n        _ghdoc: The Grasshopper Component 'ghdoc' object\n        _ghenv: The Grasshopper Component 'ghenv' object\n    Returns:\n        output_dict: a dictionary object with all the keys / values found in the Object's UserText\n    \"\"\"\n    output_dict = {}\n\n    if not _srfc_GUID:\n        return output_dict\n    \n    if _srfc_GUID.GetType() != System.Guid:\n        remark = \"Unable to get the stuff dude set _srfc input type hint to guid\"\n        _ghenv.Component.AddRuntimeMessage(ghk.GH_RuntimeMessageLevel.Remark, remark)\n        return output_dict\n    \n    with helpers.context_rh_doc(_ghdoc):\n        output_dict['Object Name'] = rs.ObjectName(_srfc_GUID)\n\n        for eachKey in rs.GetUserText(_srfc_GUID):\n            if 'Object Name' not in eachKey:\n                val = rs.GetUserText(_srfc_GUID, eachKey)\n                if val != 'None':\n                    output_dict[eachKey] = val\n                else:\n                    output_dict[eachKey] = None\n\n    return output_dict\n\n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": false
}