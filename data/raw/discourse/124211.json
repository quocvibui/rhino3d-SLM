{
  "source_url": "https://discourse.mcneel.com/t/mesh-curvature-pythonscript-code-to-net/124211",
  "topic_id": 124211,
  "title": "Mesh curvature Pythonscript code to .net",
  "question": "Hi,\n\n\nI have a Pythonscript file , here is the code.\n\n\ndef CurvaM0(topvertex,connection):\n    type=Rhino.Geometry.Point3d\n    Kmax=[]\n    Kmin=[]\n    t=0\n    for i in connection:\n        points=[]\n        for j in i:\n            points.append(topvertex[j])\n        pts=Converts(points,type)\n        pt=Convert(topvertex[t],type)\n        ind=topvertex.MeshVertexIndices(t)\n        nn=mesh.Normals[ind[0]]\n        nor=Rhino.Geometry.Point3d(nn.X+pt.X, nn.Y+pt.Y, nn.Z+pt.Z)\n        K=Curvature0(pts,pt,nor)\n        K.sort()\n        Kmax.append(K[1])\n        Kmin.append(K[0])\n        t=t+1\n    return Kmax,Kmin\n\n\n\n topvertex  ---- MeshTopologyVertexList\n connection ---- List(Of List(Of Integer))\n nn              ---- Vector3d\n nor             ---- Point3d\n pt               ---- Point3d\n\n\n\nThe result calculated based on the pythonscript code below is weird .\n\n\nnor=Rhino.Geometry.Point3d(nn.X+pt.X, nn.Y+pt.Y, nn.Z+pt.Z)\n\n\n\nwhen I pass data into the code, for instance,\n\n\nnn.X+pt.X= -0.9816897-35.1987609863281=-36.1804506778717 \nnn.Y+pt.Y= -0.0908464226052352-16.2358417510986=-16.2305486575\nnn.Z+pt.Z= 0.995861129123327+0.114346027374268=0.304759517312\n\n\n\nbut the result of nor based on the pythonscript actually is\n\n\nnor.x=-0.00273924704027273\nnor.y=-0.0908464226052352\nnor.z=0.995861129123327\n\n\n\nIâ€™m confused about the results, any advice?\n\n\nBR\n\n\nKalvin",
  "code_blocks": [
    {
      "code": "def CurvaM0(topvertex,connection):\n    type=Rhino.Geometry.Point3d\n    Kmax=[]\n    Kmin=[]\n    t=0\n    for i in connection:\n        points=[]\n        for j in i:\n            points.append(topvertex[j])\n        pts=Converts(points,type)\n        pt=Convert(topvertex[t],type)\n        ind=topvertex.MeshVertexIndices(t)\n        nn=mesh.Normals[ind[0]]\n        nor=Rhino.Geometry.Point3d(nn.X+pt.X, nn.Y+pt.Y, nn.Z+pt.Z)\n        K=Curvature0(pts,pt,nor)\n        K.sort()\n        Kmax.append(K[1])\n        Kmin.append(K[0])\n        t=t+1\n    return Kmax,Kmin",
      "language": "python",
      "author": "hearts_j",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "geometry",
    "mesh",
    "python",
    "rhinocommon"
  ],
  "has_accepted_answer": false,
  "category_id": 3,
  "posts_count": 3,
  "views": 329
}