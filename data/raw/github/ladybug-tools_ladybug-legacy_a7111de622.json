{
  "source_url": "https://github.com/ladybug-tools/ladybug-legacy/blob/d90db02f2776febbb38100dea26ec0c93e77aa53/src/Ladybug_Branch%20Data.py",
  "repo": "ladybug-tools/ladybug-legacy",
  "repo_stars": 202,
  "repo_description": ":beetle: Ladybug is an environmental plugin for Grasshopper.",
  "license": "NOASSERTION",
  "filepath": "src/Ladybug_Branch Data.py",
  "instruction": "Use this component to convert any list of annual data into a data tree branched by day of the year, month of the year, or hour of the day. If the data is not 8760 value sof each hour, the number of...",
  "code": "#\n# Ladybug: A Plugin for Environmental Analysis (GPL) started by Mostapha Sadeghipour Roudsari\n# \n# This file is part of Ladybug.\n# \n# Copyright (c) 2013-2020, Mostapha Sadeghipour Roudsari <mostapha@ladybug.tools> \n# Ladybug is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# Ladybug is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# You should have received a copy of the GNU General Public License\n# along with Ladybug; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n\n\n\"\"\"\nUse this component to convert any list of annual data into a data tree branched by day of the year, month of the year, or hour of the day. If the data is not 8760 value sof each hour, the number of _data items should match number of items in HOY_.\n-\nProvided by Ladybug 0.0.69\n    \n    Args:\n        _data: A list of data to be branched for each month, day and hour.  Note that this can be either a list of 8760 values for each hour of the year, the output of the \"Import EPW\" component, or a custom list of data that is matched by the data in the HOY_ input.\n        HOY_: A list of numbers between 1 and 8760 that represents an hour of the year.\n    Returns:\n        dataEachDayOfYear: The input data that has been branched data for each day of the year. The paths of the branches are in the following format {month ; dayOfMonth}.\n        dataEachMonth: The input data that has been branched for each month of the year. Branch paths are from 0 to 11.\n        dataEachHourOfDay: The input data that has been branched for each hour of the day. Branches are from 0 to 23.\n\"\"\"\n\nghenv.Component.Name = \"Ladybug_Branch Data\"\nghenv.Component.NickName = 'branchDataDailyMonthlyHourly'\nghenv.Component.Message = 'VER 0.0.69\\nJUL_07_2020'\nghenv.Component.IconDisplayMode = ghenv.Component.IconDisplayMode.application\nghenv.Component.Category = \"LB-Legacy\"\nghenv.Component.SubCategory = \"1 | AnalyzeWeatherData\"\n#compatibleLBVersion = VER 0.0.59\\nFEB_01_2015\ntry: ghenv.Component.AdditionalHelpFromDocStrings = \"1\"\nexcept: pass\n\n\nimport scriptcontext as sc\nimport Grasshopper.Kernel as gh\nfrom System import Object\nfrom Grasshopper import DataTree\nfrom Grasshopper.Kernel.Data import GH_Path\n\n\ndef checkTheInputs(data, HOY, lb_preparation):\n    checkData = True\n    try:\n        if len(data) == len(HOY): pass\n        elif len(data) == 8760:\n            #We are pretty sure that the user just wants to branch annual hourly data so HOY is not required.\n            if HOY == []: HOY = range(1,8761)\n            else:\n                checkData = False\n                warning = \"Number of items in _data should match the number of hours.\"\n                w = gh.GH_RuntimeMessageLevel.Warning\n                ghenv.Component.AddRuntimeMessage(w, warning)\n        elif 'key:location/dataType/units/frequency/startsAt/endsAt' in data[0] and 'Hourly' in data[4]:\n            #The user just wants to branch epw data and we should pull the HOYs from the analysis period of the data.\n            if len(data) == 8767: HOY = range(1,8761)\n            else:\n                analysisPeriod = [data[5], data[6]]\n                HOY, months, days = lb_preparation.getHOYsBasedOnPeriod(analysisPeriod, 1)\n            data = data[7:]\n        else:\n            checkData = False\n            warning = \"The connected _data is not recognized as annual data. \\n Plug in values for HOY_ that correspond to input _data.\"\n            w = gh.GH_RuntimeMessageLevel.Warning\n            ghenv.Component.AddRuntimeMessage(w, warning)\n    except:\n        checkData = False\n        warning = \"The connected _data is not recognized as annual data. \\n Plug in values for HOY_ that correspond to input _data.\"\n        w = gh.GH_RuntimeMessageLevel.Warning\n        ghenv.Component.AddRuntimeMessage(w, warning)\n    \n    return checkData, data, HOY\n\ndef main(data, HOY, lb_preparation):\n    # prepare empty lists\n    dataEachDayOfYear = DataTree[Object]()\n    dataEachMonth = DataTree[Object]()\n    dataEachHourOfDay = DataTree[Object]()\n    #for day in range(365): dataEachDayOfYear.AddRange([], GH_Path(day))\n    for month in range(12): dataEachMonth.AddRange([], GH_Path(month))\n    for hour in range(24): dataEachHourOfDay.AddRange([], GH_Path(hour))\n    \n    for dd, hoy in zip(data, HOY):\n        d, m, t = lb_preparation.hour2Date(hoy, True)\n        dataEachDayOfYear.Add(dd, GH_Path(m,d-1))\n        dataEachMonth.Add(dd, GH_Path(m))\n        dataEachHourOfDay.Add(dd, GH_Path(t-1))\n            \n    return dataEachDayOfYear, dataEachMonth, dataEachHourOfDay\n\n\n# import the classes\nlb_preparation = []\ninitCheck = True\nif sc.sticky.has_key('ladybug_release'):\n    try:\n        if not sc.sticky['ladybug_release'].isCompatible(ghenv.Component): initCheck = False\n        if sc.sticky['ladybug_release'].isInputMissing(ghenv.Component): initCheck = False\n    except:\n        warning = \"You need a newer version of Ladybug to use this compoent.\" + \\\n        \"Use updateLadybug component to update userObjects.\\n\" + \\\n        \"If you have already updated userObjects drag Ladybug_Ladybug component \" + \\\n        \"into canvas and try again.\"\n        w = gh.GH_RuntimeMessageLevel.Warning\n        ghenv.Component.AddRuntimeMessage(w, warning)\n        initCheck = False\n    \n    lb_preparation = sc.sticky[\"ladybug_Preparation\"]()\nelse:\n    initCheck = False\n    print \"You should first let the Ladybug fly...\"\n    w = gh.GH_RuntimeMessageLevel.Warning\n    ghenv.Component.AddRuntimeMessage(w, \"You should first let the Ladybug fly...\")\n\n\nif len(_data) > 0 and initCheck == True:\n    checkData, data, HOY = checkTheInputs(_data, HOY_, lb_preparation)\n    if checkData:\n        result = main(data, HOY, lb_preparation)\n        if result!=-1: dataEachDayOfYear, dataEachMonth, dataEachHourOfDay = result\n",
  "language": "python",
  "imports": [
    "scriptcontext"
  ],
  "has_docstring": true
}