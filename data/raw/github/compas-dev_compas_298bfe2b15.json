{
  "source_url": "https://github.com/compas-dev/compas/blob/HEAD/src/compas_rhino/conduits/labels.py",
  "repo": "compas-dev/compas",
  "repo_stars": 352,
  "repo_description": "Main library of the COMPAS framework and CAD integrations for Rhino/GH and Blender.",
  "license": "MIT",
  "filepath": "src/compas_rhino/conduits/labels.py",
  "instruction": "Labels",
  "code": "from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport Rhino  # type: ignore\nimport System  # type: ignore\n\nfrom compas.data.validators import is_sequence_of_iterable\nfrom compas.itertools import iterable_like\n\nfrom .base import BaseConduit\n\n\nclass LabelsConduit(BaseConduit):\n    \"\"\"A Rhino display conduit for labels.\n\n    Parameters\n    ----------\n    labels : list[tuple[[float, float, float] | :class:`compas.geometry.Point`, str]]\n        A list of label tuples.\n        Each tuple contains a position and text for the label.\n    color : list[tuple[tuple[int, int, int], tuple[int, int, int]]], optional\n        The colors of the labels.\n        Each color is a tuple with a background color and a text color.\n        The default background color is :attr:`LabelsConduit.default_color`,\n        and the default text color is :attr:`LabelsConduit.default_textcolor`.\n\n    Attributes\n    ----------\n    color : list[tuple[System.Drawing.Color, System.Drawing.Color]]\n        A color specification per label.\n    labels : list[tuple[[float, float, float] | :class:`compas.geometry.Point`, str]]\n        A list of label tuples.\n        Each tuple contains a position and text for the label.\n\n    Class Attributes\n    ----------------\n    default_color : System.Drawing.Color\n        The default background color is ``FromArgb(0, 0, 0)``.\n    default_textcolor : System.Drawing.Color\n        The default text color is ``FromArgb(255, 255, 255)``.\n\n    Examples\n    --------\n    .. code-block:: python\n\n        from random import randint\n        from compas_rhino.conduits import LabelsConduit\n\n        labels = [([1.0 * randint(0, 100), 1.0 * randint(0, 100), 0.0], str(i)) for i in range(100)]\n\n        conduit = LabelsConduit(labels)\n\n        with conduit.enabled():\n            for i in range(100):\n                conduit.labels = [([1.0 * randint(0, 100), 1.0 * randint(0, 100), 0.0], str(i)) for i in range(100)]\n                conduit.redraw(pause=0.1)\n\n    \"\"\"\n\n    default_color = System.Drawing.Color.FromArgb(0, 0, 0)\n    default_textcolor = System.Drawing.Color.FromArgb(255, 255, 255)\n\n    def __init__(self, labels, color=None, **kwargs):\n        super(LabelsConduit, self).__init__(**kwargs)\n        self._color = None\n        self.labels = labels or []\n        self.color = color\n\n    @property\n    def color(self):\n        return self._colors\n\n    @color.setter\n    def color(self, color):\n        if not color:\n            return\n        if not is_sequence_of_iterable(color[0]):\n            # the first item in the list should be a tuple of colors\n            # if not, wrap the tuple\n            color = [color]\n        color = [\n            (System.Drawing.Color.FromArgb(*bg), System.Drawing.Color.FromArgb(*text))\n            for bg, text in iterable_like(self.labels, color, (self.default_color, self.default_textcolor))  # type: ignore\n        ]\n        self._color = color\n\n    def DrawForeground(self, e):\n        \"\"\"Draw the labels as text dots.\n\n        Parameters\n        ----------\n        e : Rhino.Display.DrawEventArgs\n\n        Returns\n        -------\n        None\n\n        \"\"\"\n        for i, (pos, text) in enumerate(self.labels):\n            if self.color:\n                color, textcolor = self.color[i]\n                e.Display.DrawDot(Rhino.Geometry.Point3d(*pos), text, color, textcolor)\n            else:\n                e.Display.DrawDot(Rhino.Geometry.Point3d(*pos), text, self.default_color, self.default_textcolor)\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": false
}