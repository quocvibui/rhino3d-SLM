{
  "source_url": "https://discourse.mcneel.com/t/adding-a-button-on-canvas-using-ghpython/119418",
  "topic_id": 119418,
  "title": "Adding a button on canvas using ghPython",
  "question": "How you can add a button on GH_canvas on your component with custom attributes\n\n\n    from ghpythonlib.componentbase import dotnetcompiledcomponent as component\n    import Grasshopper, GhPython\n    import System\n    from copy import deepcopy as Copy\n    import rhinoscriptsyntax as rs\n    from System.Windows.Forms import MessageBox\n    from System.Windows.Forms import MessageBoxButtons\n    class Attributes_Custom(Grasshopper.Kernel.Attributes.GH_ComponentAttributes): \n\n        def Layout(self): \n            super(Attributes_Custom, self).Layout() \n\n            rec0 = Grasshopper.Kernel.GH_Convert.ToRectangle(self.Bounds) \n            rec0.Height += 20\n\n            rec1 = Copy(rec0)\n            rec1.Y = rec1.Bottom - 20 \n            rec1.Height = 20 \n            rec1.Inflate(-2, -2)\n\n            self.Bounds = rec0\n            self.ButtonBounds=rec1\n\n        def Render(self,canvas, graphics, channel): \n            super(Attributes_Custom, self).Render(canvas, graphics, channel)\n            if channel == Grasshopper.GUI.Canvas.GH_CanvasChannel.Objects:\n             button = Grasshopper.GUI.Canvas.GH_Capsule.CreateTextCapsule(self.ButtonBounds, self.ButtonBounds, Grasshopper.GUI.Canvas.GH_Palette.Blue, \"Click Me\", 2, 0)\n                button.Render(graphics, self.Selected, self.Owner.Locked, False)\n                button.Dispose()\n\n        def RespondToMouseDown(self,sender,e):\n            if e.Button == System.Windows.Forms.MouseButtons.Left:\n                rec = self.ButtonBounds\n\n                if rec.Contains(e.CanvasLocation.X, e.CanvasLocation.Y):\n                    MessageBox.Show(\"The button was clicked\", \"Button\", MessageBoxButtons.OK)\n\n                    return Grasshopper.GUI.Canvas.GH_ObjectResponse.Handled\n\n                return  super(Attributes_Custom, self).RespondToMouseDown(sender,e)\n\n            else:\n                pass\n\n    class MyComponent(component):\n        def __new__(cls):\n            instance = Grasshopper.Kernel.GH_Component.__new__(cls...",
  "code_blocks": [
    {
      "code": "from ghpythonlib.componentbase import dotnetcompiledcomponent as component\n    import Grasshopper, GhPython\n    import System\n    from copy import deepcopy as Copy\n    import rhinoscriptsyntax as rs\n    from System.Windows.Forms import MessageBox\n    from System.Windows.Forms import MessageBoxButtons\n    class Attributes_Custom(Grasshopper.Kernel.Attributes.GH_ComponentAttributes): \n\n        def Layout(self): \n            super(Attributes_Custom, self).Layout() \n\n            rec0 = Grasshopper.Kernel.GH_Convert.ToRectangle(self.Bounds) \n            rec0.Height += 20\n\n            rec1 = Copy(rec0)\n            rec1.Y = rec1.Bottom - 20 \n            rec1.Height = 20 \n            rec1.Inflate(-2, -2)\n\n            self.Bounds = rec0\n            self.ButtonBounds=rec1\n\n        def Render(self,canvas, graphics, channel): \n            super(Attributes_Custom, self).Render(canvas, graphics, channel)\n            if channel == Grasshopper.GUI.Canvas.GH_CanvasChannel.Objects:\n             button = Grasshopper.GUI.Canvas.GH_Capsule.CreateTextCapsule(self.ButtonBounds, self.ButtonBounds, Grasshopper.GUI.Canvas.GH_Palette.Blue, \"Click Me\", 2, 0)\n                button.Render(graphics, self.Selected, self.Owner.Locked, False)\n                button.Dispose()\n\n        def RespondToMouseDown(self,sender,e):\n            if e.Button == System.Windows.Forms.MouseButtons.Left:\n                rec = self.ButtonBounds\n\n                if rec.Contains(e.CanvasLocation.X, e.CanvasLocation.Y):\n                    MessageBox.Show(\"The button was clicked\", \"Button\", MessageBoxButtons.OK)\n\n                    return Grasshopper.GUI.Canvas.GH_ObjectResponse.Handled\n\n                return  super(Attributes_Custom, self).RespondToMouseDown(sender,e)\n\n            else:\n                pass\n\n    class MyComponent(component):\n        def __new__(cls):\n            instance = Grasshopper.Kernel.GH_Component.__new__(cls,\n            \"NewComp\", \"NC\", \"\"\"example : adding a component with button\"\"\", \"Test\", \"buttonExample\")\n            return instance\n\n        def get_ComponentGuid(self):\n            return System.Guid(\"05c92e7f-f3bf-4c7e-a836-8d61e67cec2e\")\n\n        def SetUpParam(self, p, name, nickname, description):\n            p.Name = name\n            p.NickName = nickname\n            p.Description = description\n            p.Optional = True\n\n        def RegisterInputParams(self, pManager):\n            p = GhPython.Assemblies.MarshalParam()\n            self.SetUpParam(p, \"x\", \"x\", \"Script variable Python\")\n            p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n            self.Params.Input.Add(p)\n\n            p = GhPython.Assemblies.MarshalParam()\n            self.SetUpParam(p, \"y\", \"y\", \"Script input y.\")\n            p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n            self.Params.Input.Add(p)\n\n        def RegisterOutputParams(self, pManager):\n            p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n            self.SetUpParam(p, \"a\", \"a\", \"Script output a.\")\n            self.Params.Output.Add(p)\n\n        def SolveInstance(self, DA):\n            p0 = self.marshal.GetInput(DA, 0)\n            p1 = self.marshal.GetInput(DA, 1)\n            result = self.RunScript(p0, p1)\n            if result is not None:\n                self.marshal.SetOutput(result, DA, 0, True)\n\n        def get_Internal_Icon_24x24(self):\n            o = None\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\n\n        def CreateAttributes(self): # Override inherited method create attributes\n            self.m_attributes=Attributes_Custom(self) \n\n        def RunScript(self, x, y):\n\n            __author__ = \"Shubham Jain\"\n            __version__ = \"2021.02.25\"\n\n            a = \"Hi from Shubham\"\n            return a",
      "language": "python",
      "author": "shubhamjain107",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "grasshopper",
    "materials",
    "python",
    "rhinoscriptsyntax",
    "ui"
  ],
  "has_accepted_answer": false,
  "category_id": 8,
  "posts_count": 8,
  "views": 1461
}