{
  "source_url": "https://github.com/AdelResearchGroup/robotic_fabrication_w23/blob/3266bedbbdeb539e0ea643355507f7aeddcb1038/src/rhino/robotic_brick_assembly/brick.py",
  "repo": "AdelResearchGroup/robotic_fabrication_w23",
  "repo_stars": 0,
  "repo_description": "Course repository for W23 ARCH 509 Robotic Fabrication",
  "license": "MIT",
  "filepath": "src/rhino/robotic_brick_assembly/brick.py",
  "instruction": null,
  "code": "import rhinoscriptsyntax as rs\nimport Rhino.Geometry as rg\nimport scriptcontext as sc\n\n__author__ = 'Arash Adel'\n__email__ = '<aaadel@umich.edu>'\n__copyright__ = 'Copyright 2020, Arash Adel'\n\n\"\"\"\n**********************************************************************************\nBrick Class\n**********************************************************************************\n\"\"\"\n\n\nclass Brick(object):\n\n    def __init__(self, frame, dim, is_half_brick=False):\n        \"\"\"\n        A Brick with the following main attributes:\n        frame: rg.Plane\n        dim:  (length, width, height)\n        col, shape, material\n        \"\"\"\n        self.frame = frame\n        self.dim = dim\n        if not is_half_brick:\n            self.length = self.dim[0]\n        else:\n            self.length = self.dim[0]/2.0\n        self.width = self.dim[1]\n        self.height = self.dim[2]\n\n        # Half Dimensions\n        self.half_length = self.length / 2.0\n        self.half_width = self.width / 2.0\n        self.half_height = self.height / 2.0\n\n        # Corner point of the brick\n        self.points = []\n        # Brick Brep\n        self.shape = self.add_brick()\n\n    def __str__(self):\n        \"\"\"\n        Returns a message of the attributes of the brick.\n        \"\"\"\n        message = \"A brick with the following attributes: \"\n        cor_attr = \"Coordinate = {}\".format(tuple(self.frame.Origin))\n        dim_attr = \"dimensions = {}\".format(self.dim)\n        return message + cor_attr + \" and \" + dim_attr\n\n    def add_brick(self):\n        \"\"\"\n        Adds a Rhino box based on the center, orientation,\n        and the dimennsions of the brick.\n                pt_3------------------------pt_0\n                    |          ^y          |\n                    |          |           |\n                    |          cp--->x     |\n                    |                      |\n                    |                      |\n                pt_2------------------------pt_1\n        \"\"\"\n        # Center Point\n        cp = self.frame.Origin\n\n        # Translation Vectors\n        t_vec_x = rg.Vector3d.Multiply(self.frame.XAxis, self.half_length)\n        t_vec_y = rg.Vector3d.Multiply(self.frame.YAxis, self.half_width)\n        t_vec_z = rg.Vector3d.Multiply(self.frame.ZAxis, self.half_height)\n\n        # Translation vectors on the plane of the brick\n        t_vec_0 = rg.Vector3d.Add(t_vec_x, t_vec_y)\n        t_vec_1 = rg.Vector3d.Add(t_vec_x, -t_vec_y)\n        t_vec_2 = rg.Vector3d.Add(-t_vec_x, -t_vec_y)\n        t_vec_3 = rg.Vector3d.Add(-t_vec_x, t_vec_y)\n\n        # Corner points\n        # Negative z\n        pt_0 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_0, - t_vec_z))\n        pt_1 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_1, - t_vec_z))\n        pt_2 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_2, - t_vec_z))\n        pt_3 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_3, - t_vec_z))\n\n        # Positive z\n        pt_4 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_0, t_vec_z))\n        pt_5 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_1, t_vec_z))\n        pt_6 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_2, t_vec_z))\n        pt_7 = rg.Point3d.Add(cp, rg.Vector3d.Add(t_vec_3, t_vec_z))\n\n        # List of corner points\n        bott_points = [pt_0, pt_1, pt_2, pt_3]\n        top_points = [pt_4, pt_5, pt_6, pt_7]\n        self.points = bott_points + top_points\n\n        brick_brep = rg.Brep.CreateFromBox(self.points)\n        return brick_brep\n\n    def draw_brick(self):\n        \"\"\"\n        Adds the brep of the brick to the Rhino enviroment.\n        \"\"\"\n        self.shape_id = sc.doc.Objects.AddBrep(self.shape)\n\n    def set_col(self, new_col):\n        \"\"\"Setter for the new color.\n        \"\"\"\n        self.col = new_col\n        rs.ObjectColor(self.shape_id, self.col)\n\n    def set_material(self, material=None):\n        \"\"\"\n        Setter for the new material.\n        \"\"\"\n        if material is None:\n            self.material = self.col\n        else:\n            self.material = material\n        mat_index = rs.AddMaterialToObject(self.shape_id)\n        rs.MaterialColor(mat_index, self.material)\n\n    def check_collision(self, other):\n        \"\"\"Checks the collision with another brick\n        \"\"\"\n        bb_intersect = rg.Intersect.Intersection.BrepBrep(\n            self.shape, other.shape, 0.001)\n        return bb_intersect\n\n    def rotate_brick(self, rot_val):\n        \"\"\"Rotates the brick around its zaxis by the rot_val\n\n        Args:\n            rot_val (float): value in radians\n        \"\"\"\n        self.frame.Rotate(rot_val, self.frame.ZAxis, self.frame.Origin)\n        self.shape = self.add_brick()\n\n    def get_center_point(self):\n        \"\"\"Getter for the center point of the brick\n        \"\"\"\n        return self.frame.Origin\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}