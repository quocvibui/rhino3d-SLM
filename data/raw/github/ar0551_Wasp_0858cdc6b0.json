{
  "source_url": "https://github.com/ar0551/Wasp/blob/66f63c018f2420d37aa451ade0178de260946b0c/src/wasp/disco/constraints.py",
  "repo": "ar0551/Wasp",
  "repo_stars": 67,
  "repo_description": "Combinatorial Design with Grasshopper plug-in (LGPL) initiated by Andrea Rossi",
  "license": "LGPL-3.0",
  "filepath": "src/wasp/disco/constraints.py",
  "instruction": "(C) 2017-2021 Andrea Rossi <ghwasp@gmail.com>",
  "code": "\"\"\"\n(C) 2017-2021 Andrea Rossi <ghwasp@gmail.com>\n\nThis file is part of Wasp. https://github.com/ar0551/Wasp\n@license GPL-3.0 <https://www.gnu.org/licenses/gpl.html>\n\n@version 0.6.001\n\nDisCo geometric constraints classes\n\"\"\"\n\nfrom Rhino.Geometry import Point3d\n\n\n#################################################################### Point Constraint ####################################################################\nclass DisCoPointConstraint(object):\n\n\t## constructor\n\tdef __init__(self, _x, _y, _z):\n\t\tself.x = _x\n\t\tself.y = _y\n\t\tself.z = _z\n\n\n\t## override Rhino .ToString() method (display name of the class in Gh)\n\tdef ToString(self):\n\t\treturn \"DisCoPointConstraint [x: %.3f, y: %.3f, z: %.3f]\" % (self.x, self.y, self.z)\n\t\n\n\t## create class from data dictionary\n\t@classmethod\n\tdef from_data(cls, data):\n\t\treturn cls(data['x'], data['y'], data['z'])\n\t\n\n\t## return the data dictionary representing the class\n\tdef to_data(self):\n\t\tdata = {}\n\t\tdata['x'] = self.x\n\t\tdata['y'] = self.y\n\t\tdata['z'] = self.z\n\t\treturn data\n\t\n\t\n\t## create class from Rhino Point3d\n\t@classmethod\n\tdef from_point(cls, pt):\n\t\treturn cls(pt.X, pt.Y, pt.Z)\n\n\n#################################################################### Curve Constraint ####################################################################\nclass DisCoCurveConstraint(object):\n\n\t## constructor\n\tdef __init__(self, _pts):\n\t\tself.pts = _pts\n\n\n\t## override Rhino .ToString() method (display name of the class in Gh)\n\tdef ToString(self):\n\t\treturn \"DisCoCurveConstraint [count: %s]\" % (len(self.pts))\n\t\n\n\t## create class from data dictionary\n\t@classmethod\n\tdef from_data(cls, data):\n\t\tpts = []\n\t\tfor pt_data in data['controlPoints']:\n\t\t\tpt = Point3d(pt_data['x'], pt_data['y'], pt_data['z'])\n\t\t\tpts.append(pt)\n\t\treturn cls(pts)\n\t\n\n\t## return the data dictionary representing the class\n\tdef to_data(self):\n\t\tdata = {}\n\t\tpts_data = []\n\t\tfor pt in self.pts:\n\t\t\tpt_data = {'x': pt.X, 'y' : pt.Y, 'z': pt.Z}\n\t\t\tpts_data.append(pt_data)\n\t\tdata['controlPoints'] = pts_data\n\t\treturn data\n\t\n\t\n\t## create class from Rhino curve\n\t@classmethod\n\tdef from_curve(cls, crv, sample=None):\n\t\tif sample is None:\n\t\t\tsample = 0.1\n\t\tl = crv.GetLength()\n\t\tcount = max(int(l/sample), 1)\n\t\tcrv_params = crv.DivideByCount(count, True)\n\t\tpts = []\n\t\tfor p in crv_params:\n\t\t\tpts.append(crv.PointAt(p))\n\t\t\n\t\treturn cls(pts)\t\t   \n\n\n#################################################################### Box Constraint ####################################################################\nclass DisCoBoxConstraint(object):\n\n\t## constructor\n\tdef __init__(self, _min_x, _max_x, _min_y, _max_y, _min_z, _max_z):\n\t\tself.min_x = _min_x\n\t\tself.max_x = _max_x\n\t\tself.min_y = _min_y\n\t\tself.max_y = _max_y\n\t\tself.min_z = _min_z\n\t\tself.max_z = _max_z\n\n\n\t## override Rhino .ToString() method (display name of the class in Gh)\n\tdef ToString(self):\n\t\treturn \"DisCoBoxConstraint [min: %.2f, %.2f, %.2f, max: %.2f, %.2f, %.2f]\" % (self.min_x, self.min_y, self.min_z, self.max_x, self.max_y, self.max_z)\n\t\n\n\t## create class from data dictionary\n\t@classmethod\n\tdef from_data(cls, data):\n\t\tmin_x = data['minX']\n\t\tmax_x = data['maxX']\n\t\tmin_y = data['minY']\n\t\tmax_y = data['maxY']\n\t\tmin_z = data['minZ']\n\t\tmax_z = data['maxZ']\n\t\treturn cls(min_x, max_x, min_y, max_y, min_z, max_z)\n\t\n\n\t## return the data dictionary representing the class\n\tdef to_data(self):\n\t\tdata = {}\n\t\tdata['minX'] = self.min_x\n\t\tdata['maxX'] = self.max_x\n\t\tdata['minY'] = self.min_y\n\t\tdata['maxY'] = self.max_y\n\t\tdata['minZ'] = self.min_z\n\t\tdata['maxZ'] = self.max_z\n\t\treturn data\n\t\n\n\t## create class from Rhino box\n\t@classmethod\n\tdef from_bbox(cls, box):\n\t\treturn cls(box.Min.X, box.Max.X, box.Min.Y, box.Max.Y, box.Min.Z, box.Max.Z)",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}