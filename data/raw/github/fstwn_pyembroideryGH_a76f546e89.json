{
  "source_url": "https://github.com/fstwn/pyembroideryGH/blob/ee7fd47316b364962a69976b4168ce9fef2702cf/usrobj_src/pyembroideryGH_MergePattern.py",
  "repo": "fstwn/pyembroideryGH",
  "repo_stars": 11,
  "repo_description": "Set of UserObjects enabling Grasshopper to directly read, write and manipulate various kinds of embroidery formats. It is based on an IronPython-compatible fork of the original pyembroidery library.",
  "license": "MIT",
  "filepath": "usrobj_src/pyembroideryGH_MergePattern.py",
  "instruction": "Merges several embroidery patterns into a single pattern.\nIt accounts for some edge conditions but not all of them.",
  "code": "\"\"\"\nMerges several embroidery patterns into a single pattern.\nIt accounts for some edge conditions but not all of them.\n\nIf there is an end command on the current pattern, that is removed.\nIf the color ending the current pattern is equal to the color starting the\nnext those color blocks are merged.\nAny prepended thread change command to the merging pattern is suppressed.\n    Inputs:\n        Pattern: The list of patterns to be merged into one pattern.\n                 {list, EmbPattern}\n    Output:\n        Pattern: The merged pattern.\n                 {item/list/tree, EmbPattern}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 201030\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"MergePattern\"\nghenv.Component.NickName = \"MP\"\nghenv.Component.Category = \"pyembroideryGH\"\nghenv.Component.SubCategory = \"4 Utility\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import pyembroidery\nexcept ImportError:\n    errMsg = (\"The pyembroidery python module seems to be not correctly \" +\n              \"installed! Please make sure the module is in you search \" +\n              \"path, see README for instructions!.\")\n    raise ImportError(errMsg)\n\nclass MergePattern(component):\n\n    def RunScript(self, Patterns):\n        # initialize outputs\n        MergedPattern = Grasshopper.DataTree[object]()\n        \n        if Patterns:\n            for i, pat in enumerate(Patterns):\n                # check input data correctness\n                if isinstance(pat, pyembroidery.EmbPattern):\n                    # copy first pattern to the merged pattern\n                    if i == 0:\n                        MergedPattern = pat.copy()\n                    else:\n                        MergedPattern = MergedPattern + pat\n                else:\n                    rml = self.RuntimeMessageLevel.Warning\n                    errMsg = (\"Supplied pattern at branch {0}, index {1} is no \"\n                              \"valid instance of pyembroidery.EmbPattern! It was \"\n                              \"skipped during the merge!\")\n                    errMsg = errMsg.format(self.RunCount, i)\n                    self.AddRuntimeMessage(rml, errMsg)\n                    continue\n        else:\n            rml = self.RuntimeMessageLevel.Warning\n            errMsg = (\"Input Pattern failed to collect data!\")\n            self.AddRuntimeMessage(rml, errMsg)\n        \n        # return outputs if you have them; here I try it for you:\n        return MergedPattern\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}