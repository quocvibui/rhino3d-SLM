{
  "source_url": "https://github.com/compas-dev/compas/blob/HEAD/src/compas_rhino/geometry/brep/trim.py",
  "repo": "compas-dev/compas",
  "repo_stars": 352,
  "repo_description": "Main library of the COMPAS framework and CAD integrations for Rhino/GH and Blender.",
  "license": "MIT",
  "filepath": "src/compas_rhino/geometry/brep/trim.py",
  "instruction": null,
  "code": "from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport Rhino  # type: ignore\n\nfrom compas.geometry import BrepTrim\nfrom compas_rhino.geometry import RhinoNurbsCurve\n\nfrom .vertex import RhinoBrepVertex\n\n\nclass RhinoBrepTrim(BrepTrim):\n    \"\"\"Trims hold topological information about how the edges of a Brep face are are organized.\n\n    Attributes\n    ----------\n    curve : :class:`compas.geometry.NurbsCurve`, read_only\n        Returns the geometry for this trim as a 2d curve.\n    iso_status : literal(NONE|X|Y|West|South|East|North)\n        The isoparametric curve direction on the surface.\n    is_reversed : bool\n        True if this trim is reversed from its associated edge curve and False otherwise.\n    native_trim : :class:`Rhino.Geometry.BrepTrim`\n        The underlying Rhino BrepTrim object.\n    start_vertex : :class:`compas_rhino.geometry.RhinoBrepVertex`, read-only\n        The start vertex of this trim.\n    end_vertex : :class:`compas_rhino.geometry.RhinoBrepVertex`, read-only\n        The end vertex of this trim.\n    vertices : list[:class:`compas_rhino.geometry.RhinoBrepVertex`], read-only\n        The list of vertices which comprise this trim (start and end).\n\n    \"\"\"\n\n    def __init__(self, rhino_trim=None):\n        super(RhinoBrepTrim, self).__init__()\n        self._trim = None\n        self._curve = None\n        self._is_reversed = None\n        self._iso_type = None\n        self._start_vertex = None\n        self._end_vertex = None\n        if rhino_trim:\n            self.native_trim = rhino_trim\n\n    # ==============================================================================\n    # Data\n    # ==============================================================================\n\n    @property\n    def __data__(self):\n        return {\n            \"start_vertex\": self._trim.StartVertex.VertexIndex,\n            \"end_vertex\": self._trim.EndVertex.VertexIndex,\n            \"edge\": self._trim.Edge.EdgeIndex if self._trim.Edge else -1,  # singular trims have no associated edge\n            \"curve\": RhinoNurbsCurve.from_rhino(self._trim.TrimCurve.ToNurbsCurve()).__data__,\n            \"iso\": str(self._trim.IsoStatus),\n            \"is_reversed\": \"true\" if self._trim.IsReversed() else \"false\",\n        }\n\n    @classmethod\n    def __from_data__(cls, data, builder):\n        \"\"\"Construct an object of this type from the provided data.\n\n        Parameters\n        ----------\n        data : dict\n            The data dictionary.\n        builder : :class:`compas_rhino.geometry.BrepLoopBuilder`\n            The object reconstructing the current BrepLoop.\n\n        Returns\n        -------\n        :class:`compas.data.Data`\n            An instance of this object type if the data contained in the dict has the correct schema.\n\n        \"\"\"\n        instance = cls()\n        curve = RhinoNurbsCurve.__from_data__(data[\"curve\"]).rhino_curve\n        try:\n            iso_status = getattr(Rhino.Geometry.IsoStatus, data[\"iso\"])\n        except AttributeError:\n            # due to discrepancy in how IsoStatus.None looks like in Rhino7 vs Rhino8 (`IsoStatus.NONE`)\n            iso_status = Rhino.Geometry.IsoStatus.NONE\n        is_reversed = True if data[\"is_reversed\"] == \"true\" else False\n        instance.native_trim = builder.add_trim(curve, data[\"edge\"], is_reversed, iso_status, data[\"start_vertex\"])\n        return instance\n\n    # ==============================================================================\n    # Properties\n    # ==============================================================================\n\n    @property\n    def curve(self):\n        return self._curve\n\n    @property\n    def start_vertex(self):\n        return self._start_vertex\n\n    @property\n    def end_vertex(self):\n        return self._end_vertex\n\n    @property\n    def vertices(self):\n        return [self.start_vertex, self.end_vertex]\n\n    @property\n    def is_reverse(self):\n        return self._curve\n\n    @property\n    def iso_status(self):\n        return self._iso_type\n\n    @property\n    def native_trim(self):\n        return self._trim\n\n    @native_trim.setter\n    def native_trim(self, rhino_trim):\n        self._trim = rhino_trim\n        self._curve = RhinoNurbsCurve.from_rhino(rhino_trim.TrimCurve.ToNurbsCurve())\n        self._is_reversed = rhino_trim.IsReversed()\n        self._iso_type = int(rhino_trim.IsoStatus)\n        self._start_vertex = RhinoBrepVertex(rhino_trim.StartVertex)\n        self._end_vertex = RhinoBrepVertex(rhino_trim.EndVertex)\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": false
}