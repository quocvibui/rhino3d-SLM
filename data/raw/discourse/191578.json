{
  "source_url": "https://discourse.mcneel.com/t/python-code-looping-back-to-start-of-grasshopper-script-bug/191578",
  "topic_id": 191578,
  "title": "Python code looping back to start of grasshopper script BUG!",
  "question": "So as the title explains i have a weird bug with a Python script moving Rhino objects looping back to start of grasshopper script BUG!\n\n\nWeird in that ;\n\n\n\n\nif all objects are moved on various layers everything is fine,\n\n\nif one or more objects are moved on the same layer that are inside and outside the boundary everything is fine\n\n\nIf one or more objects on different layers are inside and or outside the boundary it breaks as it moved objects on the second layer the amount of times that the list length is so fails.\n\n\n\n\nI have looked into trying to add the Python code so after it has run it expires and doesn’t loop back to the start, but this had no effect and even using the buttons so it wasn’t automatically on didn’t fit the bug.\n\n\nNote black boxes are in the file for visual refence they won’t be final design\n\nRed Shift line is hard coded in the example to remove one of the variables to check, but this will also come from the script later.\n\n\nStart Positions\n619×591 4.99 KB\n\n\nPoints and shapes Moved\n662×572 7.88 KB\n\n\n\n\nAll Curves should be in the second box but the python script has looped around again and move the orange curves (on the second layer) in and out of the box until it reaches the end of the list.\n732×594 2.95 KB\n\n\nimage\n1916×862 197 KB\n\n\nPython Code\n\n\nimport scriptcontext as sc\nimport Rhino\nimport Grasshopper as gh\n\nif B:\n    sc.doc = Rhino.RhinoDoc.ActiveDoc\n    \n    for ID in IDS:\n        Obj = sc.doc.Objects.Find(ID)\n        xform = Rhino.Geometry.Transform.Translation(V)\n        sc.doc.Objects.Transform(Obj,xform,True)\n    \n    sc.doc = ghdoc\n\n\n\nFiles:\n\n\nMoving Rhino Object Bug.3dm\n (39.2 KB)\n\n\nMoving Rhino Object Bug.gh\n (17.3 KB)",
  "code_blocks": [
    {
      "code": "import scriptcontext as sc\nimport Rhino\nimport Grasshopper as gh\n\nif B:\n    sc.doc = Rhino.RhinoDoc.ActiveDoc\n    \n    for ID in IDS:\n        Obj = sc.doc.Objects.Find(ID)\n        xform = Rhino.Geometry.Transform.Translation(V)\n        sc.doc.Objects.Transform(Obj,xform,True)\n    \n    sc.doc = ghdoc",
      "language": "python",
      "author": "mattgaydon",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "grasshopper",
    "layers",
    "python",
    "rhinocommon",
    "transformation"
  ],
  "has_accepted_answer": false,
  "category_id": 2,
  "posts_count": 8,
  "views": 128
}