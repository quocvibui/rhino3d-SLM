{
  "source_url": "https://github.com/felipeharker/alexandria-lab/blob/1d3696f4b28ecc45579b5fbe5809a7e00699fa08/alexandria-application-files/alexandria-scripts/ghpython/geo_nest_sheets.py",
  "repo": "felipeharker/alexandria-lab",
  "repo_stars": 1,
  "repo_description": "a repo of documents, links, visual assets, drawings, videos, articles, etc. I find interesting. Brain dump, catch-all repo with limited structure. ",
  "license": "unknown",
  "filepath": "alexandria-application-files/alexandria-scripts/ghpython/geo_nest_sheets.py",
  "instruction": "GhPython Component: Sheet Utility (Nest-ready rectangular sheet)",
  "code": "# ALEXANDRIA IO SPEC (standardized)\n# Inputs:\n# - SheetWidth (GH: SheetX) | float | Full sheet width\n# - SheetHeight (GH: SheetY) | float | Full sheet height\n# - EdgeMargin (GH: EdgeMargin) | float | Inset keep-out margin\n# - SheetSpacing (GH: SheetSpacing) | float | Display spacing metadata\n# Outputs:\n# - SheetCurve (GH: SheetCurve) | Rhino.Geometry.Curve | Full sheet boundary\n# - UsableCurve (GH: UsableCurve) | Rhino.Geometry.Curve | Inset usable boundary\n# - SheetData (GH: SheetData) | dict | Structured sheet metadata\n\n\"\"\"GhPython Component: Sheet Utility (Nest-ready rectangular sheet)\n\nPurpose:\n- Build a single rectangular sheet curve in World XY.\n- Apply an edge margin (inset keep-out) so the nesting solver can pack inside the usable area.\n- Store sheet spacing metadata for downstream visual layout (handled by the nesting tool).\n- Output \"nest-ready\" sheet curves and a structured SheetData payload.\n\nInputs (Grasshopper):\n    SheetX        (float)  full sheet width (X)\n    SheetY        (float)  full sheet height (Y)\n    EdgeMargin    (float)  inset margin from all edges (keep-out), same units\n    SheetSpacing  (float)  spacing between displayed sheets (metadata only)\n\nOutputs:\n    SheetCurve    (Rhino.Geometry.Curve)   full sheet rectangle (World XY)\n    UsableCurve   (Rhino.Geometry.Curve)   usable (inset) rectangle (World XY)\n    SheetData     (dict)                   structured info for downstream nesting\n                                           (dims, margins, usable area, spacing)\n\"\"\"\n\nimport Rhino\nfrom Rhino.Geometry import Plane, Rectangle3d, Interval\n\n# -----------------------------\n# Inputs (defensive defaults)\n# -----------------------------\nsx = 0.0 if SheetX is None else float(SheetX)\nsy = 0.0 if SheetY is None else float(SheetY)\nedge = 0.0 if EdgeMargin is None else float(EdgeMargin)\ngap  = 0.0 if SheetSpacing is None else float(SheetSpacing)\n\nsx = max(0.0, sx)\nsy = max(0.0, sy)\nedge = max(0.0, edge)\ngap = max(0.0, gap)\n\n# -----------------------------\n# Initialize outputs\n# -----------------------------\nSheetCurve = None\nUsableCurve = None\nSheetData = {}\n\ntol = 1e-9\n\n# -----------------------------\n# Validate dimensions\n# -----------------------------\nif sx > tol and sy > tol:\n    usable_w = sx - 2.0 * edge\n    usable_h = sy - 2.0 * edge\n    has_usable = (usable_w > tol and usable_h > tol)\n\n    plane = Plane.WorldXY\n\n    # Full sheet rectangle\n    full_rect = Rectangle3d(\n        plane,\n        Interval(0.0, sx),\n        Interval(0.0, sy)\n    )\n    SheetCurve = full_rect.ToNurbsCurve()\n\n    # Usable (inset) rectangle\n    usable_rect = None\n    if has_usable:\n        usable_rect = Rectangle3d(\n            plane,\n            Interval(edge, sx - edge),\n            Interval(edge, sy - edge)\n        )\n        UsableCurve = usable_rect.ToNurbsCurve()\n\n    # Structured payload for nesting tool\n    SheetData = {\n        \"plane\": plane,\n        \"full_width\": sx,\n        \"full_height\": sy,\n        \"edge_margin\": edge,\n        \"sheet_spacing\": gap,\n        \"usable_width\": usable_w if has_usable else 0.0,\n        \"usable_height\": usable_h if has_usable else 0.0,\n        \"full_rect\": full_rect,\n        \"usable_rect\": usable_rect,\n        \"full_curve\": SheetCurve,\n        \"usable_curve\": UsableCurve\n    }\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}