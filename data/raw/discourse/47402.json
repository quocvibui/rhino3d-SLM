{
  "source_url": "https://discourse.mcneel.com/t/remembering-values-problem-with-undo/47402",
  "topic_id": 47402,
  "title": "Remembering values : problem with undo",
  "question": "I have a Python script which does some stuff and remembers which state it is in after doing the stuff.  I then use scriptcontext.sticky to remember what state the file is in.\n\nThe problem is if I undo the changes then Rhino doesnâ€™t undo the change in scriptcontext.sticky, so it thinks it is in the new state when it is really back in the old state.\n\nIs there a way to undo changes to scriptcontext or another undoable way to remember variables in a Python script?\n\n\nsample script:\n\n\nimport scriptcontext as sc\nimport rhinoscriptsyntax as rs\ndef statechange():\n    if sc.sticky.has_key(\"state\"):\n        state = sc.sticky[\"state\"]\n    else:\n        state = False\n    rs.MessageBox(\"changed state to \"+ str(state))\n    rs.AddPoint(0,0,0)\n    state = not state\n    sc.sticky[\"state\"] = state\nif __name__ == \"__main__\":\n    statechange()",
  "code_blocks": [
    {
      "code": "import scriptcontext as sc\nimport rhinoscriptsyntax as rs\ndef statechange():\n    if sc.sticky.has_key(\"state\"):\n        state = sc.sticky[\"state\"]\n    else:\n        state = False\n    rs.MessageBox(\"changed state to \"+ str(state))\n    rs.AddPoint(0,0,0)\n    state = not state\n    sc.sticky[\"state\"] = state\nif __name__ == \"__main__\":\n    statechange()",
      "language": "python",
      "author": "Graham_Knapp",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "python",
    "rhinoscriptsyntax",
    "ui"
  ],
  "has_accepted_answer": false,
  "category_id": 11,
  "posts_count": 5,
  "views": 1121
}