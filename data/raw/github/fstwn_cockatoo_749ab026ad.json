{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_InitializeWeftAndWarpEdges.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_InitializeWeftAndWarpEdges.py",
  "instruction": "Initialize preliminary 'weft' connections (edges) and first 'warp' connections\n(edges) for a given KnitNetwork.\n---\n[WARNING] The implementation used is research-level code and not optimized....",
  "code": "\"\"\"\nInitialize preliminary 'weft' connections (edges) and first 'warp' connections\n(edges) for a given KnitNetwork.\n---\n[WARNING] The implementation used is research-level code and not optimized. This\ncan lead to substantial computation time, depending on size of the mesh, stitch\nparameters and hardware of the machine!\n    Inputs:\n        Toggle: Set to True to activate the component.\n                {item, bool}\n        KnitNetwork: An initialized KnitNetwork.\n                     {item, KnitNetwork}\n        SplittingIndex: Optional splitting index for splitting the contours into\n                        two sets (left and right). If no value or -1 is\n                        supplied, the longest contour will be used.\n                        {item, integer}\n        ContinuousStart: If True, forces the first row of stitches to be\n                         continuous.\n                         Defaults to False.\n                         {item, bool}\n        ContinuousEnd: If True, forces the last row of stitchtes to be\n                       continuous.\n                       Defaults to False.\n                       {item, bool}\n        PropagateFromCenter: If True, will propagate left and right set of \n                             contours from the center contour defined by\n                             SplittingIndex ( < | > ). Otherwise, the\n                             propagation of the contours left to the center will\n                             start at the left boundary ( > | > ).\n                             Defaults to False.\n                             {item, bool}\n        Precise: If True, the more precise but slower DistanceTo() function will\n                 be used instead of DistanceToSquared().\n                 Defaults to False.\n                 {item, bool}\n    Output:\n        KnitNetwork: The KnitNetwork with preliminary 'weft' and 'warp' edges \n                     created.\n                     {item, KnitNetwork}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200705\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"InitializeWeftAndWarpEdges\"\nghenv.Component.NickName =\"IWAWE\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"06 KnitNetwork\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import cockatoo\nexcept ImportError:\n    errMsg = \"The Cockatoo python module seems to be not correctly \" + \\\n             \"installed! Please make sure the module is in you search \" + \\\n             \"path, see README for instructions!.\"\n    raise ImportError(errMsg)\n\nclass InitializeWeftAndWarpEdges(component):\n    \n    def RunScript(self, Toggle, KN, SplittingIndex=None, ContinuousStart=False, ContinuousEnd=False, PropagateFromCenter=False, Precise=False):\n        \n        if Toggle and KN:\n            # copy the input network to not mess with previous components\n            KN = cockatoo.KnitNetwork(KN)\n            \n            if SplittingIndex < 0:\n                SplittingIndex = None\n            \n            # initialize 'weft' edges between 'leaf' nodes\n            KN.initialize_leaf_connections()\n            \n            # create preliminary 'weft' connections on the copy of the network\n            KN.initialize_weft_edges(start_index=SplittingIndex,\n                                     propagate_from_center=PropagateFromCenter,\n                                     force_continuous_start=ContinuousStart,\n                                     force_continuous_end=ContinuousEnd,\n                                     max_connections=4,\n                                     least_connected=False,\n                                     precise=Precise,\n                                     verbose=False)\n            \n            # initialize first 'warp' connections\n            KN.initialize_warp_edges(contour_set=None,\n                                     verbose=False)\n            \n        elif not Toggle and KN:\n            return Grasshopper.DataTree[object]()\n        elif not KN:\n            rml = self.RuntimeMessageLevel.Warning\n            rMsg = \"No KnitNetwork input!\"\n            self.AddRuntimeMessage(rml, rMsg)\n            return Grasshopper.DataTree[object]()\n        else:\n            return Grasshopper.DataTree[object]()\n        \n        return KN",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}