{
  "source_url": "https://discourse.mcneel.com/t/ghpython-onclicked/140905",
  "topic_id": 140905,
  "title": "GHPython OnClicked",
  "question": "Hi All,\n\nI’m new GH.\n\nI’m trying to create a component by python. And take value from OnClicked.\n\nSo I set value k = 1 and output by a. But it’s warning “1. Solution exception:global name ‘k’ is not defined”.\n\nAny ideas ?\n\n\nfrom ghpythonlib.componentbase import executingcomponent as component\n\nimport Grasshopper, GhPython\n\nimport System\n\nimport Rhino\n\nimport rhinoscriptsyntax as rs\n\n\nclass MyComponent(component):\n\n\ndef AppendAdditionalComponentMenuItems(self, menu):\n    item = Grasshopper.Kernel.GH_Component.Menu_AppendGenericMenuItem(\n        menu, \"This is an Additonal Menu!!\", self.OnClicked, self.Icon_24x24, None, True, False);\n    item.ToolTipText = \"Additonal Menu\";\ndef OnClicked(self, obj, args):\n    try:\n        k = 1\n    except Exception, ex:\n        System.Windows.Forms.MessageBox.Show(str(ex))\ndef RunScript(self, x, y):\n    a = k\n    # return outputs if you have them; here I try it for you:\n    return a\n\n\n\n\n\nimage\n1917×1043 35.1 KB",
  "code_blocks": [
    {
      "code": "def AppendAdditionalComponentMenuItems(self, menu):\n    item = Grasshopper.Kernel.GH_Component.Menu_AppendGenericMenuItem(\n        menu, \"This is an Additonal Menu!!\", self.OnClicked, self.Icon_24x24, None, True, False);\n    item.ToolTipText = \"Additonal Menu\";\ndef OnClicked(self, obj, args):\n    try:\n        k = 1\n    except Exception, ex:\n        System.Windows.Forms.MessageBox.Show(str(ex))\ndef RunScript(self, x, y):\n    a = k\n    # return outputs if you have them; here I try it for you:\n    return a",
      "language": "python",
      "author": "Shank",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "grasshopper",
    "python",
    "rhinoscriptsyntax",
    "ui"
  ],
  "has_accepted_answer": false,
  "category_id": 11,
  "posts_count": 3,
  "views": 374
}