{
  "source_url": "https://github.com/dtbinh/T1_python-exercises/blob/f4710c3dc2ba8ddb3e3e9069ab8d65df674463ab/07_ur_online/shifted_frames_setup/compas/src/compas_rhino/geometry/mesh.py",
  "repo": "dtbinh/T1_python-exercises",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "07_ur_online/shifted_frames_setup/compas/src/compas_rhino/geometry/mesh.py",
  "instruction": null,
  "code": "try:\n    from System.Collections.Generic import List\n\n    import Rhino\n    import rhinoscriptsyntax as rs\n    import scriptcontext as sc\n\n    from Rhino.Geometry import Point3d\n\n    find_object = sc.doc.Objects.Find\n\nexcept ImportError:\n    import platform\n    if platform.python_implementation() == 'IronPython':\n        raise\n\n\n__author__     = ['Tom Van Mele', ]\n__copyright__  = 'Copyright 2014, BLOCK Research Group - ETH Zurich'\n__license__    = 'MIT'\n__email__      = 'vanmelet@ethz.ch'\n\n\nclass RhinoMesh(object):\n    \"\"\"\"\"\"\n\n    def __init__(self, guid):\n        self.guid = guid\n        self.mesh = find_object(self.guid)\n        self.geometry = self.mesh.Geometry\n        self.attributes = self.mesh.Attributes\n        self.otype = self.geometry.ObjectType\n\n    def get_vertex_coordinates(self):\n        return [map(float, vertex) for vertex in rs.MeshVertices(self.guid)]\n\n    def get_face_vertices(self):\n        return map(list, rs.MeshFaceVertices(self.guid))\n\n    def get_vertex_colors(self):\n        return map(list, rs.MeshVertexColors(self.guid))\n\n    def set_vertex_colors(self, colors):\n        return rs.MeshVertexColors(self.guid, colors)\n\n    def unset_vertex_colors(self):\n        return rs.MeshVertexColors(self.guid, None)\n\n    def get_vertices_and_faces(self):\n        vertices = [map(float, vertex) for vertex in rs.MeshVertices(self.guid)]\n        faces = map(list, rs.MeshFaceVertices(self.guid))\n        return vertices, faces\n\n    def get_border(self):\n        return rs.DuplicateMeshBorder(self.guid)\n\n    def get_vertex_index(self):\n        guid = self.guid\n\n        class CustomGetObject(Rhino.Input.Custom.GetObject):\n            def CustomGeometryFilter(self, rhino_object, geometry, component_index):\n                # return True if selection is on current mesh object (guid)\n                return guid == rhino_object.Id\n\n        go = CustomGetObject()\n        go.SetCommandPrompt('Select a vertex of the mesh.')\n        go.GeometryFilter = Rhino.DocObjects.ObjectType.MeshVertex\n        go.AcceptNothing(True)\n        if go.Get() != Rhino.Input.GetResult.Object:\n            return None\n        objref = go.Object(0)\n        if not objref:\n            return None\n        tvindex = objref.GeometryComponentIndex.Index\n        mesh    = sc.doc.Objects.Find(guid)\n        temp    = mesh.Geometry.TopologyVertices.MeshVertexIndices(tvindex)\n        vindex  = temp[0]\n        go.Dispose()\n        return vindex\n\n    def get_face_index(self):\n        guid = self.guid\n\n        class CustomGetObject(Rhino.Input.Custom.GetObject):\n            def CustomGeometryFilter(self, rhino_object, geometry, component_index):\n                # return True if selecion is on current mesh object (guid)\n                return guid == rhino_object.Id\n\n        go = CustomGetObject()\n        go.SetCommandPrompt('Select a face of the mesh.')\n        go.GeometryFilter = Rhino.DocObjects.ObjectType.MeshFace\n        go.AcceptNothing(True)\n        if go.Get() != Rhino.Input.GetResult.Object:\n            return None\n        objref = go.Object(0)\n        if not objref:\n            return None\n        findex = objref.GeometryComponentIndex.Index\n        go.Dispose()\n        return findex\n\n    # def get_edge_index(guid):\n    #     class CustomGetObject(Rhino.Input.Custom.GetObject):\n    #         def CustomGeometryFilter(self, rhino_object, geometry, component_index):\n    #             return guid == rhino_object.Id\n    #     go = CustomGetObject()\n    #     go.SetCommandPrompt('Select an edge of the mesh.')\n    #     go.GeometryFilter = Rhino.DocObjects.ObjectType.MeshEdge\n    #     go.AcceptNothing(True)\n    #     if go.Get() != Rhino.Input.GetResult.Object:\n    #         return None\n    #     objref = go.Object(0)\n    #     if not objref:\n    #         return None\n    #     eindex = objref.GeometryComponentIndex.Index\n    #     go.Dispose()\n    #     return eindex\n    #\n    # def get_vertex_indices(guid):\n    #     tvindices = rs.GetMeshVertices(guid, 'Select mesh vertices.')\n    #     if not tvindices:\n    #         return\n    #     mobj = sc.doc.Objects.Find(guid)\n    #     mgeo = mobj.Geometry\n    #     vindices = []\n    #     for tvindex in tvindices:\n    #         temp = mgeo.TopologyVertices.MeshVertexIndices(tvindex)\n    #         vindices.append(temp[0])\n    #     return vindices\n    #\n    # def get_face_indices(guid):\n    #     return rs.GetMeshFaces(guid, 'Select mesh faces.')\n    #\n    # def get_vertex_face_indices(guid):\n    #     vindex = get_mesh_vertex_index(guid)\n    #     if vindex is None:\n    #         return\n    #     mobj = sc.doc.Objects.Find(guid)\n    #     mgeo = mobj.Geometry\n    #     findices = mgeo.TopologyVertices.ConnectedFaces(vindex)\n    #     return findices\n    #\n    # def get_face_vertex_indices(guid):\n    #     findex = get_mesh_face_index(guid)\n    #     if findex is None:\n    #         return\n    #     mobj = sc.doc.Objects.Find(guid)\n    #     mgeo = mobj.Geometry\n    #     tvertices = mgeo.Faces.GetTopologicalVertices(findex)\n    #     vindices = []\n    #     for tvertex in tvertices:\n    #         temp = mgeo.TopologyVertices.MeshVertexIndices(tvertex)\n    #         vindices.append(temp[0])\n    #     return vindices\n    #\n    # def get_edge_vertex_indices(guid):\n    #     eindex = get_mesh_edge_index(guid)\n    #     if eindex is None:\n    #         return\n    #     mobj = sc.doc.Objects.Find(guid)\n    #     mgeo = mobj.Geometry\n    #     temp = mgeo.TopologyEdges.GetTopologyVertices(eindex)\n    #     tvindices = temp.I, temp.J\n    #     vindices = []\n    #     for tvindex in tvindices:\n    #         temp = mgeo.TopologyVertices.MeshVertexIndices(tvindex)\n    #         vindices.append(temp[0])\n    #     return vindices\n\n    # ==========================================================================\n    # geometric stuff\n    # ==========================================================================\n\n    def normal(self, point):\n        pass\n\n    def normals(self, points):\n        pass\n\n    def closest_point(self, point, maxdist=None):\n        maxdist = maxdist or 0.0\n        face, point = self.geometry.ClosestPoint(Point3d(*point), maxdist)\n        return list(point)\n\n    def closest_points(self, points, maxdist=None):\n        # points = List[Point3d](len(points))\n        # points = self.geometry.PullPointsToMesh()\n        return [self.closest_point(point, maxdist) for point in points]\n\n\n# ==============================================================================\n# Debugging\n# ==============================================================================\n\nif __name__ == '__main__':\n\n    pass\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}