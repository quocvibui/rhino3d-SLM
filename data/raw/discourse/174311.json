{
  "source_url": "https://discourse.mcneel.com/t/ghcanvasviewport/174311",
  "topic_id": 174311,
  "title": "GhCanvasViewport",
  "question": "Hello \n@stevebaer\n\nThanks for \nGhCanvasViewport\n\nI made a few changes to enable window dragging and added a views list. However, I encountered an issue when switching the view to Top, Right, or Front; using right-click resulted in rotation. How can I disable this rotation?\n\n\nAdditionally, I added a button to toggle the visibility of the window, but Iâ€™m having trouble figuring out how to implement it\n\n\nusing System;\nusing System.Drawing;\nusing Grasshopper.GUI.Canvas;\nusing Grasshopper.GUI;\nusing Grasshopper;\nusing System.Windows.Forms;\nusing Grasshopper.Kernel;\nusing System.Security.Cryptography;\n\nnamespace GhCanvasViewport\n{\n    public class GhCanvasViewportInfo : GH_AssemblyInfo\n    {\n        public static ToolStripButton showView = new ToolStripButton();\n        static CanvasViewport _canvasViewport;\n        public GhCanvasViewportInfo()\n        {\n            if (_canvasViewport == null)\n            {\n                _canvasViewport = new CanvasViewport();\n                _canvasViewport.AddToMenu();\n            }\n        }\n\n        public override string Name\n        {\n            get\n            {\n                return \"GhCanvasViewport\";\n            }\n        }\n        public override string Version\n        {\n            get\n            {\n                // use AssemblyInformationalVersion since this can be patched easily during CI builds\n                // to keep it in sync with the yak package version\n                return System.Diagnostics.FileVersionInfo.GetVersionInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).ProductVersion;\n            }\n        }\n        public override Bitmap Icon\n        {\n            get\n            {\n                //Return a 24x24 pixel bitmap to represent this GHA library.\n                return null;\n            }\n        }\n        public override string Description\n        {\n            get\n            {\n                //Return a short string describing the purpose of this GHA library.\n                retu...",
  "code_blocks": [
    {
      "code": "using System;\nusing System.Drawing;\nusing Grasshopper.GUI.Canvas;\nusing Grasshopper.GUI;\nusing Grasshopper;\nusing System.Windows.Forms;\nusing Grasshopper.Kernel;\nusing System.Security.Cryptography;\n\nnamespace GhCanvasViewport\n{\n    public class GhCanvasViewportInfo : GH_AssemblyInfo\n    {\n        public static ToolStripButton showView = new ToolStripButton();\n        static CanvasViewport _canvasViewport;\n        public GhCanvasViewportInfo()\n        {\n            if (_canvasViewport == null)\n            {\n                _canvasViewport = new CanvasViewport();\n                _canvasViewport.AddToMenu();\n            }\n        }\n\n        public override string Name\n        {\n            get\n            {\n                return \"GhCanvasViewport\";\n            }\n        }\n        public override string Version\n        {\n            get\n            {\n                // use AssemblyInformationalVersion since this can be patched easily during CI builds\n                // to keep it in sync with the yak package version\n                return System.Diagnostics.FileVersionInfo.GetVersionInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).ProductVersion;\n            }\n        }\n        public override Bitmap Icon\n        {\n            get\n            {\n                //Return a 24x24 pixel bitmap to represent this GHA library.\n                return null;\n            }\n        }\n        public override string Description\n        {\n            get\n            {\n                //Return a short string describing the purpose of this GHA library.\n                return \"\";\n            }\n        }\n        public override Guid Id\n        {\n            get\n            {\n                return new Guid(\"406bd915-c42a-4f97-8ce4-4934600b43ff\");\n            }\n        }\n\n        public override string AuthorName\n        {\n            get\n            {\n                //Return a string identifying you or your company.\n                return \"\";\n            }\n        }\n        public override string AuthorContact\n        {\n            get\n            {\n                //Return a string representing your preferred contact details.\n                return \"\";\n            }\n        }\n    }\n\n    public class DisableSolverPriority : GH_AssemblyPriority\n    {\n        public override GH_LoadingInstruction PriorityLoad()\n        {\n            Instances.CanvasCreated += Instances_CanvasCreated;\n            return GH_LoadingInstruction.Proceed;\n        }\n\n        private void Instances_CanvasCreated(GH_Canvas canvas)\n        {\n            Instances.CanvasCreated -= Instances_CanvasCreated;\n\n            GH_DocumentEditor editor = Instances.DocumentEditor;\n            if (editor == null)\n            {\n                Instances.ActiveCanvas.DocumentChanged += ActiveCanvas_DocumentChanged;\n                return;\n            }\n            AddViewoprtButton(editor);\n        }\n\n        private void ActiveCanvas_DocumentChanged(GH_Canvas sender, GH_CanvasDocumentChangedEventArgs e)\n        {\n            Instances.ActiveCanvas.DocumentChanged -= ActiveCanvas_DocumentChanged;\n\n            GH_DocumentEditor editor = Instances.DocumentEditor;\n            if (editor == null)\n            {\n                return;\n            }\n            AddViewoprtButton(editor);\n        }\n\n        private void AddViewoprtButton(GH_DocumentEditor editor)\n        {\n\n            ToolStrip oldToolbar = editor.Controls[0].Controls[1] as ToolStrip;\n            GhCanvasViewportInfo.showView.Image = Properties.Resources.console;\n\n            GhCanvasViewportInfo.showView.ImageScaling = ToolStripItemImageScaling.SizeToFit;\n            GhCanvasViewportInfo.showView.ToolTipText = \"GH Viewport\";\n            GhCanvasViewportInfo.showView.Checked = false;\n\n            oldToolbar.Items.Insert(1, GhCanvasViewportInfo.showView);\n        }\n    }\n}",
      "language": "csharp",
      "author": "anon39580149",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "grasshopper"
  ],
  "has_accepted_answer": false,
  "category_id": 8,
  "posts_count": 5,
  "views": 350
}