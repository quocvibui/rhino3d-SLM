{
  "source_url": "https://discourse.mcneel.com/t/boolean-difference-or-union-not-working-python/105367",
  "topic_id": 105367,
  "title": "Boolean difference or union not working python",
  "question": "Hi folks!\n\nI have a python file with classes and a certain point I’m createing the model() method that takes care of the modeling in grasshopper. It’s a very simple representation of an apartment with a balcony.\n\nAfter some tries, i find out that he indented block which starts with\n\n\n\n\nif self.balcony == “Half-inpandig Balkon”:\n\n\n\n\nshould be the problem.\n\nI tried a lot but didn’t find a solution.\n\nCan you please help me with it?\n\nThe problems lays in the Boolean difference or union: I’m pretty sure about it. Thanks in advance!\n\n\ndef model(self):\n    apartment = rs.AddBox([(0, 0, 0), (self.width(), 0, 0), (self.width(), self.depth(), 0), (0, self.depth(), 0),\n        (0, 0, FLOOR_HEIGHT), (self.width(), 0, FLOOR_HEIGHT), (self.width(), self.depth(), FLOOR_HEIGHT), (0, self.depth(), FLOOR_HEIGHT)])\n    # balcony measurements - CAUTION! for now I'm using dummy numbers.. in the future I'm going to extract it from a database\n    b_width = 2\n    b_depth = 1.5\n    b_height = 1.1\n    b_thickness = 0.1\n    offset = 0.2\n    # balcony modeling\n    b_box_1 = rs.AddBox([(0, 0, 0), (0, -b_depth, 0), (b_width, -b_depth, 0), (b_width, 0, 0),\n        (0, 0, b_height), (0, -b_depth, b_height), (b_width, -b_depth, b_height), (b_width, 0, b_height)])\n    b_box_2 = rs.AddBox([(b_thickness, b_thickness, b_thickness), (b_thickness, b_thickness-b_depth, b_thickness), (b_width-b_thickness, b_thickness-b_depth, b_thickness), (b_width-b_thickness, b_thickness, b_thickness),\n        (b_thickness, b_thickness, b_thickness+b_height), (b_thickness, b_thickness-b_depth, b_thickness+b_height), (b_width-b_thickness, b_thickness-b_depth, b_thickness+b_height), (b_width-b_thickness, b_thickness, b_thickness+b_height)])\n    b_final = rs.BooleanDifference(b_box_1, b_box_2)\n    balcony = rs.MoveObject(b_final, (offset, 0, 0))\n    # volume to subtract for half-inpanding balkon\n    # 3.2 because it's bigger than FLOOR HEIGHT\n    # b_depth/2 because the volume to cut has to be in the center of the apartment...",
  "code_blocks": [
    {
      "code": "def model(self):\n    apartment = rs.AddBox([(0, 0, 0), (self.width(), 0, 0), (self.width(), self.depth(), 0), (0, self.depth(), 0),\n        (0, 0, FLOOR_HEIGHT), (self.width(), 0, FLOOR_HEIGHT), (self.width(), self.depth(), FLOOR_HEIGHT), (0, self.depth(), FLOOR_HEIGHT)])\n    # balcony measurements - CAUTION! for now I'm using dummy numbers.. in the future I'm going to extract it from a database\n    b_width = 2\n    b_depth = 1.5\n    b_height = 1.1\n    b_thickness = 0.1\n    offset = 0.2\n    # balcony modeling\n    b_box_1 = rs.AddBox([(0, 0, 0), (0, -b_depth, 0), (b_width, -b_depth, 0), (b_width, 0, 0),\n        (0, 0, b_height), (0, -b_depth, b_height), (b_width, -b_depth, b_height), (b_width, 0, b_height)])\n    b_box_2 = rs.AddBox([(b_thickness, b_thickness, b_thickness), (b_thickness, b_thickness-b_depth, b_thickness), (b_width-b_thickness, b_thickness-b_depth, b_thickness), (b_width-b_thickness, b_thickness, b_thickness),\n        (b_thickness, b_thickness, b_thickness+b_height), (b_thickness, b_thickness-b_depth, b_thickness+b_height), (b_width-b_thickness, b_thickness-b_depth, b_thickness+b_height), (b_width-b_thickness, b_thickness, b_thickness+b_height)])\n    b_final = rs.BooleanDifference(b_box_1, b_box_2)\n    balcony = rs.MoveObject(b_final, (offset, 0, 0))\n    # volume to subtract for half-inpanding balkon\n    # 3.2 because it's bigger than FLOOR HEIGHT\n    # b_depth/2 because the volume to cut has to be in the center of the apartment\n    volume = rs.AddBox([(offset, 0, -0.1), (b_width + offset, 0, -0.1), (b_width + offset, b_depth/2, -0.1), (offset, b_depth/2, -0.1),\n        (offset, 0, 3.2), (b_width + offset, 0, 3.2), (b_width + offset, b_depth/2, 3.2), (offset, b_depth/2, 3.2)])\n    # rules for apartment models - the model i outputted with the links entrance on the north side\n    if self.floor_n == 1:\n        final_b = None\n        if self.function == \"Wonen\":\n            if self.balcony == \"Half-inpandig Balkon\":\n                if self.position == \"Hoek\":\n                    volume_m = rs.MoveObject(rs.RotateObject(volume, (0, 0, 0), -90), (0, self.depth(), 0))\n                else:\n                    volume_m = volume\n                final_a = rs.BooleanDifference(apartment, volume_m)\n            else:\n                final_a = apartment\n        else:\n            final_a = apartment\n    elif self.floor_n >= self.n_floors - 1 and self.position == \"Setback Hoek\":\n        if str(self.unit) == \"2.7\":\n            t_width = 2.09\n        else:\n            t_width = 2.0\n        t_height = 1.5\n        t_offset = 0.34\n        terras_box_1 = rs.AddBox([(0, 0, 0), (t_width, 0, 0), (t_width, self.depth(), 0), (0, self.depth(), 0),\n            (0, 0, t_height), (t_width, 0, t_height), (t_width, self.depth(), t_height), (0, self.depth(), t_height)])\n        terras_box_2 = rs.CopyObject(terras_box_1, (t_offset, t_offset, t_offset))\n        final_b = rs.BooleanDifference(terras_box_1, terras_box_2)\n        final_a = rs.MoveObject(apartment, (t_width, 0, 0))\n    else:\n        if self.balcony == \"Half-inpandig Balkon\":\n            if self.position == \"Hoek\":\n                volume_m = rs.MoveObject(rs.RotateObject(volume, (0, 0, 0), -90), (0, self.depth(), 0))\n                final_b = rs.MoveObject(rs.RotateObject(balcony, (0, 0, 0), -90), (b_depth/2, self.depth(), 0))\n            else:\n                volume_m = volume\n                final_b = rs.MoveObject(balcony, (0, b_depth/2, 0))\n            final_a = rs.BooleanDifference(apartment, volume_m)\n        elif self.balcony == \"Uitpandig Balkon\":\n            if self.position == \"Hoek\":\n                if self.balcony_pos == 1:\n                    final_b = rs.MoveObject(rs.RotateObject(balcony, (0, 0, 0), -90), (0, self.depth(), 0))\n                elif self.balcony_pos == 2:\n                    final_b = rs.MoveObject(rs.RotateObject(balcony, (0, 0, 0), -90), (0, 2*(b_width+offset), 0))\n                else:\n                    final_b = balcony\n            else:\n                final_b = balcony\n            final_a = apartment\n        else:\n            final_a = apartment\n            final_b = None\n    return rs.BooleanUnion([final_a, final_b]) if final_b is not None else final_a",
      "language": "python",
      "author": "DomE",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "boolean",
    "geometry",
    "grasshopper",
    "python",
    "transformation"
  ],
  "has_accepted_answer": true,
  "category_id": 2,
  "posts_count": 4,
  "views": 590
}