{
  "source_url": "https://github.com/SimosManiatis/multi-robot-assembly/blob/e0f9038e33e420b5b5cfafb368d99047f645e6d7/src/robotic_assembly/RobotManager.py",
  "repo": "SimosManiatis/multi-robot-assembly",
  "repo_stars": 0,
  "repo_description": "The project is  focused on designing a system of multi-robot assembly of rigidity-preserving structures, all while eliminating the use of scaffolding. ",
  "license": "MIT",
  "filepath": "src/robotic_assembly/RobotManager.py",
  "instruction": "Robot manager",
  "code": "import sys\nimport hashlib\nimport os\nimport json\nimport threading\nfrom PyQt5.QtWidgets import (\n    QApplication, QWidget, QPushButton, QVBoxLayout, QLabel, QGraphicsOpacityEffect,\n    QHBoxLayout, QMessageBox, QLineEdit, QListWidget, QSizePolicy, QStackedWidget,\n    QFileDialog, QListWidgetItem, QGroupBox, QFormLayout, QComboBox,\n    QColorDialog, QDialog, QDialogButtonBox, QButtonGroup, QSlider\n)\nfrom PyQt5.QtGui import QFont, QPixmap, QColor, QIcon\nfrom PyQt5.QtCore import (\n    Qt, QPropertyAnimation, QTimer, QSequentialAnimationGroup, QEasingCurve, QSize, QPoint\n)\nimport ghhops_server as hs\nimport rhino3dm  # Ensure rhino3dm is installed if used\nimport vlc  # Added for video playback\n\n# ----------------------------- Configuration Parameters -----------------------------\n\n# Window Parameters\nwindow_title = \"CORE 2024 Robot Manager\"\nwindow_width = 960\nwindow_height = 540\n\n# Paths for resources\nlogo_path = r\"D:/CORE24/resources/images/logo.png\"  # Update this path accordingly\nrobots_image_path = r\"D:/CORE24/resources/images/\"  # Directory containing robot images\ndatabase_file = \"D:/CORE24/resources/data/users.json\"\nrobots_file = \"D:/CORE24/resources/data/robots.json\"\ndemo_video_path = r\"D:/CORE24/resources/videos/demo.mp4\"  # Added path for demo video\n\n# Colors and Fonts\nyes_button_color = \"#007AFF\"\nno_button_color = \"#D3D3D3\"\nhover_pale_red = \"#FFA07A\"\nhover_yes_button_color = \"#99CCFF\"\nhover_pale_blue = \"#AFEEEE\"\ntext_color = \"#000000\"\nfont_family = \"Helvetica\"\nstartup_background_color = \"#FFFFFF\"\n\n# Font Sizes\ncourse_title_font_size = 24\nproject_title_font_size = 16\ndialog_title_font_size = 18\n\n# Titles for the Startup Screen\ncourse_title = \"CORE 2024\"\nproject_title = \"Coworking Robotic Assembly\"\n\n# Supported Languages\nsupported_languages = [\"English\", \"Dutch\", \"Greek\"]\n\n# ----------------------------- Utility Functions -----------------------------\n\ndef ensure_file_exists(file_path, default_content):\n    \"\"\"Ensure that the specified file exists. If not, create it with default content.\"\"\"\n    if not os.path.exists(file_path):\n        os.makedirs(os.path.dirname(file_path), exist_ok=True)\n        with open(file_path, 'w') as file:\n            if isinstance(default_content, dict) or isinstance(default_content, list):\n                json.dump(default_content, file, indent=4)\n            else:\n                file.write(default_content)\n\n# Ensure that user and robot database files exist\nensure_file_exists(database_file, {})\nensure_file_exists(robots_file, [])\n\n# ----------------------------- Robot Class -----------------------------\n\nclass Robot:\n    \"\"\"Class to store robot information.\"\"\"\n    def __init__(self, name, base, reference_frame, model_type):\n        self.name = name\n        self.base = base\n        self.reference_frame = reference_frame  # Tuple of three integers\n        self.model_type = model_type  # 'UR5' or 'COMAU_NJ60'\n        self.image_path = self.get_image_path()\n    \n    def get_image_path(self):\n        \"\"\"Return the image path based on the model type.\"\"\"\n        if self.model_type == 'UR5':\n            path = os.path.join(robots_image_path, \"UR5.png\")\n        elif self.model_type == 'COMAU_NJ60':\n            path = os.path.join(robots_image_path, \"COMAU_NJ60.png\")\n        else:\n            path = \"\"\n        \n        if not os.path.exists(path):\n            # Set to a default placeholder image\n            return os.path.join(robots_image_path, \"placeholder.png\")\n        return path\n    \n    def to_dict(self):\n        \"\"\"Convert the Robot instance to a dictionary for JSON serialization.\"\"\"\n        return {\n            \"name\": self.name,\n            \"base\": self.base,\n            \"reference_frame\": self.reference_frame,\n            \"model_type\": self.model_type\n        }\n    \n    @staticmethod\n    def from_dict(data):\n        \"\"\"Create a Robot instance from a dictionary.\"\"\"\n        return Robot(\n            name=data.get('name', 'Unnamed Robot'),\n            base=data.get('base', 0),\n            reference_frame=tuple(data.get('reference_frame', [0, 0, 0])),\n            model_type=data.get('model_type', 'Unknown')  # Default to 'Unknown' if missing\n        )\n\n# ----------------------------- Custom Widgets -----------------------------\n\nclass PulsingButton(QPushButton):\n    \"\"\"A QPushButton that pulses and changes color when hovered.\"\"\"\n    def __init__(self, label, color, hover_color=None, is_negative=False, hover_size_increase=False):\n        super().__init__(label)\n        self.default_color = color\n        self.hover_color = hover_color if hover_color else color\n        self.is_negative = is_negative\n        self.hover_size_increase = hover_size_increase\n        # Remove fixed size to allow flexibility\n        # self.setFixedSize(200, 50)  # Removed\n        # Set minimum size to ensure usability\n        self.setMinimumSize(150, 40)\n        self.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        self.setStyleSheet(f\"\"\"\n            QPushButton {{\n                background-color: {color};\n                color: white;\n                border: none;\n                border-radius: 8px;\n                font-family: {font_family};\n                font-size: 14px;\n            }}\n            QPushButton:hover {{\n                background-color: {self.hover_color};\n            }}\n        \"\"\")\n        self.setFont(QFont(font_family, 12))\n        self.original_size = self.size()\n        self.hover_animation = None\n\n    def enterEvent(self, event):\n        super().enterEvent(event)\n        if self.hover_size_increase:\n            self.start_size_animation(1.1)\n        self.start_pulse()\n\n    def leaveEvent(self, event):\n        super().leaveEvent(event)\n        if self.hover_size_increase:\n            self.start_size_animation(1.0)\n        self.stop_pulse()\n\n    def start_pulse(self):\n        self.pulse_timer = QTimer(self)\n        self.pulse_timer.timeout.connect(self.pulse_effect)\n        self.pulse_opacity = 1.0\n        self.pulse_direction = -0.05\n        self.pulse_timer.start(50)\n\n    def stop_pulse(self):\n        if hasattr(self, 'pulse_timer'):\n            self.pulse_timer.stop()\n            self.setGraphicsEffect(None)\n\n    def pulse_effect(self):\n        if self.pulse_opacity <= 0.5 or self.pulse_opacity >= 1.0:\n            self.pulse_direction *= -1\n        self.pulse_opacity += self.pulse_direction\n\n        opacity_effect = QGraphicsOpacityEffect()\n        opacity_effect.setOpacity(self.pulse_opacity)\n        self.setGraphicsEffect(opacity_effect)\n\n    def start_size_animation(self, scale_factor):\n        new_width = self.original_size.width() * scale_factor\n        new_height = self.original_size.height() * scale_factor\n        new_size = QSize(int(new_width), int(new_height))\n\n        self.hover_animation = QPropertyAnimation(self, b\"size\")\n        self.hover_animation.setDuration(200)\n        self.hover_animation.setStartValue(self.size())\n        self.hover_animation.setEndValue(new_size)\n        self.hover_animation.setEasingCurve(QEasingCurve.OutCubic)\n        self.hover_animation.start()\n\n# ----------------------------- Dialogs -----------------------------\n\nclass VideoPlayerDialog(QDialog):\n    \"\"\"Dialog to play demo video.\"\"\"\n    def __init__(self, video_path, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Watch Demo\")\n        self.setFixedSize(800, 600)\n        layout = QVBoxLayout()\n        self.instance = vlc.Instance()\n        self.media = self.instance.media_new(video_path)\n        self.player = self.instance.media_player_new()\n        self.player.set_media(self.media)\n        self.video_frame = QWidget(self)\n        self.video_frame.setMinimumSize(780, 500)\n        self.video_frame.setStyleSheet(\"background-color: black;\")\n        layout.addWidget(self.video_frame)\n        if sys.platform.startswith('linux'):\n            self.player.set_xwindow(self.video_frame.winId())\n        elif sys.platform == \"win32\":\n            self.player.set_hwnd(self.video_frame.winId())\n        elif sys.platform == \"darwin\":\n            self.player.set_nsobject(int(self.video_frame.winId()))\n        # Add position slider\n        self.position_slider = QSlider(Qt.Horizontal)\n        self.position_slider.setRange(0, 1000)\n        self.position_slider.sliderMoved.connect(self.set_position)\n        layout.addWidget(self.position_slider)\n        controls_layout = QHBoxLayout()\n        play_button = QPushButton(\"Play\")\n        play_button.clicked.connect(self.player.play)\n        pause_button = QPushButton(\"Pause\")\n        pause_button.clicked.connect(self.player.pause)\n        stop_button = QPushButton(\"Stop\")\n        stop_button.clicked.connect(self.stop)\n        controls_layout.addWidget(play_button)\n        controls_layout.addWidget(pause_button)\n        controls_layout.addWidget(stop_button)\n        layout.addLayout(controls_layout)\n        self.setLayout(layout)\n        self.timer = QTimer(self)\n        self.timer.setInterval(500)\n        self.timer.timeout.connect(self.update_ui)\n        self.timer.start()\n        self.player.play()\n\n    def update_ui(self):\n        try:\n            if self.player is not None:\n                if self.player.is_playing():\n                    media_length = self.player.get_length()\n                    if media_length > 0:\n                        current_time = self.player.get_time()\n                        position = int(current_time * 1000 / media_length)\n                        self.position_slider.blockSignals(True)\n                        self.position_slider.setValue(position)\n                        self.position_slider.blockSignals(False)\n                else:\n                    # Player is not playing\n                    self.position_slider.blockSignals(True)\n                    self.position_slider.setValue(0)\n                    self.position_slider.blockSignals(False)\n        except Exception as e:\n            print(f\"Exception in update_ui: {e}\")\n\n    def set_position(self, position):\n        try:\n            if self.player is not None:\n                media_length = self.player.get_length()\n                if media_length > 0:\n                    new_time = position * media_length / 1000\n                    self.player.set_time(int(new_time))\n        except Exception as e:\n            print(f\"Exception in set_position: {e}\")\n\n    def stop(self):\n        try:\n            if self.player is not None:\n                self.player.stop()\n                self.position_slider.setValue(0)\n        except Exception as e:\n            print(f\"Exception in stop: {e}\")\n\nclass OptionsDialog(QDialog):\n    \"\"\"Dialog for changing language and appearance settings.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Options\")\n        self.setFixedSize(400, 300)\n        self.selected_color = None\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n\n        # Language Selection\n        lang_layout = QHBoxLayout()\n        lang_label = QLabel(\"Select Language:\")\n        self.lang_combo = QComboBox()\n        self.lang_combo.addItems(supported_languages)\n        lang_layout.addWidget(lang_label)\n        lang_layout.addWidget(self.lang_combo)\n        layout.addLayout(lang_layout)\n\n        # Appearance Settings\n        appearance_layout = QHBoxLayout()\n        appearance_label = QLabel(\"Background Color:\")\n        self.color_button = QPushButton(\"Choose Color\")\n        self.color_button.clicked.connect(self.choose_color)\n        appearance_layout.addWidget(appearance_label)\n        appearance_layout.addWidget(self.color_button)\n        appearance_layout.setAlignment(Qt.AlignLeft)\n        layout.addLayout(appearance_layout)\n\n        # Dialog Buttons\n        buttons = QDialogButtonBox(QDialogButtonBox.Ok | QDialogButtonBox.Cancel)\n        buttons.accepted.connect(self.accept)\n        buttons.rejected.connect(self.reject)\n        layout.addWidget(buttons)\n\n        self.setLayout(layout)\n\n    def choose_color(self):\n        color = QColorDialog.getColor(initial=QColor(startup_background_color))\n        if color.isValid():\n            self.selected_color = color.name()\n            self.color_button.setStyleSheet(f\"background-color: {self.selected_color};\")\n            self.color_button.setText(\"\")\n        else:\n            self.selected_color = None\n\nclass AddRobotDialog(QDialog):\n    \"\"\"Dialog to add a new robot with selection and data input.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Add New Robot\")\n        self.setFixedSize(700, 500)  # Adjust as needed\n        self.selected_model = None\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n\n        # Robot Selection Group\n        selection_group = QGroupBox(\"Select Robot Model\")\n        selection_layout = QHBoxLayout()\n\n        # Initialize QButtonGroup for exclusive selection\n        self.button_group = QButtonGroup(self)\n        self.button_group.setExclusive(True)\n\n        # Define robot models\n        robots = [\n            {\n                \"model_type\": \"UR5\",\n                \"image_path\": os.path.join(robots_image_path, \"UR5.png\"),\n                \"properties\": \"Manufacturer: Universal Robots\\nPayload: 5 kg\\nReach: 850 mm\"\n            },\n            {\n                \"model_type\": \"COMAU_NJ60\",\n                \"image_path\": os.path.join(robots_image_path, \"COMAU_NJ60.png\"),\n                \"properties\": \"Manufacturer: COMAU\\nPayload: 60 kg\\nReach: 2000 mm\"\n            }\n        ]\n\n        # Create buttons for each robot\n        for idx, robot in enumerate(robots):\n            robot_layout = QVBoxLayout()\n            robot_button = QPushButton()\n            robot_button.setCheckable(True)\n            robot_button.setStyleSheet(\"\"\"\n                QPushButton {\n                    border: 2px solid #ccc;\n                    border-radius: 8px;\n                    padding: 10px;\n                }\n                QPushButton:checked {\n                    border: 2px solid #007AFF;\n                }\n            \"\"\")\n            robot_button.setMinimumSize(150, 150)\n            robot_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n            # Set robot image\n            pixmap = QPixmap(robot[\"image_path\"])\n            if pixmap.isNull():\n                # Placeholder image if the specified image doesn't exist\n                pixmap = QPixmap(150, 150)\n                pixmap.fill(QColor('gray'))\n            robot_button.setIcon(QIcon(pixmap))\n            robot_button.setIconSize(QSize(130, 130))\n            robot_button.clicked.connect(self.update_selected_model)\n            # Add to button group\n            self.button_group.addButton(robot_button, id=idx)\n            robot_layout.addWidget(robot_button, alignment=Qt.AlignCenter)\n            # Robot name label\n            name_label = QLabel(robot[\"model_type\"])\n            name_label.setFont(QFont(font_family, 12, QFont.Bold))\n            name_label.setAlignment(Qt.AlignCenter)\n            robot_layout.addWidget(name_label)\n            # Robot properties label\n            properties_label = QLabel(robot[\"properties\"])\n            properties_label.setFont(QFont(font_family, 10))\n            properties_label.setAlignment(Qt.AlignCenter)\n            properties_label.setWordWrap(True)\n            robot_layout.addWidget(properties_label)\n            selection_layout.addLayout(robot_layout)\n\n        selection_group.setLayout(selection_layout)\n        layout.addWidget(selection_group)\n\n        # Data Input Group\n        data_group = QGroupBox(\"Enter Robot Details\")\n        data_layout = QFormLayout()\n\n        self.robot_name_input = QLineEdit()\n        self.robot_name_input.setPlaceholderText(\"Enter Robot Name (e.g., UR5 A)\")\n        self.robot_name_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        data_layout.addRow(\"Robot Name:\", self.robot_name_input)\n\n        self.robot_base_input = QLineEdit()\n        self.robot_base_input.setPlaceholderText(\"Enter Robot Base (integer)\")\n        self.robot_base_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        data_layout.addRow(\"Robot Base:\", self.robot_base_input)\n\n        self.robot_ref_frame_input = QLineEdit()\n        self.robot_ref_frame_input.setPlaceholderText(\"Enter Reference Frame (e.g., 0,0,0)\")\n        self.robot_ref_frame_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        data_layout.addRow(\"Reference Frame:\", self.robot_ref_frame_input)\n\n        data_group.setLayout(data_layout)\n\n        layout.addWidget(data_group)\n\n        # Dialog Buttons\n        buttons = QDialogButtonBox(QDialogButtonBox.Ok | QDialogButtonBox.Cancel)\n        buttons.accepted.connect(self.add_robot)\n        buttons.rejected.connect(self.reject)\n        layout.addWidget(buttons)\n\n        self.setLayout(layout)\n\n    def update_selected_model(self):\n        \"\"\"Update the selected robot model based on button selection.\"\"\"\n        selected_button = self.button_group.checkedButton()\n        if selected_button:\n            idx = self.button_group.id(selected_button)\n            self.selected_model = [\"UR5\", \"COMAU_NJ60\"][idx]\n        else:\n            self.selected_model = None\n\n    def add_robot(self):\n        \"\"\"Validate inputs and accept the dialog if valid.\"\"\"\n        if not self.selected_model:\n            QMessageBox.warning(self, \"Selection Required\", \"Please select a robot model.\")\n            return\n\n        name = self.robot_name_input.text().strip()\n        base = self.robot_base_input.text().strip()\n        ref_frame = self.robot_ref_frame_input.text().strip()\n\n        # Validate inputs\n        valid = True\n        errors = []\n\n        if not name:\n            valid = False\n            errors.append(\"Robot Name is required.\")\n        if not base.isdigit():\n            valid = False\n            errors.append(\"Robot Base must be an integer.\")\n        if not self.validate_ref_frame(ref_frame):\n            valid = False\n            errors.append(\"Reference Frame must be in the format x,y,z with integers.\")\n\n        if not valid:\n            QMessageBox.warning(self, \"Invalid Input\", \"\\n\".join(errors))\n            return\n\n        # Process Reference Frame\n        ref_frame_tuple = tuple(map(int, ref_frame.split(',')))\n\n        # Set the dialog's data\n        self.robot_data = {\n            \"name\": name,\n            \"base\": int(base),\n            \"reference_frame\": ref_frame_tuple,\n            \"model_type\": self.selected_model\n        }\n\n        self.accept()\n\n    def validate_ref_frame(self, ref_frame_str):\n        \"\"\"Validate the reference frame input.\"\"\"\n        try:\n            parts = ref_frame_str.split(',')\n            if len(parts) != 3:\n                return False\n            tuple(map(int, parts))  # Ensure all parts are integers\n            return True\n        except:\n            return False\n\n# ----------------------------- Hops Server Integration -----------------------------\n\n# Initialize Hops\nhops = hs.Hops()\n\n@hops.component(\n    \"/robot_a\",\n    name=\"Robot A\",\n    nickname=\"RA\",\n    description=\"Get details of Robot A\",\n    inputs=[],\n    outputs=[\n        hs.HopsString(\"Name\", \"N\", \"Name of Robot A\"),\n        hs.HopsNumber(\"Base\", \"B\", \"Base identifier\"),\n        hs.HopsPoint(\"Reference Frame\", \"RF\", \"Reference Frame coordinates\"),\n        hs.HopsString(\"Model Type\", \"MT\", \"Model type\")\n    ]\n)\ndef get_robot_a():\n    \"\"\"Get details of the first robot (Robot A).\"\"\"\n    try:\n        with open(robots_file, 'r') as file:\n            robots_data = json.load(file)\n            if len(robots_data) >= 1:\n                robot_a = robots_data[0]\n                rf = robot_a.get('reference_frame', [0, 0, 0])\n                # Ensure reference_frame has exactly 3 coordinates\n                if len(rf) != 3:\n                    rf = [0, 0, 0]\n                return (\n                    robot_a.get('name', ''),\n                    robot_a.get('base', 0),\n                    rhino3dm.Point3d(*rf),\n                    robot_a.get('model_type', '')\n                )\n            else:\n                return \"\", 0, rhino3dm.Point3d(0, 0, 0), \"\"\n    except Exception as e:\n        # Return error message in the Name output and default values for others\n        return f\"Error: {str(e)}\", 0, rhino3dm.Point3d(0, 0, 0), \"\"\n\n@hops.component(\n    \"/robot_b\",\n    name=\"Robot B\",\n    nickname=\"RB\",\n    description=\"Get details of Robot B\",\n    inputs=[],\n    outputs=[\n        hs.HopsString(\"Name\", \"N\", \"Name of Robot B\"),\n        hs.HopsNumber(\"Base\", \"B\", \"Base identifier\"),\n        hs.HopsPoint(\"Reference Frame\", \"RF\", \"Reference Frame coordinates\"),\n        hs.HopsString(\"Model Type\", \"MT\", \"Model type\")\n    ]\n)\ndef get_robot_b():\n    \"\"\"Get details of the second robot (Robot B).\"\"\"\n    try:\n        with open(robots_file, 'r') as file:\n            robots_data = json.load(file)\n            if len(robots_data) >= 2:\n                robot_b = robots_data[1]\n                rf = robot_b.get('reference_frame', [0, 0, 0])\n                # Ensure reference_frame has exactly 3 coordinates\n                if len(rf) != 3:\n                    rf = [0, 0, 0]\n                return (\n                    robot_b.get('name', ''),\n                    robot_b.get('base', 0),\n                    rhino3dm.Point3d(*rf),\n                    robot_b.get('model_type', '')\n                )\n            else:\n                return \"\", 0, rhino3dm.Point3d(0, 0, 0), \"\"\n    except Exception as e:\n        # Return error message in the Name output and default values for others\n        return f\"Error: {str(e)}\", 0, rhino3dm.Point3d(0, 0, 0), \"\"\n\n@hops.component(\n    \"/all_robots\",\n    name=\"All Robots\",\n    nickname=\"AR\",\n    description=\"Get details of all registered robots\",\n    inputs=[],\n    outputs=[\n        hs.HopsString(\"Robots\", \"R\", \"Details of all robots\", access=hs.HopsParamAccess.TREE)\n    ]\n)\ndef get_all_robots():\n    \"\"\"Get details of all registered robots.\"\"\"\n    try:\n        with open(robots_file, 'r') as file:\n            robots_data = json.load(file)\n            # Convert each robot's reference frame to a comma-separated string\n            formatted_robots = []\n            for robot in robots_data:\n                formatted_robot = robot.copy()\n                rf = robot.get('reference_frame', [0, 0, 0])\n                if len(rf) != 3:\n                    rf = [0, 0, 0]\n                formatted_robot['reference_frame'] = \",\".join(map(str, rf))\n                formatted_robots.append(json.dumps(formatted_robot))  # Serialize to JSON string\n            return formatted_robots\n    except Exception as e:\n        # Return a list with an error message\n        return [f\"Error: {str(e)}\"]\n\n# ----------------------------- Robot Manager GUI -----------------------------\n\nclass RobotManagerGUI(QWidget):\n    \"\"\"PyQt5 GUI for managing robots.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Robot Manager\")\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.registered_robots = []\n        self.init_ui()\n        self.load_registered_robots()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n        layout.setContentsMargins(20, 20, 20, 20)\n        layout.setSpacing(20)\n\n        # Robot Manager Title\n        robot_manager_label = QLabel(\"Robot Manager\")\n        robot_manager_label.setFont(QFont(font_family, 24))\n        robot_manager_label.setStyleSheet(f\"color: {text_color};\")\n        robot_manager_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(robot_manager_label)\n\n        # Add Robot Button\n        add_robot_button = QPushButton(\"Add New Robot\")\n        add_robot_button.setMinimumSize(150, 40)\n        add_robot_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        add_robot_button.setFont(QFont(font_family, 12))\n        add_robot_button.clicked.connect(self.open_add_robot_dialog)\n        layout.addWidget(add_robot_button, alignment=Qt.AlignCenter)\n\n        # Robot List\n        self.robot_list_widget = QListWidget()\n        self.robot_list_widget.setMinimumWidth(200)\n        self.robot_list_widget.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n        self.robot_list_widget.itemSelectionChanged.connect(self.update_robot_preview)\n        self.robot_list_widget.setStyleSheet(\"\"\"\n            QListWidget {\n                border: none;\n                font-size: 14px;\n                font-family: Helvetica;\n            }\n            QListWidget::item {\n                padding: 10px;\n            }\n            QListWidget::item:selected {\n                background-color: #E0E0E0;\n                color: black;\n            }\n        \"\"\")\n        layout.addWidget(self.robot_list_widget)\n\n        # Robot Preview Label\n        self.robot_preview_label = QLabel(\"Robot Preview\")\n        self.robot_preview_label.setFont(QFont(font_family, 20))\n        self.robot_preview_label.setStyleSheet(f\"color: {text_color};\")\n        self.robot_preview_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(self.robot_preview_label)\n\n        # Robot Preview Image\n        self.robot_preview_image = QLabel()\n        self.robot_preview_image.setAlignment(Qt.AlignCenter)\n        # Remove fixed size to allow scaling\n        # self.robot_preview_image.setFixedSize(300, 300)\n        self.robot_preview_image.setMinimumSize(200, 200)\n        self.robot_preview_image.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n        self.robot_preview_image.setStyleSheet(\"border: 1px solid #ccc;\")\n        layout.addWidget(self.robot_preview_image)\n\n        # Remove Robot Button\n        remove_robot_button = PulsingButton(\"Remove Selected Robot\", no_button_color, hover_color=hover_pale_red)\n        remove_robot_button.setMinimumSize(150, 40)\n        remove_robot_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        remove_robot_button.clicked.connect(self.remove_selected_robot)\n        layout.addWidget(remove_robot_button, alignment=Qt.AlignCenter)\n\n        # Back to Main Menu Button\n        back_button = PulsingButton(\"Back to Menu\", no_button_color, hover_color=hover_pale_red, is_negative=True)\n        back_button.setMinimumSize(150, 40)\n        back_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        back_button.clicked.connect(lambda: self.parent().switch_screen(\"main_menu\"))\n        layout.addWidget(back_button, alignment=Qt.AlignCenter)\n\n        self.setLayout(layout)\n\n    def open_add_robot_dialog(self):\n        \"\"\"Open the dialog to add a new robot.\"\"\"\n        dialog = AddRobotDialog(self)\n        if dialog.exec_() == QDialog.Accepted:\n            robot_data = dialog.robot_data\n            # Check for unique robot name\n            if self.robot_name_exists(robot_data['name']):\n                QMessageBox.warning(self, \"Duplicate Name\", f\"The robot name '{robot_data['name']}' is already taken.\")\n                return\n            # Create Robot instance\n            new_robot = Robot(\n                name=robot_data['name'],\n                base=robot_data['base'],\n                reference_frame=robot_data['reference_frame'],\n                model_type=robot_data['model_type']\n            )\n            # Add to registered robots\n            self.registered_robots.append(new_robot)\n            self.save_registered_robots()\n            self.update_robot_list()\n            QMessageBox.information(self, \"Robot Added\", f\"Robot '{new_robot.name}' added successfully!\")\n\n    def remove_selected_robot(self):\n        \"\"\"Remove the selected robot from the list.\"\"\"\n        selected_items = self.robot_list_widget.selectedItems()\n        if not selected_items:\n            QMessageBox.warning(self, \"No Selection\", \"Please select a robot to remove.\")\n            return\n        confirm = QMessageBox.question(\n            self, \"Confirm Removal\",\n            \"Are you sure you want to remove the selected robot(s)?\",\n            QMessageBox.Yes | QMessageBox.No\n        )\n        if confirm == QMessageBox.Yes:\n            for item in selected_items:\n                robot = item.data(Qt.UserRole)\n                self.registered_robots.remove(robot)\n            self.save_registered_robots()\n            self.update_robot_list()\n            # Clear image preview if the removed robot was being previewed\n            if not self.robot_list_widget.selectedItems():\n                self.robot_preview_image.clear()\n                self.robot_preview_label.setText(\"Robot Preview\")\n            QMessageBox.information(self, \"Robot Removed\", \"Selected robot(s) removed successfully.\")\n\n    def update_robot_list(self):\n        \"\"\"Update the list of registered robots.\"\"\"\n        self.robot_list_widget.clear()\n        for robot in self.registered_robots:\n            item_text = f\"{robot.name} | Model: {robot.model_type} | Base: {robot.base} | Ref Frame: {robot.reference_frame}\"\n            item = QListWidgetItem(item_text)\n            item.setData(Qt.UserRole, robot)\n            self.robot_list_widget.addItem(item)\n\n    def update_robot_preview(self):\n        \"\"\"Update the robot image preview when a robot is selected.\"\"\"\n        selected_items = self.robot_list_widget.selectedItems()\n        if selected_items:\n            robot = selected_items[0].data(Qt.UserRole)\n            image_path = robot.image_path\n            if os.path.exists(image_path):\n                pixmap = QPixmap(image_path).scaled(\n                    self.robot_preview_image.width(),\n                    self.robot_preview_image.height(),\n                    Qt.KeepAspectRatio,\n                    Qt.SmoothTransformation\n                )\n                self.robot_preview_image.setPixmap(pixmap)\n                self.robot_preview_label.setText(f\"Robot Preview: {robot.name}\")\n            else:\n                self.robot_preview_image.clear()\n                self.robot_preview_label.setText(\"Robot Preview\")\n        else:\n            self.robot_preview_image.clear()\n            self.robot_preview_label.setText(\"Robot Preview\")\n\n    def robot_name_exists(self, name):\n        \"\"\"Check if a robot with the given name already exists.\"\"\"\n        for robot in self.registered_robots:\n            if robot.name.lower() == name.lower():\n                return True\n        return False\n\n    def load_registered_robots(self):\n        \"\"\"Load registered robots from the JSON file.\"\"\"\n        try:\n            with open(robots_file, 'r') as file:\n                robots_data = json.load(file)\n                self.registered_robots = [Robot.from_dict(robot) for robot in robots_data]\n                self.update_robot_list()\n        except (json.JSONDecodeError, FileNotFoundError) as e:\n            QMessageBox.critical(self, \"Error\", f\"Failed to load robots data: {e}\")\n            self.registered_robots = []\n\n    def save_registered_robots(self):\n        \"\"\"Save registered robots to the JSON file.\"\"\"\n        try:\n            with open(robots_file, 'w') as file:\n                json.dump([robot.to_dict() for robot in self.registered_robots], file, indent=4)\n        except Exception as e:\n            QMessageBox.critical(self, \"Error\", f\"Failed to save robots data: {e}\")\n\n    def resizeEvent(self, event):\n        \"\"\"Handle window resize to adjust images.\"\"\"\n        self.update_robot_preview()\n        super().resizeEvent(event)\n\n# ----------------------------- Startup Screen -----------------------------\n\nclass StartupScreen(QWidget):\n    \"\"\"Startup Screen with logo and animated titles.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Startup\")\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n        layout.setAlignment(Qt.AlignCenter)\n\n        # Logo\n        logo_label = QLabel()\n        pixmap = QPixmap(logo_path)\n        if pixmap.isNull():\n            # Placeholder image if the specified image doesn't exist\n            pixmap = QPixmap(200, 200)\n            pixmap.fill(QColor('gray'))\n        logo_label.setPixmap(pixmap.scaled(\n            200, 200, Qt.KeepAspectRatio, Qt.SmoothTransformation))\n        logo_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(logo_label)\n\n        # Course Title\n        course_title_label = QLabel(course_title)\n        course_title_label.setFont(QFont(font_family, course_title_font_size, QFont.Bold))\n        course_title_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(course_title_label)\n\n        # Project Title\n        project_title_label = QLabel(project_title)\n        project_title_label.setFont(QFont(font_family, project_title_font_size))\n        project_title_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(project_title_label)\n\n        # Proceed Button\n        proceed_button = PulsingButton(\"Proceed\", yes_button_color, hover_color=hover_yes_button_color)\n        proceed_button.setMinimumSize(150, 40)\n        proceed_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        proceed_button.clicked.connect(lambda: self.parent().switch_screen(\"login\"))\n        layout.addWidget(proceed_button, alignment=Qt.AlignCenter)\n\n        self.setLayout(layout)\n\n# ----------------------------- Login Screen -----------------------------\n\nclass LoginScreen(QWidget):\n    \"\"\"Login Screen.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Login\")\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n        layout.setAlignment(Qt.AlignCenter)\n\n        # Login Title\n        login_label = QLabel(\"Login\")\n        login_label.setFont(QFont(font_family, 24))\n        login_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(login_label)\n\n        # Username Input\n        self.username_input = QLineEdit()\n        self.username_input.setPlaceholderText(\"Username\")\n        self.username_input.setMinimumSize(300, 40)\n        self.username_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        layout.addWidget(self.username_input, alignment=Qt.AlignCenter)\n\n        # Password Input\n        self.password_input = QLineEdit()\n        self.password_input.setEchoMode(QLineEdit.Password)\n        self.password_input.setPlaceholderText(\"Password\")\n        self.password_input.setMinimumSize(300, 40)\n        self.password_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        layout.addWidget(self.password_input, alignment=Qt.AlignCenter)\n\n        # Login Button\n        login_button = PulsingButton(\"Login\", yes_button_color, hover_color=hover_yes_button_color)\n        login_button.setMinimumSize(150, 40)\n        login_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        login_button.clicked.connect(self.handle_login)\n        layout.addWidget(login_button, alignment=Qt.AlignCenter)\n\n        # Navigate to Register\n        register_layout = QHBoxLayout()\n        register_label = QLabel(\"Don't have an account?\")\n        register_button = QPushButton(\"Register\")\n        register_button.setStyleSheet(\"\"\"\n            QPushButton {\n                background-color: transparent;\n                color: #007AFF;\n                border: none;\n                text-decoration: underline;\n            }\n            QPushButton:hover {\n                color: #005BBB;\n            }\n        \"\"\")\n        register_button.setSizePolicy(QSizePolicy.Fixed, QSizePolicy.Fixed)\n        register_button.clicked.connect(lambda: self.parent().switch_screen(\"register\"))\n        register_layout.addWidget(register_label)\n        register_layout.addWidget(register_button)\n        register_layout.setAlignment(Qt.AlignCenter)\n        layout.addLayout(register_layout)\n\n        self.setLayout(layout)\n\n    def handle_login(self):\n        \"\"\"Handle user login.\"\"\"\n        username = self.username_input.text().strip()\n        password = self.password_input.text()\n\n        if not username or not password:\n            QMessageBox.warning(self, \"Login Failed\", \"Please enter both username and password.\")\n            return\n\n        # Hash the password for comparison\n        hashed_password = hashlib.sha256(password.encode()).hexdigest()\n\n        if self.verify_user(username, hashed_password):\n            QMessageBox.information(self, \"Login Successful\", f\"Welcome, {username}!\")\n            self.parent().current_user = username\n            self.parent().switch_screen(\"main_menu\")\n        else:\n            QMessageBox.warning(self, \"Login Failed\", \"Invalid username or password.\")\n\n    def verify_user(self, username, hashed_password):\n        \"\"\"Verify if the username and password match the database.\"\"\"\n        try:\n            with open(database_file, 'r') as file:\n                users_data = json.load(file)\n                return users_data.get(username) == hashed_password\n        except (json.JSONDecodeError, FileNotFoundError):\n            return False\n\n# ----------------------------- Register Screen -----------------------------\n\nclass RegisterScreen(QWidget):\n    \"\"\"Register Screen.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Register\")\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n        layout.setAlignment(Qt.AlignCenter)\n\n        # Register Title\n        register_label = QLabel(\"Register\")\n        register_label.setFont(QFont(font_family, 24))\n        register_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(register_label)\n\n        # Username Input\n        self.new_username_input = QLineEdit()\n        self.new_username_input.setPlaceholderText(\"Enter new username\")\n        self.new_username_input.setMinimumSize(300, 40)\n        self.new_username_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        layout.addWidget(self.new_username_input, alignment=Qt.AlignCenter)\n\n        # Password Input\n        self.new_password_input = QLineEdit()\n        self.new_password_input.setEchoMode(QLineEdit.Password)\n        self.new_password_input.setPlaceholderText(\"Enter password\")\n        self.new_password_input.setMinimumSize(300, 40)\n        self.new_password_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        layout.addWidget(self.new_password_input, alignment=Qt.AlignCenter)\n\n        # Confirm Password Input\n        self.confirm_password_input = QLineEdit()\n        self.confirm_password_input.setEchoMode(QLineEdit.Password)\n        self.confirm_password_input.setPlaceholderText(\"Confirm password\")\n        self.confirm_password_input.setMinimumSize(300, 40)\n        self.confirm_password_input.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        layout.addWidget(self.confirm_password_input, alignment=Qt.AlignCenter)\n\n        # Register Button\n        register_button = PulsingButton(\"Register\", yes_button_color, hover_color=hover_yes_button_color)\n        register_button.setMinimumSize(150, 40)\n        register_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        register_button.clicked.connect(self.handle_register)\n        layout.addWidget(register_button, alignment=Qt.AlignCenter)\n\n        # Navigate to Login\n        login_layout = QHBoxLayout()\n        login_label = QLabel(\"Already have an account?\")\n        login_button = QPushButton(\"Login\")\n        login_button.setStyleSheet(\"\"\"\n            QPushButton {\n                background-color: transparent;\n                color: #007AFF;\n                border: none;\n                text-decoration: underline;\n            }\n            QPushButton:hover {\n                color: #005BBB;\n            }\n        \"\"\")\n        login_button.setSizePolicy(QSizePolicy.Fixed, QSizePolicy.Fixed)\n        login_button.clicked.connect(lambda: self.parent().switch_screen(\"login\"))\n        login_layout.addWidget(login_label)\n        login_layout.addWidget(login_button)\n        login_layout.setAlignment(Qt.AlignCenter)\n        layout.addLayout(login_layout)\n\n        self.setLayout(layout)\n\n    def handle_register(self):\n        \"\"\"Handle user registration.\"\"\"\n        username = self.new_username_input.text().strip()\n        password = self.new_password_input.text()\n        confirm_password = self.confirm_password_input.text()\n\n        if not username or not password or not confirm_password:\n            QMessageBox.warning(self, \"Registration Failed\", \"All fields are required.\")\n            return\n\n        if self.user_exists(username):\n            QMessageBox.warning(self, \"Registration Failed\", \"Username already exists.\")\n        elif password != confirm_password:\n            QMessageBox.warning(self, \"Registration Failed\", \"Passwords do not match.\")\n        elif len(password) < 6:\n            QMessageBox.warning(self, \"Registration Failed\", \"Password must be at least 6 characters.\")\n        else:\n            hashed_password = hashlib.sha256(password.encode()).hexdigest()\n            self.save_user(username, hashed_password)\n            QMessageBox.information(self, \"Registration Successful\", f\"User '{username}' registered successfully!\")\n            self.parent().current_user = username\n            self.parent().switch_screen(\"main_menu\")\n\n    def user_exists(self, username):\n        \"\"\"Check if a user already exists in the database.\"\"\"\n        try:\n            with open(database_file, 'r') as file:\n                users_data = json.load(file)\n                return username in users_data\n        except (json.JSONDecodeError, FileNotFoundError):\n            return False\n\n    def save_user(self, username, hashed_password):\n        \"\"\"Save a new user to the database.\"\"\"\n        try:\n            with open(database_file, 'r') as file:\n                users_data = json.load(file)\n        except (json.JSONDecodeError, FileNotFoundError):\n            users_data = {}\n\n        users_data[username] = hashed_password\n\n        try:\n            with open(database_file, 'w') as file:\n                json.dump(users_data, file, indent=4)\n        except Exception as e:\n            QMessageBox.critical(self, \"Error\", f\"Failed to save user data: {e}\")\n\n# ----------------------------- Main Menu -----------------------------\n\nclass MainMenu(QWidget):\n    \"\"\"Main Menu Screen.\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle(\"Main Menu\")\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.init_ui()\n\n    def init_ui(self):\n        layout = QVBoxLayout()\n        layout.setAlignment(Qt.AlignCenter)\n        layout.setContentsMargins(50, 50, 50, 50)\n        layout.setSpacing(20)\n\n        # Main Menu Title\n        main_menu_label = QLabel(\"Main Menu\")\n        main_menu_label.setFont(QFont(font_family, 28))\n        main_menu_label.setStyleSheet(f\"color: {text_color};\")\n        main_menu_label.setAlignment(Qt.AlignCenter)\n        layout.addWidget(main_menu_label)\n\n        # Buttons Layout\n        buttons_layout = QVBoxLayout()\n        buttons_layout.setSpacing(20)\n\n        # Robot Manager Button\n        robot_manager_button = PulsingButton(\"Robot Manager\", yes_button_color, hover_color=hover_yes_button_color)\n        robot_manager_button.setMinimumSize(150, 40)\n        robot_manager_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        robot_manager_button.clicked.connect(lambda: self.parent().switch_screen(\"robot_manager\"))\n        buttons_layout.addWidget(robot_manager_button, alignment=Qt.AlignCenter)\n\n        # Watch Demo Button (Modified)\n        watch_demo_button = PulsingButton(\"Watch Demo\", yes_button_color, hover_color=hover_yes_button_color)\n        watch_demo_button.setMinimumSize(150, 40)\n        watch_demo_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        watch_demo_button.clicked.connect(self.watch_demo)  # Connect to watch_demo method\n        buttons_layout.addWidget(watch_demo_button, alignment=Qt.AlignCenter)\n\n        # Options Button\n        options_button = PulsingButton(\"Options\", yes_button_color, hover_color=hover_yes_button_color)\n        options_button.setMinimumSize(150, 40)\n        options_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        options_button.clicked.connect(self.open_options)\n        buttons_layout.addWidget(options_button, alignment=Qt.AlignCenter)\n\n        # Logout Button\n        logout_button = PulsingButton(\"Logout\", no_button_color, hover_color=hover_pale_red, is_negative=True)\n        logout_button.setMinimumSize(150, 40)\n        logout_button.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n        logout_button.clicked.connect(self.logout_user)\n        buttons_layout.addWidget(logout_button, alignment=Qt.AlignCenter)\n\n        layout.addLayout(buttons_layout)\n        self.setLayout(layout)\n\n    def watch_demo(self):\n        \"\"\"Open the demo video in a video player dialog.\"\"\"\n        if not os.path.exists(demo_video_path):\n            QMessageBox.critical(self, \"Error\", f\"Demo video not found at: {demo_video_path}\")\n            return\n        video_dialog = VideoPlayerDialog(demo_video_path, self)\n        video_dialog.exec_()\n\n    def open_options(self):\n        \"\"\"Open the options dialog.\"\"\"\n        options_dialog = OptionsDialog(self)\n        if options_dialog.exec_() == QDialog.Accepted:\n            # Handle language change if implemented\n            selected_language = options_dialog.lang_combo.currentText()\n            QMessageBox.information(self, \"Language Changed\", f\"Language set to {selected_language}.\\n(Note: Language switching is not fully implemented.)\")\n\n            # Handle color change\n            if options_dialog.selected_color:\n                self.parent().setStyleSheet(f\"background-color: {options_dialog.selected_color};\")\n\n    def logout_user(self):\n        \"\"\"Logout the current user and return to the login screen.\"\"\"\n        self.parent().current_user = None\n        self.parent().switch_screen(\"login\")\n\n# ----------------------------- Application Manager -----------------------------\n\nclass AppManager(QStackedWidget):\n    \"\"\"Manages different screens in the application.\"\"\"\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(window_title)\n        # Remove fixed size to allow resizing\n        # self.setFixedSize(window_width, window_height)\n        self.setMinimumSize(800, 600)  # Optional: set a minimum size\n        self.current_user = None  # Track the logged-in user\n\n        # Initialize screens\n        self.startup_screen = StartupScreen(self)\n        self.login_screen = LoginScreen(self)\n        self.register_screen = RegisterScreen(self)\n        self.main_menu = MainMenu(self)\n        self.robot_manager_screen = RobotManagerGUI()\n\n        # Add screens to stacked widget\n        self.addWidget(self.startup_screen)         # Index 0\n        self.addWidget(self.login_screen)           # Index 1\n        self.addWidget(self.register_screen)        # Index 2\n        self.addWidget(self.main_menu)              # Index 3\n        self.addWidget(self.robot_manager_screen)   # Index 4\n\n        self.setCurrentIndex(0)  # Show startup screen first\n\n    def switch_screen(self, screen_name):\n        \"\"\"Switch to the specified screen.\"\"\"\n        screen_map = {\n            \"startup\": 0,\n            \"login\": 1,\n            \"register\": 2,\n            \"main_menu\": 3,\n            \"robot_manager\": 4,\n            # Add other screens here as needed\n            # \"structure_preview\": 5,   # Placeholder indices for other screens\n            # \"station_preview\": 6      # Adjust as per actual implementation\n        }\n\n        index = screen_map.get(screen_name)\n        if index is not None and index < self.count():\n            self.setCurrentIndex(index)\n        else:\n            QMessageBox.warning(self, \"Navigation Error\", f\"Screen '{screen_name}' does not exist.\")\n\n    def open_robot_manager(self):\n        \"\"\"Open the Robot Manager screen.\"\"\"\n        self.robot_manager_screen.update_robot_list()\n        self.switch_screen(\"robot_manager\")\n\n    def resizeEvent(self, event):\n        \"\"\"Handle window resize events if necessary.\"\"\"\n        # Optionally, implement global resize handling here\n        super().resizeEvent(event)\n\n# ----------------------------- Run Hops Server -----------------------------\n\ndef run_hops_server():\n    \"\"\"Run the Hops server.\"\"\"\n    # Start Hops server on a separate thread\n    hops.start(port=5000)  # Corrected method from 'serve' to 'start'\n\n# ----------------------------- Main Execution -----------------------------\n\ndef main():\n    # Start Hops server in a separate thread\n    hops_thread = threading.Thread(target=run_hops_server, daemon=True)\n    hops_thread.start()\n\n    # Start the PyQt5 GUI\n    app = QApplication(sys.argv)\n    manager = AppManager()\n    manager.show()  # Launches the window in resizable mode\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    main()\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}