{
  "source_url": "https://discourse.mcneel.com/t/v7-bug-in-running-script-from-button-esc-is-not-released/116985",
  "topic_id": 116985,
  "title": "V7 bug in running script from button, ESC is not released",
  "question": "Hi guys, I have a script that runs just fine from the editor, but when I put it in a button I can only RUN IT ONCE if I hit ESC.\n\nIt appears that the ESC registration is not released, so next time I run it it terminates prematurely.\n\n\nTry putting this in a button:\n\n\n! _NoEcho  _-RunPythonScript (\n\nimport scriptcontext\nimport rhinoscriptsyntax as rs\n\nn = 0\nlimit = 100\nwhile True:\n    rs.Prompt(\"test \"+str(n)+\" of \"+str(limit)+\" (Press ESC to terminate)\")\n    n += 1\n    rs.Sleep(100)\n    if n> limit:\n        break\n    \n    if scriptcontext.escape_test(False):\n        print \"ESC pressed\"\n        break #get out of the loop\nprint \"Done\"\n\n)",
  "code_blocks": [
    {
      "code": "!_NoEcho _-ScriptEditor _Run (\n#! python 3\nimport scriptcontext\nimport rhinoscriptsyntax as rs\n\nn = 0\nlimit = 100\nwhile True:\n    rs.Prompt(\"test \"+str(n)+\" of \"+str(limit)+\" (Press ESC to terminate)\")\n    n += 1\n    rs.Sleep(100)\n    if n> limit:\n        break\n    \n    if scriptcontext.escape_test(False):\n        print(\"ESC pressed\")\n        break #get out of the loop\nprint(\"Done\")\n)",
      "language": "python",
      "author": "eirannejad",
      "post_number": 5,
      "is_solution": false
    },
    {
      "code": "! _NoEcho  _-RunPythonScript (\n\nimport scriptcontext\nimport rhinoscriptsyntax as rs\n\nn = 0\nlimit = 100\nwhile True:\n    rs.Prompt(\"test \"+str(n)+\" of \"+str(limit)+\" (Press ESC to terminate)\")\n    n += 1\n    rs.Sleep(100)\n    if n> limit:\n        break\n    \n    if scriptcontext.escape_test(False):\n        print \"ESC pressed\"\n        break #get out of the loop\nprint \"Done\"\n\n)",
      "language": "python",
      "author": "Holo",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "python",
    "rhinoscriptsyntax"
  ],
  "has_accepted_answer": false,
  "category_id": 3,
  "posts_count": 5,
  "views": 264
}