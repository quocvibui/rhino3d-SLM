{
  "source_url": "https://github.com/fromenlab/LatticeTools/blob/4ed52adaf55fdab72c4b6c9566f011a3bdc9f8d3/log/write_file.py",
  "repo": "fromenlab/LatticeTools",
  "repo_stars": 1,
  "repo_description": "Components for generating lattice structures in Rhino®/Grasshopper®",
  "license": "NOASSERTION",
  "filepath": "log/write_file.py",
  "instruction": "Write file",
  "code": "from ghpythonlib.componentbase import dotnetcompiledcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\nimport scriptcontext\nimport os\n\ndef write_lines(file, content):\n    for line in content:\n        file.write(line)\n    file.close()\n\nclass Logger(component):\n    def __new__(cls):\n        instance = Grasshopper.Kernel.GH_Component.__new__(cls,\n            \"Logging - Write\", \"Logger\", \"\"\"Writes text input to a file.\"\"\", \"LatticeTools\", \"Log\")\n        return instance\n    \n    def get_ComponentGuid(self):\n        return System.Guid(\"6d167ea1-8f3c-4773-b48e-50d49cfbecbb\")\n    \n    def SetUpParam(self, p, name, nickname, description):\n        p.Name = name\n        p.NickName = nickname\n        p.Description = description\n        p.Optional = True\n    \n    def RegisterInputParams(self, pManager):\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\n        self.SetUpParam(p, \"file_path\", \"file_path\", \"Path to the file to write\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_String()\n        self.SetUpParam(p, \"content\", \"content\", \"Content to write to the file\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.list\n        self.Params.Input.Add(p)\n        \n        p = Grasshopper.Kernel.Parameters.Param_Boolean()\n        self.SetUpParam(p, \"write_file\", \"write_file\", \"Write the file?\")\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        self.Params.Input.Add(p)\n        \n    \n    def RegisterOutputParams(self, pManager):\n        pass    \n    def SolveInstance(self, DA):\n        p0 = self.marshal.GetInput(DA, 0)\n        p1 = self.marshal.GetInput(DA, 1)\n        p2 = self.marshal.GetInput(DA, 2)\n        result = self.RunScript(p0, p1, p2)\n\n        \n    def get_Internal_Icon_24x24(self):\n        o = \"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAK+SURBVEhLpZZdSFNhHMYHXXSh1EUQdWVE2Me0pX0ILUqLTKGPhaJkUlKxnPYhQ6ddNE1FBNOKIFNBsDRsWjbd1rQtt1Fz0605J34SFEGEJhSRRaBP27tz9Mwdj0d94Hd33t+z/f8vnCPwJeOyNHX/gYOfxIdjZ4/FJ2K5xB0/gc0bN/3NjTo0dVskHg4LDT1LxL6oVKo1Ebv3THdabHAMfVwZA6MYbnyFibSbmDh3A5aE89+2hKxLIQVpF69kX5cr2A/yYXAc3ToTXhqsGG7WBpSEha6XCCTJKVXl9x6yH+ZBp1esMfcSFpb4xhVQYPeM401PPy+MPU5M9Crgsb0lYrYShTDGE1Cgf+9EjUq7JHUtHfhsuQY4TmHGIYHb0BFU0lV2/9eGtSGxyx6Rc2gMP1wFRE4z03cGri71fEmL5p9w246TZMnMApNjECq9ZVFa9d34as0JkDNLrIZ2NDxtnQ0P25pI5L7wLeCS0/SrL2C7MPIPpfaHz4jYxrIQd3s6svKVCN8lnKbU/iy1ZOZCF4OWS/MKuQsWXlOD9QO+2+WsUhqmXFZQjAhR1BSl9oerwKZrw6RGxir2wZTnKMuhM9sQHb3vC6X2h2tE7voyjNYXs5Yw5bkllTA7PMTBWcDEZbcTOc2kJpNVXvG4wfvPx+bOcRYwr6mxqTaggC4Z7PDLryqKUFHbSJ7VWvqWV/D8tRmVcilGGHJHTTEelRVBll+IrFslqG5qm/sxvAto1F0m7BTtRXVBFp5U3EGhsoiMw4eitApGmyvgeSa8lny37hnSZXJIc5Xk6uV5l1j6oBYNL3SwukeCpEw4C+hrqn/nRLPWCFPfQJBgKXiNaDUEFaz6lclA3WmC+EjcAKX2h3rp/17VS99Lj3c3kuRUXMrMTqLU8yGfLTHiFX+2HI1PQKQo6ufppJQaSklFIPgPELblPd+Nc7MAAAAASUVORK5CYII=\"\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\n\n    def RunScript(self, file_path, content, write_file):\n        ghdoc = scriptcontext.doc\n\n        if write_file and file_path:\n            # working_dir = os.path.dirname(os.path.realpath(ghdoc.Path))\n            # file_path = os.path.join(working_dir, file_path)\n\n            if (os.path.exists(file_path)):\n                file = open(file_path, \"a\")\n                if (os.stat(file_path).st_size != 0):\n                    file.write(\",\" + \"\\n\")           \n                write_lines(file, content)\n\n            else:\n                file = open(file_path, \"w\")\n                write_lines(file, content)",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}