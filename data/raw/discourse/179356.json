{
  "source_url": "https://discourse.mcneel.com/t/problem-using-cpython-libraries/179356",
  "topic_id": 179356,
  "title": "Problem using CPython Libraries",
  "question": "Hello,\n\n\nI have some issues using Cpython libraries. I would like to use libraries in python as usual by installing them with pip, but even the pre-existing exemple with numpy doesn’t work.\n\n\nI get this error :\n\nTraceback (most recent call last):\n\nFile “file:///C:/Users/**\n/test.py\", line 3, in \n\nFile \"C:\\Users*\n.rhinocode\\py39-rh8\\site-envs\\default-HL8Gx7po\\numpy_\ninit\n_.py”, line 164, in \n\nraise ImportError(msg) from e\n\nImportError: Error importing numpy: you should not try to import numpy from\n\nits source directory; please exit the numpy source tree, and relaunch\n\nyour python interpreter from there.\n\n\nI tried to install numpy in the proper folder with the pip in rhino’s python install and it seems to be already installed :\n\n\nRequirement already satisfied: numpy in c:\\users*******.rhinocode\\py39-rh8\\lib\\site-packages\n\n\nAnd when i check the sys.path i got many path inculding this one :\n\n\n‘C:\\Users\\********\\.rhinocode\\py39-rh8\\lib\\site-packages’\n\n\nAlso if i run “import numpy” directly throught the python.exe in .rhinocode it work perfectly !\n\n\nSo if somebody has a solution it would be really helpfull !\n\n\nThanks",
  "code_blocks": [
    {
      "code": "\"\"\"Grasshopper Script\"\"\"\n#! python 3\n# venv: site-packages\n# r: numpy\n# r: scipy\n# r: networkx\n\n__author__ = \"Brian\"\n__version__ = \"2024.06.22\"\n\nimport rhinoscriptsyntax as rs\nimport scriptcontext as sc\nimport Rhino.Geometry as rg\nimport ghpythonlib.treehelpers as th\nimport csv\nimport os\nimport math\nimport scipy as sp\nimport numpy as np\nimport networkx as nx\n#import scipy.stats as spst\n\nnumpy_version = np.__version__\nscipy_version = sp.__version__\n\nprint(f\"numpy version is {numpy_version}\\n\")\nprint(f\"scipy version is {scipy_version}\\n\")\n\ndist = sp.stats.norm()",
      "language": "python",
      "author": "brian9",
      "post_number": 23,
      "is_solution": false
    },
    {
      "code": "numpy version is 2.0.0\n\nscipy version is 1.13.1\n\nTraceback (most recent call last):\n  File \"rhinocode:///grasshopper/1/3f34b412-d348-41b4-a514-a5443794ff16/bd5293a5-7390-4539-9d9c-4c83d0c842c8\", line 31, in <module>\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\__init__.py\", line 162, in __getattr__\n    return _importlib.import_module(f'scipy.{name}')\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\importlib\\__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\stats\\__init__.py\", line 606, in <module>\n    from ._stats_py import *\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\stats\\_stats_py.py\", line 37, in <module>\n    from scipy import sparse\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\sparse\\__init__.py\", line 294, in <module>\n    from ._base import *\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\sparse\\_base.py\", line 5, in <module>\n    from scipy._lib._util import VisibleDeprecationWarning\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\_lib\\_util.py\", line 18, in <module>\n    from scipy._lib._array_api import array_namespace\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\_lib\\_array_api.py\", line 17, in <module>\n    from scipy._lib.array_api_compat import (\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\scipy\\_lib\\array_api_compat\\numpy\\__init__.py\", line 1, in <module>\n    from numpy import *\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\numpy\\f2py\\__init__.py\", line 19, in <module>\n    from . import f2py2e\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\numpy\\f2py\\f2py2e.py\", line 23, in <module>\n    from . import crackfortran\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\numpy\\f2py\\crackfortran.py\", line 159, in <module>\n    from .auxfuncs import *\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\numpy\\f2py\\auxfuncs.py\", line 19, in <module>\n    from . import cfuncs\n  File \"C:\\Users\\brian\\.rhinocode\\py39-rh8\\lib\\site-packages\\numpy\\f2py\\cfuncs.py\", line 19, in <module>\n    errmess = sys.stderr.write\nAttributeError: 'NoneType' object has no attribute 'write'",
      "language": "csharp",
      "author": "brian9",
      "post_number": 23,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "grasshopper",
    "python",
    "rhinocommon",
    "rhinoscriptsyntax",
    "transformation"
  ],
  "has_accepted_answer": true,
  "category_id": 115,
  "posts_count": 23,
  "views": 2031
}