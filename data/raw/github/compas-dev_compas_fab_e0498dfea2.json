{
  "source_url": "https://github.com/compas-dev/compas_fab/blob/431e82c810ea299b9727b010b73a39abc73c5d62/src/compas_fab/ghpython/components/Cf_AttachTool/code.py",
  "repo": "compas-dev/compas_fab",
  "repo_stars": 124,
  "repo_description": "Robotic fabrication package for the COMPAS Framework.",
  "license": "MIT",
  "filepath": "src/compas_fab/ghpython/components/Cf_AttachTool/code.py",
  "instruction": "Attach a tool to the robot.",
  "code": "\"\"\"\nAttach a tool to the robot.\n\nCOMPAS FAB v1.0.2\n\"\"\"\n\nfrom compas.geometry import Frame\nfrom compas_rhino.conversions import mesh_to_compas\nfrom compas_rhino.conversions import plane_to_compas_frame\nfrom ghpythonlib.componentbase import executingcomponent as component\n\nfrom compas_fab.robots import Tool\n\n\nclass AttachToolComponent(component):\n    def RunScript(self, robot, visual_mesh, collision_mesh, tcf_plane, group, connected_to):\n        if robot and robot.client and robot.client.is_connected and visual_mesh:\n            if not collision_mesh:\n                collision_mesh = visual_mesh\n\n            c_visual_mesh = mesh_to_compas(visual_mesh)\n            c_collision_mesh = mesh_to_compas(collision_mesh)\n\n            if not tcf_plane:\n                frame = Frame.worldXY()\n            else:\n                frame = plane_to_compas_frame(tcf_plane)\n            tool = Tool(c_visual_mesh, frame, c_collision_mesh, connected_to=connected_to)\n\n            robot.attach_tool(tool, group)\n\n        return robot\n",
  "language": "python",
  "imports": [
    "ghpythonlib"
  ],
  "has_docstring": true
}