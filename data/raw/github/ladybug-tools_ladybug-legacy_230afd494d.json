{
  "source_url": "https://github.com/ladybug-tools/ladybug-legacy/blob/d90db02f2776febbb38100dea26ec0c93e77aa53/src/Ladybug_View%20From%20Sun.py",
  "repo": "ladybug-tools/ladybug-legacy",
  "repo_stars": 202,
  "repo_description": ":beetle: Ladybug is an environmental plugin for Grasshopper.",
  "license": "NOASSERTION",
  "filepath": "src/Ladybug_View From Sun.py",
  "instruction": "Use this component to open a new viewport in Rhino that shows the view from the sun.  This is useful for understanding what parts of Rhino geometry are shaded at a particular hour of the...",
  "code": "# This component opens a new viewport that shows the view from sun.\n#\n# Ladybug: A Plugin for Environmental Analysis (GPL) started by Mostapha Sadeghipour Roudsari\n# \n# This file is part of Ladybug.\n# \n# Copyright (c) 2013-2020, Mostapha Sadeghipour Roudsari <mostapha@ladybug.tools> \n# Ladybug is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# Ladybug is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# You should have received a copy of the GNU General Public License\n# along with Ladybug; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n\n\n\"\"\"\nUse this component to open a new viewport in Rhino that shows the view from the sun.  This is useful for understanding what parts of Rhino geometry are shaded at a particular hour of the day.\n-\nProvided by Ladybug 0.0.69\n    \n    Args:\n        _sunVector: A sun vector from which the the Rhino view will be generated. Use the Ladybug sunPath component to generate sunVectors.\n        _cenPt_: The target point of the camera for the Rhino view that will be generated.  This point should be close to Rhino geometry that you are interested in viewing from the sun. If no point is progived, the Rhino origin will be used (0,0,0).\n        sunViewPt_: An optional point for the camera position (or sun position). Use this to move the camera closer to the geometry you would like to view if the initial view is too far away..\n        width_: An optional interger that represents the width (in pixels) of the Rhino viewport that will be generated.\n        height_: An optional interger that represents the height (in pixels) of the Rhino viewport that will be generated.\n        dispMode_: An optional text input for the display mode of the Rhino viewport that will be generated. For example: Wireframe, Shaded, Rendered, etc.\n    Returns:\n        readMe!: ...\n\"\"\"\nghenv.Component.Name = \"Ladybug_View From Sun\"\nghenv.Component.NickName = 'viewFromSun'\nghenv.Component.Message = 'VER 0.0.69\\nJUL_07_2020'\nghenv.Component.IconDisplayMode = ghenv.Component.IconDisplayMode.application\nghenv.Component.Category = \"LB-Legacy\"\nghenv.Component.SubCategory = \"3 | EnvironmentalAnalysis\"\n#compatibleLBVersion = VER 0.0.59\\nFEB_01_2015\ntry: ghenv.Component.AdditionalHelpFromDocStrings = \"2\"\nexcept: pass\n\n\nimport scriptcontext as sc\nimport Rhino as rc\nimport rhinoscriptsyntax as rs\nimport System\n\ndef main(sunVector, cenPt, sunPosition, dispModeStr, width, height, compGuid):\n    \n    viewName = 'viewFromSun_' + compGuid\n    isView = rc.RhinoDoc.ActiveDoc.Views.Find(viewName, False)\n    \n    if isView and width and  width != sc.doc.Views.ActiveView.ActiveViewport.Size.Width + 16: isView = False\n    elif isView and height and  height != sc.doc.Views.ActiveView.ActiveViewport.Size.Height + 34: isView = False\n    \n    if not isView:\n        # if view is not already created creat a new floating view\n        # Thanks to Florian for his help (http://www.grasshopper3d.com/forum/topics/new-floating-viewport-using-rhinocommon)\n        if not width: w = sc.doc.Views.ActiveView.ActiveViewport.Size.Width\n        else: w = width\n        if not height: h = sc.doc.Views.ActiveView.ActiveViewport.Size.Height\n        else: h = height\n        # print w,h\n        if rc.RhinoDoc.ActiveDoc.Views.Find(viewName, False)!= None: rc.RhinoDoc.ActiveDoc.Views.Find(viewName, False).Close()\n        \n        x = round((System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width - w) / 2)\n        y = round((System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height - h) / 2)\n        rectangle = System.Drawing.Rectangle(System.Drawing.Point(x, y), System.Drawing.Size(w, h))\n        newRhinoView = rc.RhinoDoc.ActiveDoc.Views.Add(viewName, rc.Display.DefinedViewportProjection.Perspective, rectangle, True)\n        if newRhinoView:\n            newRhinoView.TitleVisible = True;\n            isView = rc.RhinoDoc.ActiveDoc.Views.Find(viewName, False)\n    \n    rc.RhinoDoc.ActiveDoc.Views.ActiveView = isView\n    \n    try:\n        dispMode = rc.Display.DisplayModeDescription.FindByName(dispModeStr)\n        sc.doc.Views.ActiveView.ActiveViewport.DisplayMode = dispMode\n    except: pass\n    \n    # modify the view\n    sc.doc.Views.ActiveView.ActiveViewport.ChangeToParallelProjection(True)\n    sc.doc.Views.ActiveView.ActiveViewport.SetCameraLocation(sunPosition, False)\n    sc.doc.Views.ActiveView.ActiveViewport.SetCameraTarget(cenPt, False)\n    sc.doc.Views.ActiveView.ActiveViewport.SetCameraDirection(sunVector, False)\n    \n    print 'view name = ' + viewName\n    \nif _sunVector!=None:\n    if _cenPt_==None: _cenPt_ = rc.Geometry.Point3d.Origin\n    if sunViewPt_!=None: sunPosition = sunViewPt_\n    else: sunPosition = rc.Geometry.Point3d.Add(_cenPt_, _sunVector)\n    main(_sunVector, _cenPt_, sunPosition, dispMode_, width_, height_, ghenv.Component.GetHashCode().ToString())\nelse:\n    print \"sunVector is missing.\"\n",
  "language": "python",
  "imports": [
    "Rhino",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}