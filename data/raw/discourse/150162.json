{
  "source_url": "https://discourse.mcneel.com/t/please-fix-rs-joinsurfaces-for-v8/150162",
  "topic_id": 150162,
  "title": "Please fix rs.JoinSurfaces for V8",
  "question": "Right now rs.JoinSurfaces() is a really dumb function - and it doesn’t need to be.  The current wrapper code is this:\n\n\ndef JoinSurfaces(object_ids, delete_input=False):\n    \"\"\"Joins two or more surface or polysurface objects together to form one\n    polysurface object\n    Parameters:\n      object_ids ([guid, ...]) list of object identifiers\n      delete_input (bool, optional): Delete the original surfaces\n    Returns:\n      guid: identifier of newly created object on success\n      None: on failure\n    Example:\n      import rhinoscriptsyntax as rs\n      objs = rs.GetObjects(\"Select surfaces in order\", rs.filter.surface)\n      if objs and len(objs)>1: rs.JoinSurfaces(objs)\n    See Also:\n      ExplodePolysurfaces\n      IsPolysurface\n      IsPolysurfaceClosed\n      IsSurface\n      IsSurfaceClosed\n    \"\"\"\n    breps = [rhutil.coercebrep(id, True) for id in object_ids]\n    if len(breps)<2: return scriptcontext.errorhandler()\n    tol = scriptcontext.doc.ModelAbsoluteTolerance * 2.1\n    joinedbreps = Rhino.Geometry.Brep.JoinBreps(breps, tol)\n    if joinedbreps is None or len(joinedbreps)!=1:\n        return scriptcontext.errorhandler()\n    rc = scriptcontext.doc.Objects.AddBrep(joinedbreps[0])\n    if rc==System.Guid.Empty: return scriptcontext.errorhandler()\n    if delete_input:\n        for id in object_ids:\n            id = rhutil.coerceguid(id)\n            scriptcontext.doc.Objects.Delete(id, True)\n    scriptcontext.doc.Views.Redraw()\n    return rc\n\n\n\nThe problem is here:\n\n\n\n\nimage\n925×381 31.8 KB\n\n\n\n\nThe result is thus forced to be \nexactly one brep\n, and if it isn’t, the script simply fails and returns \nNone\n.\n\n\nBut Rhino.Geometry.Brep.JoinBreps() is perfectly capable of joining a collection of diverse breps, it joins what it can and returns a list of both the joined parts plus anything that was not able to be joined.  Unfortunately the line above simply throws out any result of this method other than one single joined brep.\n\n\nIf you can’t change this method, please add ...",
  "code_blocks": [
    {
      "code": "def JoinSurfaces(object_ids, delete_input=False):\n    \"\"\"Joins two or more surface or polysurface objects together to form one\n    polysurface object\n    Parameters:\n      object_ids ([guid, ...]) list of object identifiers\n      delete_input (bool, optional): Delete the original surfaces\n    Returns:\n      guid: identifier of newly created object on success\n      None: on failure\n    Example:\n      import rhinoscriptsyntax as rs\n      objs = rs.GetObjects(\"Select surfaces in order\", rs.filter.surface)\n      if objs and len(objs)>1: rs.JoinSurfaces(objs)\n    See Also:\n      ExplodePolysurfaces\n      IsPolysurface\n      IsPolysurfaceClosed\n      IsSurface\n      IsSurfaceClosed\n    \"\"\"\n    breps = [rhutil.coercebrep(id, True) for id in object_ids]\n    if len(breps)<2: return scriptcontext.errorhandler()\n    tol = scriptcontext.doc.ModelAbsoluteTolerance * 2.1\n    joinedbreps = Rhino.Geometry.Brep.JoinBreps(breps, tol)\n    if joinedbreps is None or len(joinedbreps)!=1:\n        return scriptcontext.errorhandler()\n    rc = scriptcontext.doc.Objects.AddBrep(joinedbreps[0])\n    if rc==System.Guid.Empty: return scriptcontext.errorhandler()\n    if delete_input:\n        for id in object_ids:\n            id = rhutil.coerceguid(id)\n            scriptcontext.doc.Objects.Delete(id, True)\n    scriptcontext.doc.Views.Redraw()\n    return rc",
      "language": "python",
      "author": "Helvetosaur",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "file-io",
    "geometry",
    "python",
    "rhinocommon",
    "rhinoscriptsyntax",
    "selection"
  ],
  "has_accepted_answer": false,
  "category_id": 11,
  "posts_count": 3,
  "views": 730
}