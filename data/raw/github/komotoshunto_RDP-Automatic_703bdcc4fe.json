{
  "source_url": "https://github.com/komotoshunto/RDP-Automatic/blob/680b2cc9081582547d1b37440ec7ea97a94a14ea/%E9%96%A2%E6%95%B0/%E5%A3%81%E3%81%AE%E8%A7%92%E5%BA%A6%E3%81%8B%E3%82%89%E9%9B%A8%E3%81%AE%E5%8F%97%E3%81%91%E3%82%8B%E9%87%8F%E3%81%AE%E4%BF%82%E6%95%B0%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B.py",
  "repo": "komotoshunto/RDP-Automatic",
  "repo_stars": 0,
  "repo_description": "雨水排水計画を自動化するツール",
  "license": "unknown",
  "filepath": "関数/壁の角度から雨の受ける量の係数を求める.py",
  "instruction": "Input rain_angle, Item Access, float roof, List Access, Brep",
  "code": "#Input\n#rain_angle, Item Access, float\n#roof, List Access, Brep\n\n#Output\n#a, 係数\n\n#屋根の面積に係数をかける\n\n\nimport rhinoscriptsyntax as rs\nimport Rhino.Geometry as rg\nimport math\n\n#壁の角度から雨の受ける量の係数を求める関数\n#rain_angle(垂直に落ちる：0, 日本設計最大入射角：30)\ndef rain_area_adju(normal_vec, rain_angle):\n    z = normal_vec[2]    \n    wall_angle = round(math.degrees(math.acos(z)), 5)\n    max_wall_angle = 90 + rain_angle\n    if wall_angle >= 0 and wall_angle < rain_angle:\n        k = 1\n    elif wall_angle < max_wall_angle and wall_angle >= rain_angle:\n        result = math.sin(math.radians(90 - wall_angle + rain_angle))\n        k = round(result, 5)\n    elif wall_angle >= max_wall_angle:\n        k = 0\n    return k\n\na = []\nfor k in roof:\n    brepface = k.Faces\n    normal_vec = rg.Surface.NormalAt(brepface[0], 0.5, 0.5)\n    k = rain_area_adju(normal_vec, rain_angle)\n    a.append(k)\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}