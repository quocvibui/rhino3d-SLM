{
  "source_url": "https://github.com/ksteinfe/decodes/blob/b876d6d01ea23ccbf4558182582a822b008cf2b8/src/decodes/io/rhinoscript/plane.py",
  "repo": "ksteinfe/decodes",
  "repo_stars": 43,
  "repo_description": "a platform agnostic generative design library for 3d designers",
  "license": "GPL-3.0",
  "filepath": "src/decodes/io/rhinoscript/plane.py",
  "instruction": null,
  "code": "from . import utility as rhutil\nimport Rhino.Geometry\nimport scriptcontext\nimport math\n\ndef DistanceToPlane(plane, point):\n    \"Returns the distance from a 3D point to a plane\"\n    plane = rhutil.coerceplane(plane, True)\n    point = rhutil.coerce3dpoint(point, True)\n    return plane.DistanceTo(point)\n\n\ndef EvaluatePlane(plane, parameter):\n    \"\"\"Evaluates a plane at a U,V parameter\n    Parameters:\n      plane = the plane to evaluate\n      parameter = list of two numbers defining the U,V parameter to evaluate\n    Returns:\n      Point3d on success\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    return plane.PointAt(parameter[0], parameter[1])\n\n\ndef IntersectPlanes(plane1, plane2, plane3):\n    \"\"\"Calculates the intersection of three planes\n    Returns:\n      Point3d on success\n      None on error\n    \"\"\"\n    plane1 = rhutil.coerceplane(plane1, True)\n    plane2 = rhutil.coerceplane(plane2, True)\n    plane3 = rhutil.coerceplane(plane3, True)\n    rc, point = Rhino.Geometry.Intersect.Intersection.PlanePlanePlane(plane1, plane2, plane3)\n    if rc: return point\n    return scriptcontext.errorhandler()\n\n\ndef MovePlane(plane, origin):\n    \"\"\"Moves the origin of a plane\n    Parameters:\n      plane = Plane or ConstructionPlane\n      origin = Point3d or list of three numbers\n    Returns:\n      moved plane\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    origin = rhutil.coerce3dpoint(origin, True)\n    rc = Rhino.Geometry.Plane(plane)\n    rc.Origin = origin\n    return rc\n\n\ndef PlaneClosestPoint(plane, point, return_point=True):\n    \"\"\"Returns the point on a plane that is closest to a test point.\n    Parameters:\n      plane = The plane\n      point = The 3-D point to test.\n      return_point [opt] = If omitted or True, then the point on the plane\n         that is closest to the test point is returned. If False, then the\n         parameter of the point on the plane that is closest to the test\n         point is returned.\n    Returns:\n      If return_point is omitted or True, then the 3-D point\n      If return_point is False, then an array containing the U,V parameters\n      of the point\n      None if not successful, or on error.\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    point = rhutil.coerce3dpoint(point, True)\n    if return_point:\n        return plane.ClosestPoint(point)\n        if rc.IsValid: return rc\n    else:\n        rc, s, t = plane.ClosestParameter(point)\n        if rc: return s, t\n    return scriptcontext.errorhandler()\n\n\ndef PlaneEquation(plane):\n    \"\"\"Returns the equation of a plane as a tuple of four numbers. The standard\n    equation of a plane with a non-zero vector is Ax+By+Cz+D=0\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    rc = plane.GetPlaneEquation()\n    return rc[0], rc[1], rc[2], rc[3]\n\n\ndef PlaneFitFromPoints(points):\n    \"\"\"Returns a plane that was fit through an array of 3D points.\n    Parameters:\n    points = An array of 3D points.\n    Returns: \n      The plane if successful\n      None if not successful\n    \"\"\"\n    points = rhutil.coerce3dpointlist(points, True)\n    rc, plane = Rhino.Geometry.Plane.FitPlaneToPoints(points)\n    if rc==Rhino.Geometry.PlaneFitResult.Success: return plane\n    return scriptcontext.errorhandler()\n\n\ndef PlaneFromFrame(origin, x_axis, y_axis):\n    \"\"\"Construct a plane from a point, and two vectors in the plane.\n    Parameters:\n      origin = A 3D point identifying the origin of the plane.\n      x_axis = A non-zero 3D vector in the plane that determines the X axis\n               direction.\n      y_axis = A non-zero 3D vector not parallel to x_axis that is used\n               to determine the Y axis direction. Note, y_axis does not\n               have to be perpendicular to x_axis.\n    Returns:\n      The plane if successful. \n      None if not successful\n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    x_axis = rhutil.coerce3dvector(x_axis, True)\n    y_axis = rhutil.coerce3dvector(y_axis, True)\n    return Rhino.Geometry.Plane(origin, x_axis, y_axis)\n\n\ndef PlaneFromNormal(origin, normal, xaxis=None):\n    \"\"\"Creates a plane from an origin point and a normal direction vector.\n    Parameters:\n      origin = A 3D point identifying the origin of the plane.\n      normal = A 3D vector identifying the normal direction of the plane.\n      xaxis[opt] = optional vector defining the plane's x-axis\n    Returns:\n      The plane if successful.\n      None if not successful, or on error.  \n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    normal = rhutil.coerce3dvector(normal, True)\n    rc = Rhino.Geometry.Plane(origin, normal)\n    if xaxis:\n        xaxis = rhutil.coerce3dpoint(xaxis, True)\n        projected_start = rc.ClosestPoint(Rhino.Geometry.Point3d(0,0,0))\n        projected_end = rc.ClosestPoint(xaxis)\n        xaxis = projected_end - projected_start\n        if xaxis.IsValid and not xaxis.IsParallelTo(rc.YAxis):\n            rc = Rhino.Geometry.Plane(origin, xaxis, rc.YAxis)\n    return rc\n\n\ndef PlaneFromPoints(origin, x, y):\n    \"\"\"Creates a plane from three non-colinear points\n    Parameters:\n      origin = origin point of the plane\n      x, y = points on the plane's x and y axes\n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    x = rhutil.coerce3dpoint(x, True)\n    y = rhutil.coerce3dpoint(y, True)\n    plane = Rhino.Geometry.Plane(origin, x, y)\n    if plane.IsValid: return plane\n    return scriptcontext.errorhandler()\n\n\ndef PlanePlaneIntersection(plane1, plane2):\n    \"\"\"Calculates the intersection of two planes\n    Paramters:\n      plane1, plane2 = two planes\n    Returns:\n      two 3d points identifying the starting/ending points of the intersection\n      None on error\n    \"\"\"\n    plane1 = rhutil.coerceplane(plane1, True)\n    plane2 = rhutil.coerceplane(plane2, True)\n    rc, line = Rhino.Geometry.Intersect.Intersection.PlanePlane(plane1, plane2)\n    if rc: return line.From, line.To\n    return scriptcontext.errorhandler()\n\n\ndef PlaneSphereIntersection(plane, sphere_plane, sphere_radius):\n    \"\"\"Calculates the intersection of a plane and a sphere\n    Parameters:\n      plane = the plane to intersect\n      sphere_plane = equitorial plane of the sphere. origin of the plane is\n        the center of the sphere\n      sphere_radius = radius of the sphere\n    Returns:\n      list of intersection results - see help\n      None on error\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    sphere_plane = rhutil.coerceplane(sphere_plane, True)\n    sphere = Rhino.Geometry.Sphere(sphere_plane, sphere_radius)\n    rc, circle = Rhino.Geometry.Intersect.Intersection.PlaneSphere(plane, sphere)\n    if rc==Rhino.Geometry.Intersect.PlaneSphereIntersection.Point:\n        return 0, circle.Center\n    if rc==Rhino.Geometry.Intersect.PlaneSphereIntersection.Circle:\n        return 1, circle.Plane, circle.Radius\n    return scriptcontext.errorhandler()\n\n\ndef PlaneTransform(plane, xform):\n    \"\"\"Transforms a plane\n    Parameters:\n      plane = OnPlane or On3dmConstructionPlane\n      xform = \n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    xform = rhutil.coercexform(xform, True)\n    rc = Rhino.Geometry.Plane(plane)\n    if rc.Transform(xform): return rc\n    return scriptcontext.errorhandler()\n\n\ndef RotatePlane(plane, angle_degrees, axis):\n    \"\"\"Rotates a plane\n    Parameters:\n      plane = OnPlane or On3dmConstructionPlane\n      angle_degrees = rotation angle in degrees\n      axis = On3dVector or list of three numbers\n    Returns:\n      rotated plane on success\n      None on error\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    axis = rhutil.coerce3dvector(axis, True)\n    angle_radians = math.radians(angle_degrees)\n    rc = Rhino.Geometry.Plane(plane)\n    if rc.Rotate(angle_radians, axis): return rc\n    return scriptcontext.errorhandler()\n\n\ndef WorldXYPlane():\n    \"Returns Rhino's world XY plane\"\n    return Rhino.Geometry.Plane.WorldXY\n\n\ndef WorldYZPlane():\n    \"Returns Rhino's world YZ plane\"\n    return Rhino.Geometry.Plane.WorldYZ\n\n\ndef WorldZXPlane():\n    \"Returns Rhino's world ZX plane\"\n    return Rhino.Geometry.Plane.WorldZX\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "scriptcontext"
  ],
  "has_docstring": false
}