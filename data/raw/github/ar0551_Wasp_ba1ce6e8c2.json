{
  "source_url": "https://github.com/ar0551/Wasp/blob/66f63c018f2420d37aa451ade0178de260946b0c/src/wasp/utilities/utilities.py",
  "repo": "ar0551/Wasp",
  "repo_stars": 67,
  "repo_description": "Combinatorial Design with Grasshopper plug-in (LGPL) initiated by Andrea Rossi",
  "license": "LGPL-3.0",
  "filepath": "src/wasp/utilities/utilities.py",
  "instruction": "(C) 2017-2020 Andrea Rossi <ghwasp@gmail.com>",
  "code": "\"\"\"\n(C) 2017-2020 Andrea Rossi <ghwasp@gmail.com>\n\nThis file is part of Wasp. https://github.com/ar0551/Wasp\n@license GPL-3.0 <https://www.gnu.org/licenses/gpl.html>\n\n@version 0.6.001\n\nUtilities\n\"\"\"\n\nfrom Rhino.Geometry import Mesh\nfrom Rhino.Geometry import Plane\nfrom Rhino.Geometry import Vector3d, Point3d\nfrom Rhino.Geometry import LineCurve\nfrom Rhino.Geometry import Transform\n\n\n#################################################################### Utilities ####################################################################\nreserved_chars = \"_|> \"\n\ndef mesh_to_data(mesh):\n\tdata = {}\n\tvertices = []\n\tfor v in mesh.Vertices:\n\t\tvl = []\n\t\tvl.append(float(v.X))\n\t\tvl.append(float(v.Y))\n\t\tvl.append(float(v.Z))\n\t\tvertices.append(vl)\n\tdata[\"vertices\"] = vertices\n\tfaces = []\n\tfor f in mesh.Faces:\n\t\tfl =[]\n\t\tfl.append(f.A)\n\t\tfl.append(f.B)\n\t\tfl.append(f.C)\n\t\tif f.IsQuad:\n\t\t\tfl.append(f.D)\n\t\tfaces.append(fl)\n\tdata[\"faces\"] = faces\n\treturn data\n\n\ndef mesh_from_data(data):\n\tmesh = Mesh()\n\tfor vl in data[\"vertices\"]:\n\t\tmesh.Vertices.Add(vl[0], vl[1], vl[2])\n\tfor fl in data[\"faces\"]:\n\t\tif len(fl) == 3:\n\t\t\tmesh.Faces.AddFace(fl[0], fl[1], fl[2])\n\t\telse:\n\t\t\tmesh.Faces.AddFace(fl[0], fl[1], fl[2], fl[3])\n\tmesh.RebuildNormals()\n\treturn mesh\n\n\ndef plane_to_data(pln):\n\tdata = {}\n\tdata['origin'] = [pln.Origin.X,pln.Origin.Y, pln.Origin.Z]\n\tdata['xaxis'] = [pln.XAxis.X, pln.XAxis.Y, pln.XAxis.Z]\n\tdata['yaxis'] = [pln.YAxis.X, pln.YAxis.Y, pln.YAxis.Z]\n\treturn data\n\n\ndef plane_from_data(data):\n\torigin = Point3d(data['origin'][0], data['origin'][1], data['origin'][2])\n\tx_axis = Vector3d(data['xaxis'][0], data['xaxis'][1], data['xaxis'][2])\n\ty_axis = Vector3d(data['yaxis'][0], data['yaxis'][1], data['yaxis'][2])\n\treturn Plane(origin, x_axis, y_axis)\n\n\ndef transform_to_data(trans):\n\tdata = {}\n\tdata['M00'] = trans.M00\n\tdata['M01'] = trans.M01\n\tdata['M02'] = trans.M02\n\tdata['M03'] = trans.M03\t\t\n\tdata['M10'] = trans.M10\n\tdata['M11'] = trans.M11\n\tdata['M12'] = trans.M12\n\tdata['M13'] = trans.M13\t\t \n\tdata['M20'] = trans.M20\n\tdata['M21'] = trans.M21\n\tdata['M22'] = trans.M22\n\tdata['M23'] = trans.M23\t \n\tdata['M30'] = trans.M30\n\tdata['M31'] = trans.M31\n\tdata['M32'] = trans.M32\n\tdata['M33'] = trans.M33\n\treturn data\n\n\ndef transform_from_data(data):\n\ttrans = Transform(0)\n\ttrans.M00 = float(data['M00'])\n\ttrans.M01 = float(data['M01'])\n\ttrans.M02 = float(data['M02'])\n\ttrans.M03 = float(data['M03'])\n\ttrans.M10 = float(data['M10'])\n\ttrans.M11 = float(data['M11'])\n\ttrans.M12 = float(data['M12'])\n\ttrans.M13 = float(data['M13'])\n\ttrans.M20 = float(data['M20'])\n\ttrans.M21 = float(data['M21'])\n\ttrans.M22 = float(data['M22'])\n\ttrans.M23 = float(data['M23'])\n\ttrans.M30 = float(data['M30'])\n\ttrans.M31 = float(data['M31'])\n\ttrans.M32 = float(data['M32'])\n\ttrans.M33 = float(data['M33'])\n\treturn trans",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}