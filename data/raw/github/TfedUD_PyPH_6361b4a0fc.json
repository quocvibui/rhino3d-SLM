{
  "source_url": "https://github.com/TfedUD/PyPH/blob/87fe2ec207a8b0ddcd3fbb682ea71368c11b580a/PyPH_GH/ghuser_py/PyPH%20-%20Create%20PHX%20Spaces.py",
  "repo": "TfedUD/PyPH",
  "repo_stars": 0,
  "repo_description": "Python toolkit for working with Passive House energy models",
  "license": "GPL-3.0",
  "filepath": "PyPH_GH/ghuser_py/PyPH - Create PHX Spaces.py",
  "instruction": "Builds new PHX-Spaces within the Honyebee-Rooms/Zones.\n-\nEM September 30, 2021\n    Args:\n        _floor_surfaces (list[Surface]) The individual space floor surfaces represting \n            each...",
  "code": "#\n# PyPH: A Plugin for aadding Passive-House data to LadybugTools Models\n# \n# This component is part of the PH-Tools toolkit <https://github.com/PH-Tools>.\n# \n# Copyright (c) 2021, PH-Tools and bldgtyp, llc <phtools@bldgtyp.com> \n# PyPH is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# PyPH is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# For a copy of the GNU General Public License\n# see <https://github.com/PH-Tools/PyPH/blob/main/LICENSE>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n#\n\"\"\"\nBuilds new PHX-Spaces within the Honyebee-Rooms/Zones.\n-\nEM September 30, 2021\n    Args:\n        _floor_surfaces (list[Surface]) The individual space floor surfaces represting \n            each individual 'space' inside the Honeybee Room (zone).\n        _space_geometry: (list[PolySurface]) Geometry representing the 'space shape' \n            of an individial 'space' or area inside of the Honeybee Room. NOTE: Make \n            sure that your space-shapes are 'open' on the bottom so that they can be \n            joined to the TFA Surfaces to form a closed Brep in the end.\n        _HB_rooms:  The Honeybee Rooms you would like to build the PHX-Spaces for.\n        _ventilation_rates: Enter either:\n\"1-Honeybee\"\n\"2-User-Determined\"\n    Returns:\n        floor_surface_breps_: Preview of the Floor Surfaces found / used in the PHX-Spaces\n        volume_geometry_breps_: Preview of the PHX-Volume Geometry found/used in the PHX-Spaces\n        HB_rooms_: The Honeybee Rooms with new PHX-Spaces added\n\"\"\"\n\nimport scriptcontext as sc\nimport Rhino as rh\nimport rhinoscriptsyntax as rs\nimport ghpythonlib.components as ghc\nimport Grasshopper as gh\n\nimport LBT_Utils\n\nimport PHX\nimport PHX._base\nimport PHX.geometry\nimport PHX.spaces\nimport PHX.serialization.to_dict\nimport PHX.serialization.from_dict\nimport PHX.programs.loads\n\nimport PyPH_Rhino\nimport PyPH_Rhino.gh_io\nimport PyPH_Rhino.gh_utils\nimport PyPH_Rhino.spaces\nimport PyPH_Rhino.space_floors\nimport PyPH_Rhino.space_volumes\nimport PyPH_Rhino.space_io\n\n# --- \nimport PyPH_GH._component_info_\nreload(PyPH_GH._component_info_)\nghenv.Component.Name = \"PyPH - Create PHX Spaces\"\nDEV = True\nPyPH_GH._component_info_.set_component_params(ghenv, dev='SEP_30_2021')\n\nif DEV:\n    reload(LBT_Utils)\n    \n    reload(PHX)\n    reload(PHX._base)\n    reload(PHX.geometry)\n    reload(PHX.spaces)\n    reload(PHX.serialization.to_dict)\n    reload(PHX.serialization.from_dict)\n    reload(PHX.programs.loads)\n    \n    reload(PyPH_Rhino)\n    reload(PyPH_Rhino.gh_io)\n    reload(PyPH_Rhino.gh_utils)\n    reload(PyPH_Rhino.spaces)\n    reload(PyPH_Rhino.space_floors)\n    reload(PyPH_Rhino.space_volumes)\n    reload(PyPH_Rhino.space_io)\n\n\n# -- GH Interface\nIGH = PyPH_Rhino.gh_io.IGH( ghdoc, ghenv, sc, rh, rs, ghc, gh )\n\nif '2' in str(_ventilation_rates):\n    use_ud_vent_rates = True\nelse:\n    use_ud_vent_rates = False\n\n# -- Main\nif len(_HB_rooms) > 0:\n    floors_dict, floor_surface_breps_ = PyPH_Rhino.spaces.build_floors(IGH,\n                                    _floor_surfaces, '_floor_surfaces', _HB_rooms, use_ud_vent_rates)\n    volumes, volume_geometry_breps_ = PyPH_Rhino.spaces.build_volumes(IGH, \n                                    floors_dict, _space_geometry, '_space_geometry')\n    space_dict = PyPH_Rhino.spaces.build_space_dict(volumes)\n\n# -- Pack up all the results onto the HB Rooms\nHB_rooms_ = []\nfor hb_room in _HB_rooms:\n    if not hb_room: continue\n    \n    new_hb_room = hb_room.duplicate()\n    \n    spaces_dict = {}\n    for space in space_dict.get(hb_room.identifier, {}).get('Spaces', []):\n        print(' -'*25)\n        PyPH_Rhino.gh_utils.object_preview(space)\n        spaces_dict.update( { id(space):space.to_dict() } )\n    \n    new_hb_room = LBT_Utils.user_data.add_to_HB_Obj_user_data(new_hb_room,\n                                    spaces_dict, 'spaces', _write_mode='overwrite')\n    \n    HB_rooms_.append(new_hb_room)\n\n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}