{
  "source_url": "https://github.com/fstwn/pyembroideryGH/blob/ee7fd47316b364962a69976b4168ce9fef2702cf/usrobj_src/pyembroideryGH_DeconstructStitch.py",
  "repo": "fstwn/pyembroideryGH",
  "repo_stars": 11,
  "repo_description": "Set of UserObjects enabling Grasshopper to directly read, write and manipulate various kinds of embroidery formats. It is based on an IronPython-compatible fork of the original pyembroidery library.",
  "license": "MIT",
  "filepath": "usrobj_src/pyembroideryGH_DeconstructStitch.py",
  "instruction": "Deconstructs a stitch-string into its component parts, which are x and y\ncoordinates as well as an integer identifying the command.\n    Inputs:\n        Stitch: The stitch to deconstruct, formatted as...",
  "code": "\"\"\"\nDeconstructs a stitch-string into its component parts, which are x and y\ncoordinates as well as an integer identifying the command.\n    Inputs:\n        Stitch: The stitch to deconstruct, formatted as string\n                {tree, str}\n    Output:\n        X: The X-Coordinate of the stitch as float.\n           {item/list/tree, float}\n        Y: The Y-Coordinate of the stitch as float.\n           {item/list/tree, float}\n        C: The command of the stitch as integer.\n           {item/list/tree, int}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 201022\n\"\"\"\n\n# GHPYTHON SDK IMPORTS\nfrom __future__ import division\nimport re\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS \nghenv.Component.Name = \"DeconstructStitch\"\nghenv.Component.NickName = \"DS\"\nghenv.Component.Category = \"pyembroideryGH\"\nghenv.Component.SubCategory = \"2 Pattern Analysis\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import pyembroidery\nexcept ImportError:\n    errMsg = (\"The pyembroidery python module seems to be not correctly \" +\n              \"installed! Please make sure the module is in you search \" +\n              \"path, see README for instructions!.\")\n    raise ImportError(errMsg)\n\nclass DeconstructStitch(component):\n\n    def RunScript(self, StitchTree):\n        # initialize outputs\n        X = Grasshopper.DataTree[object]()\n        Y = Grasshopper.DataTree[object]()\n        Cmd = Grasshopper.DataTree[object]()\n        \n        # regex pattern for matching stitch strings\n        regex = re.compile(r'^([+-]?(\\d+([.]\\d*)?([eE][+-]?\\d+)?|[.]\\d+([eE][+-]?\\d+)?)[,]){2}[-+]?[0-9]+$')\n        \n        # only do something if there is an incoming stitch-string to begin with\n        if StitchTree != None:\n            # loop through all branches of the tree\n            for i, branch in enumerate(StitchTree.Branches):\n                branch_path = StitchTree.Path(i)\n                \n                # loop through all items in the current branch\n                for j, stitch_string in enumerate(branch):\n                    if bool(regex.match(stitch_string)):\n                        # split the string in its components\n                        parts = stitch_string.split(',')\n                        # add each component to its respective output tree\n                        X.Add(float(parts[0]), branch_path)\n                        Y.Add(float(parts[1]), branch_path)\n                        Cmd.Add(int(parts[2]), branch_path)\n                    else:\n                        rml = self.RuntimeMessageLevel.Warning\n                        errMsg = (\"Item at branch {}, index {} is not a \" +\n                                  \"valid stitch string! A Null item will \" +\n                                  \"be inserted into the output tree!\")\n                        errMsg = errMsg.format(i, j)\n                        self.AddRuntimeMessage(rml, errMsg)\n                        X.Add(None, branch_path)\n                        Y.Add(None, branch_path)\n                        Cmd.Add(None, branch_path)\n                        continue\n        \n        # return outputs if you have them; here I try it for you:\n        return X, Y, Cmd\n\n",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}