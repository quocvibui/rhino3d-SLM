{
  "source_url": "https://discourse.mcneel.com/t/best-practices-for-running-python-scripts-in-rhino-compute/214176",
  "topic_id": 214176,
  "title": "Best Practices for Running Python Scripts in Rhino Compute",
  "question": "I’ve made some Grasshopper Python components that I’m running on a VM that I followed via the official tuts using Rhino Compute but having some issues with a few scripts. They all work fine locally on my local machine.\n\n\nI believe the problem is related to external Python modules. I install these modules at the top of the component using the syntax \n# r: pydelatin, numpy, rasterio, scipy\n and locally it works great.\n\n\nNow I tried running this script on my Rhino Compute instance and it’s not working, and I imagine it has something to do with using these external modules because I have another Python component where I just use built-in modules and there were no issues. I also don’t know how to properly debug what’s going wrong.\n\n\nIf you think this could be the issue, what is the proper way to install external Python modules on a Rhino Compute server. I read somewhere that I can do this syntax at the top of my Python Component instead and might have more luck:\n\n\n#! python 3\n# venv: my-grasshopper-file\n# r: pydelatin, numpy, rasterio, scipy\n \nimport pydelatin, numpy, rasterio, scipy\n\n\n\nShould I do this instead?\n\n\nI’m used to creating a venv at the project level for whatever Python project I’m working on, so in that case, should all Python components in a Grasshopper file point towards the same venv?\n\n\nSay one Grasshopper Python node does this at the top:\n\n\n#! python 3\n# venv: my-grasshopper-file\n# r: pydelatin, numpy, rasterio, scipy\n\nimport pydelatin, numpy, rasterio, scipy\n\n\n\nAnd in another node further along in the graph I want to reuse \nnumpy\n do I just do:\n\n\n#! python 3\n# venv: my-grasshopper file\n\nimport numpy\n\n\n\nSo I point it at the same venv file? Or do I reimport with \n# r\n.\n\n\nAnd then if this is the issue and it does start working, now does every Rhino Compute instance on startup reinstall the modules?\n\n\nSorry for all the questions.\n\n\nThanks,\n\n\nAidan",
  "code_blocks": [
    {
      "code": "#! python 3\n# venv: my-grasshopper-file\n# r: pydelatin, numpy, rasterio, scipy\n \nimport pydelatin, numpy, rasterio, scipy",
      "language": "python",
      "author": "aidan.newsome",
      "post_number": 1,
      "is_solution": false
    },
    {
      "code": "#! python 3\n# venv: my-grasshopper-file\n# r: pydelatin, numpy, rasterio, scipy\n\nimport pydelatin, numpy, rasterio, scipy",
      "language": "python",
      "author": "aidan.newsome",
      "post_number": 1,
      "is_solution": false
    },
    {
      "code": "#! python 3\n# venv: my-grasshopper file\n\nimport numpy",
      "language": "python",
      "author": "aidan.newsome",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "csharp",
    "file-io",
    "geometry",
    "grasshopper",
    "python"
  ],
  "has_accepted_answer": false,
  "category_id": 90,
  "posts_count": 4,
  "views": 103
}