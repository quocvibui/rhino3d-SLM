{
  "source_url": "https://github.com/ladybug-tools/ladybug-grasshopper/blob/a10c14adff547d29bb4ee6715984e58ea4adfef9/ladybug_grasshopper/src/LB%20Screen%20Oriented%20Text.py",
  "repo": "ladybug-tools/ladybug-grasshopper",
  "repo_stars": 46,
  "repo_description": "üêû :green_book: Ladybug plugin for Grasshopper",
  "license": "AGPL-3.0",
  "filepath": "ladybug_grasshopper/src/LB Screen Oriented Text.py",
  "instruction": "Generate screen-oriented text that displays in the Rhino scene as a head-up\ndisplay (HUD).\n_\nThis is useful when there are certain summary results or information that should\nalways be displayed...",
  "code": "# Ladybug: A Plugin for Environmental Analysis (GPL)\n# This file is part of Ladybug.\n#\n# Copyright (c) 2025, Ladybug Tools.\n# You should have received a copy of the GNU Affero General Public License\n# along with Ladybug; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license AGPL-3.0-or-later <https://spdx.org/licenses/AGPL-3.0-or-later>\n\n\"\"\"\nGenerate screen-oriented text that displays in the Rhino scene as a head-up\ndisplay (HUD).\n_\nThis is useful when there are certain summary results or information that should\nalways be displayed on-screen.\n-\n\n    Args:\n        _text: Text string to be displayed in the plane of the screen.\n        leg_par2d_: Optional 2D LegendParameters from the \"LB Legend Parameters 2D\"\n            component, which will be used to customize a text in the plane\n            of the screen. Note that only the text_height, origin_x and origin_y\n            inputs of this component affect the placement of the text.\n        _font_: An optional text string to specify the font to be used for the text.\n            Examples include \"Arial\", \"Times New Roman\", \"Courier\" (all without\n            quotations). Default is \"Arial\".\n        _color_: An optional color to set the color of the text. If unspecified,\n            it will be black.\n        viewport_: Text for the name of the Rhino viewport to which the 2D screen-oriented\n            text will be rendered. Multiple viewports can be connected to have the\n            text display in several viewports. If unspecified, the text is rendered\n            in all viewports. Acceptable inputs include:\n                -\n                Perspective\n                Top\n                Bottom\n                Left\n                Right\n                Front\n                Back\n                any view name that has been saved within the Rhino file\n\"\"\"\n\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\nclass MyComponent(component):\n    \n    def __init__(self):\n        super(MyComponent,self).__init__()\n        self.text_2d_args = None\n        self.viewport = ()\n    \n    def RunScript(self, _text, leg_par2d_, _font_, _color_, viewport_):\n        ghenv.Component.Name = 'LB Screen Oriented Text'\n        ghenv.Component.NickName = 'Text2D'\n        ghenv.Component.Message = '1.9.3'\n        ghenv.Component.Category = 'Ladybug'\n        ghenv.Component.SubCategory = '4 :: Extra'\n        ghenv.Component.AdditionalHelpFromDocStrings = '2'\n        \n        try:\n            from ladybug.legend import Legend, Legend2DParameters\n        except ImportError as e:\n            raise ImportError('\\nFailed to import ladybug:\\n\\t{}'.format(e))\n        \n        try:\n            from ladybug_rhino.color import black\n            from ladybug_rhino.grasshopper import all_required_inputs, longest_list\n        except ImportError as e:\n            raise ImportError('\\nFailed to import ladybug_rhino:\\n\\t{}'.format(e))\n        \n        import scriptcontext as sc\n        import Rhino.Geometry as rg\n        \n        if all_required_inputs(ghenv.Component):\n            # get the screen dimensions\n            active_view = sc.doc.Views.ActiveView.ActiveViewport\n            v_size = active_view.Size\n            vw = v_size.Width\n            vh = v_size.Height\n            _font = 'Arial' if _font_ is None else _font_\n            _color_ = black() if _color_ is None else _color_\n            \n            # convert the inputs into arguments to be rendered\n            self.text_2d_args = []\n            for i, txt in enumerate(_text):\n                if len(leg_par2d_) == 0:  # make default 2D parameters\n                    l_par = Legend2DParameters()\n                else:\n                    l_par = longest_list(leg_par2d_, i)\n                _height = Legend.parse_dim_2d(l_par.text_height, vh)\n                or_x = Legend.parse_dim_2d(l_par.origin_x, vw)\n                or_y = Legend.parse_dim_2d(l_par.origin_y, vh)\n                d_args = (\n                    txt, _color_, rg.Point2d(or_x,or_y), False, _height, _font)\n                self.text_2d_args.append(d_args)\n            self.viewport = tuple(vp.lower() for vp in viewport_)\n        else:\n            self.text_2d_args = None\n            self.viewport = ()\n    \n    def DrawViewportWires(self, args):\n        try:\n            if ghenv.Component.Locked:\n                return\n            if self.text_2d_args is not None:\n                # get the DisplayPipeline from the event arguments\n                display = args.Display\n                # render the 2D text from the arguments\n                if len(self.viewport) == 0 or \\\n                        args.Viewport.Name.lower() in self.viewport:\n                    for draw_args in self.text_2d_args:\n                        display.Draw2dText(*draw_args)\n        except Exception, e:\n            System.Windows.Forms.MessageBox.Show(str(e), \"script error\")\n    \n    def get_ClippingBox(self):\n        return Rhino.Geometry.BoundingBox()\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}