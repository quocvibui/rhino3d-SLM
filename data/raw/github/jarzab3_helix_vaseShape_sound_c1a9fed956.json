{
  "source_url": "https://github.com/jarzab3/helix_vaseShape_sound/blob/aab66e913075efeadca16f7fcf43a15a1f452899/helix.rhino.py",
  "repo": "jarzab3/helix_vaseShape_sound",
  "repo_stars": 0,
  "repo_description": "This project aims to make model in a shape of the vase. Code imports file with data and makes a vase.",
  "license": "unknown",
  "filepath": "helix.rhino.py",
  "instruction": "Helix.rhino",
  "code": "\r\nimport rhinoscriptsyntax as rs\r\nimport sys\r\nimport math\r\nimport string\r\nimport random\r\nimport time\r\nimport datetime\r\nimport os\r\nimport scriptcontext\r\nimport Rhino\r\nimport urllib, json\r\nimport calendar\r\nfrom System.Drawing import Color\r\n\r\nsys.path.append(os.path.abspath(\"C:\\Users\\Adam\\Documents\\maya_project_modelling_mdx\"))\r\n\r\n\r\nfrom ddd import da\r\n\r\n\r\nall = rs.AllObjects(select=True)\r\nrs.DeleteObjects(all)\r\n\r\npi = math.pi\r\ndata_points = []\r\n\r\ndef prepare_data():\r\n    newDataArray = []\r\n    temp_a =[]\r\n    hh = 0\r\n    dataArray = da\r\n    \r\n    for el in dataArray:\r\n        if el > 80:\r\n            el = 80\r\n        el = el*0.13\r\n        el = int(round(el))\r\n        if el < 0:\r\n            el = 0\r\n            newDataArray.append(el)\r\n        else:\r\n            newDataArray.append(el)\r\n\r\n    chunks = [newDataArray[x:x+1400] for x in range(0, len(newDataArray), 240)]\r\n\r\n    return (chunks[0])\r\n\r\ndef precise_range(start, stop, step):\r\n    assert step > 0.0\r\n    total = start\r\n    compo = 0.0\r\n    while total < stop:\r\n        yield total\r\n        y = step - compo\r\n        temp = total + y\r\n        compo = (temp - total) - y\r\n        total = temp\r\n\r\n\r\nspheres = []\r\ncurves = []\r\n\r\ndef fun(rad, inp):\r\n    pos = 0\r\n    p = 0\r\n    inc = 0.175\r\n    z = 12\r\n    \r\n    a = (round((20*pi), 4))\r\n    b = (round((pi/70), 4))\r\n    \r\n    for a in rs.frange(0.0, a, b):\r\n        if (len(spheres)) < 65:\r\n            inc = 0.055\r\n        elif (len(spheres)) > 1250:\r\n            inc = 0.03\r\n        else:\r\n            inc = 0.175\r\n            \r\n        x = rad * math.sin(a + pi)\r\n        y = rad * math.cos(a + pi)\r\n        \r\n        data_points.append([x, y, z])\r\n        \r\n        h = (inp[pos] * 0.26)\r\n        x = (rad -h)* math.sin(a + pi)\r\n        y = (rad - h)* math.cos(a + pi)\r\n\r\n        \r\n        point = rs.AddPoint(x, y, z)\r\n        sphere = rs.AddSphere(point, inp[pos])\r\n        rs.HideObject(point)\r\n        \r\n        if sphere != None:\r\n             spheres.append(sphere)\r\n             rs.SelectObject(sphere)\r\n             \r\n        pos += 1\r\n        z += inc\r\n    \r\n    return \"\"\r\n\r\nprint (len(spheres))\r\n\r\ncurves_list = []\r\ndef make_curves(z):\r\n    pos = 0\r\n    rad = 60\r\n    daq = []\r\n    #a = (round((20*pi), 4))\r\n    #b = (round((pi/70), 4))\r\n\r\n    for a in rs.frange(0.0, (2*pi), (pi/12)):\r\n        x = rad * math.sin(a + pi)\r\n        y = rad * math.cos(a + pi)\r\n        \r\n        daq.append([x, y, z])\r\n \r\n        point = rs.AddPoint(x, y, z)\r\n\r\n        rs.HideObject(point)\r\n             \r\n        pos += 1\r\n               \r\n    curve = rs.AddInterpCurve(daq, degree=3, knotstyle=4)\r\n    \r\n    curves_list.append(curve)\r\n    daq = []\r\n\r\n    return \"\"\r\n\r\n\r\nmake_curves(0)\r\nmake_curves(257)\r\n\r\nbase_point = (0,0,0)\r\n\r\nbase_extr = rs.ExtrudeCurvePoint(curves_list[0], base_point)\r\n\r\ntop_point = (0,0, 257)\r\ntop_extr = rs.ExtrudeCurvePoint(curves_list[1], top_point)\r\n\r\ndata = prepare_data()\r\n\r\nrs.EnableRedraw(True)\r\nfun(60, data)\r\n\r\nrs.HideObject(curves)\r\nrs.HideObject(curves_list)\r\n\r\nspheres.append(rs.AddLoftSrf(curves_list, loft_type=0))\r\n\r\nrs.BooleanUnion(spheres)\r\n\r\nready_model = rs.AllObjects(select=True)\r\n\r\n#rs.Command('_CreateSolid')\r\n\r\n\r\n'''\r\n\r\n##############------------EXPORTING-------------######################\r\n\r\n\r\nobjs = ready_model\r\n\r\n\r\ndef layerNames(sort=False):\r\n    rc = []\r\n    for layer in scriptcontext.doc.Layers:\r\n        if not layer.IsDeleted: rc.append(layer.FullPath)\r\n    if sort: rc.sort()\r\n    return rc\r\n\r\ndef GetDAESettings():\r\n    e_str = \"\"\r\n    return e_str\r\n\r\ndef GetOBJSettings():\r\n    e_str = \"_Geometry=_Mesh \"\r\n    e_str+= \"_EndOfLine=CRLF \"\r\n    e_str+= \"_ExportRhinoObjectNames=_ExportObjectsAsOBJGroups \"\r\n    e_str+= \"_ExportMeshTextureCoordinates=_Yes \"\r\n    e_str+= \"_ExportMeshVertexNormals=_No \"\r\n    e_str+= \"_CreateNGons=_No \"\r\n    e_str+= \"_ExportMaterialDefinitions=_No \"\r\n    e_str+= \"_YUp=_No \"\r\n    e_str+= \"_WrapLongLines=Yes \"\r\n    e_str+= \"_VertexWelding=_Welded \"\r\n    e_str+= \"_WritePrecision=4 \"\r\n    e_str+= \"_Enter \"\r\n\r\n    e_str+= \"_DetailedOptions \"\r\n    e_str+= \"_JaggedSeams=_No \"\r\n    e_str+= \"_PackTextures=_No \"\r\n    e_str+= \"_Refine=_Yes \"\r\n    e_str+= \"_SimplePlane=_No \"\r\n\r\n    e_str+= \"_AdvancedOptions \"\r\n    e_str+= \"_Angle=50 \"\r\n    e_str+= \"_AspectRatio=0 \"\r\n    e_str+= \"_Distance=0.0\"\r\n    e_str+= \"_Density=0 \"\r\n    e_str+= \"_Density=0.45 \"\r\n    e_str+= \"_Grid=0 \"\r\n    e_str+= \"_MaxEdgeLength=0 \"\r\n    e_str+= \"_MinEdgeLength=0.001 \"\r\n\r\n    e_str+= \"_Enter _Enter\"\r\n\r\n    return e_str\r\n\r\ndef GetSTLSettings():\r\n    eStr = \"_ExportFileAs=_Binary \"\r\n    eStr+= \"_ExportUnfinishedObjects=_Yes \"\r\n    eStr+= \"_UseSimpleDialog=_No \"\r\n    eStr+= \"_UseSimpleParameters=_No \"\r\n    eStr+= \"_Enter _DetailedOptions \"\r\n    eStr+= \"_JaggedSeams=_No \"\r\n    eStr+= \"_PackTextures=_No \"\r\n    eStr+= \"_Refine=_Yes \"\r\n    eStr+= \"_SimplePlane=_No \"\r\n    eStr+= \"_AdvancedOptions \"\r\n    eStr+= \"_Angle=15 \"\r\n    eStr+= \"_AspectRatio=0 \"\r\n    eStr+= \"_Distance=1 \"\r\n    eStr+= \"_Grid=16 \"\r\n    eStr+= \"_MaxEdgeLength=0 \"\r\n    eStr+= \"_MinEdgeLength=0.1 \"\r\n    eStr+= \"_Enter _Enter\"\r\n    return eStr\r\n\r\nsettingsList = {\r\n    'GetDAESettings': GetDAESettings,\r\n    'GetOBJSettings': GetOBJSettings,\r\n    'GetSTLSettings': GetSTLSettings\r\n}\r\n\r\nfileName = rs.DocumentName()\r\nfilePath = rs.DocumentPath().rstrip(fileName)\r\n\r\narrLayers = layerNames(False)\r\n\r\ndef initExportByLayer(fileType=\"obj\", visibleonly=False, byObject=False):\r\n    for layerName in arrLayers:\r\n        layer = scriptcontext.doc.Layers.FindByFullPath(layerName, True)\r\n        if layer >= 0:\r\n            layer = scriptcontext.doc.Layers[layer]\r\n            save = True;\r\n            if visibleonly:\r\n                if not layer.IsVisible:\r\n                    save = False\r\n            if  rs.IsLayerEmpty(layerName):\r\n                save = False\r\n            if save:\r\n                cutName = layerName.split(\"::\")\r\n                cutName = cutName[len(cutName)-1]\r\n                objs = scriptcontext.doc.Objects.FindByLayer(cutName)\r\n                if len(objs) > 0:\r\n                    if byObject:\r\n                        i=0\r\n                        for obj in objs:\r\n                            i= i+1\r\n                            saveObjectsToFile(cutName+\"_\"+str(i), [obj], fileType)\r\n                    else:\r\n                        saveObjectsToFile(cutName, objs, fileType)\r\n\r\ndef saveObjectsToFile(name, objs, fileType):\r\n    rs.EnableRedraw(False)\r\n    if len(objs) > 0:\r\n        settings = settingsList[\"Get\"+fileType.upper()+\"Settings\"]()\r\n        rs.UnselectAllObjects()\r\n        for obj in objs:\r\n            obj.Select(True)\r\n        name = \"\".join(name.split(\" \"))\r\n        command = '-_Export \"{}{}{}\" {}'.format(filePath, name, \".\"+fileType.lower(), settings)\r\n        rs.Command(command, True)\r\n        rs.EnableRedraw(True)\r\n\r\n\r\n\r\ninitExportByLayer(\"obj\",True, False)\r\n#initExportByLayer(\"dae\",True, False)\r\ninitExportByLayer(\"stl\",True, False)\r\n\r\n#Animation()\r\n\r\nrs.DocumentModified(False)\r\n#rs.Exit()\r\n\r\n'''",
  "language": "python",
  "imports": [
    "Rhino",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}