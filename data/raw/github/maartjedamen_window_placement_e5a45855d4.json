{
  "source_url": "https://github.com/maartjedamen/window_placement/blob/614900bd07f92e174fc80252d6db7fa52ca9b7b2/old_notebooks/testgh.py",
  "repo": "maartjedamen/window_placement",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "old_notebooks/testgh.py",
  "instruction": "Testgh",
  "code": "from flask import Flask\nimport ghhops_server as hs\nimport rhino3dm\n\n\n# register hops app as middleware\napp = Flask(__name__)\nhops = hs.Hops(app)\n\n@hops.component(\n    \"/pointat\",\n    name=\"PointAt\",\n    description=\"Get point along curve\",\n    icon=\"examples/pointat.png\",\n    inputs=[\n        hs.HopsCurve(\"Curve\", \"C\", \"Curve to evaluate\"),\n        hs.HopsNumber(\"t\", \"t\", \"Parameter on Curve to evaluate\"),\n        \n    ],\n    outputs=[\n        hs.HopsPoint(\"P\", \"P\", \"Point on curve at t\")\n    ]\n)\ndef pointat(curve, t):\n    # return curve.PointAt(t)\n    return curve.PointAt(t)\n\n\n@hops.component(\n        \"/json\",\n        name=\"importjson\",\n        nickname=\"json\",\n        description=\"import GIS point based information from a JSON file to grasshopper\",\n        inputs=[\n            hs.HopsString(\"Filepath\", \"JSON\", \"Path to JSON file\"),\n        ],\n        outputs=[\n            hs.HopsPoint(\"P\", \"P\", \"point list from GIS\")\n        ]\n)\n\ndef import_json(filepath): \n    # load input coordinates from a geojson file\n    with open(\"filepath\") as json_file:\n        data = json.load(json_file)\n        # retrieve the valuable data out of dictionary\n        # tiles = (data[\"features\"][0][\"geometry\"][\"coordinates\"])\n        tiles = (data[\"features\"])\n\n    coords = []\n    for n in range(len(tiles)):\n        features = (data[\"features\"][n][\"geometry\"][\"coordinates\"])\n        coords.append(features)\n    return coords\n\nif __name__ == \"__main__\":\n    app.run()\n\n\n\n# @hops.component(\n#     \"/Gen\",\n#     name=\"GenerateSpheresFromImage\",\n#     nickname=\"GSI\",\n#     description=\"Generate spheres based on image RGB values\",\n#     inputs=[\n#         hs.HopsString(\"ImagePath\", \"Image\", \"Path to the image file\")\n#     ],\n#     outputs=[\n#         hs.HopsBrep(\"Spheres\", \"S\", \"List of spheres generated\"),\n#         hs.HopsString(\"Log\", \"L\", \"Log or error message\")\n#     ]\n# )\n\n\n# def generate_spheres_from_image(image_path: str) -> (list, str):\n#     try:\n#         image = Image.open(image_path)\n#     except Exception as e:\n#         return [], f\"Failed to load image. Error: {e}\"\n        \n#     # Use PIL to open and process the image\n#     try:\n#         image = Image.open(image_path)\n#     except Exception as e:\n#         return [], f\"Failed to load image. Error: {e}\"\n\n#     width, height = image.size\n\n#     try:\n#         pixels = image.load()\n#     except Exception as e:\n#         return [], f\"Failed to load pixels. Error: {e}\"\n\n#     spheres = []\n\n#     # Use the double for loop to create geometries\n#     for i in range(height):\n#         for j in range(width):\n#             if i % 2 == 0 and j % 2 == 0:\n#                 pixel_color = pixels[j, i]\n\n\n#                 r, g, b, _ = pixel_color\n\n\n#                 center = rg.Point3d(i, height - 1 - j, 0)\n#                 radius = r / 150.0\n\n#                 # Explicitly check for zero or negative radius\n#                 if radius <= 0.0:\n#                     return [], f\"Invalid radius ({radius}) at center: {center}. Pixel RGB: ({r},{g},{b})\"\n\n#                 sphere = rg.Sphere(center, radius)\n\n#                 if not sphere.IsValid:\n#                     return [], f\"Sphere creation failed at center: {center}. Pixel RGB: ({r},{g},{b}), Radius: {radius}\"\n#                 else:\n#                     spheres.append(sphere.ToBrep())  # Convert to Brep for output\n\n#     return spheres, \"Success\"\n#     # Use PIL to open and process the image\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}