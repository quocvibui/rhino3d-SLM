{
  "source_url": "https://github.com/bsamiee/Parametric_Arsenal/blob/54ec3f5a7fc2c671cb7bc4601772820e625a1904/rhino/plugins/ArchBuilder/commands/ThreeCenterArch.py",
  "repo": "bsamiee/Parametric_Arsenal",
  "repo_stars": 0,
  "repo_description": "Rhino 8 Plugins and Scripts - A comprehensive monorepo for architectural automation, parametric design, and creative workflows",
  "license": "MIT",
  "filepath": "rhino/plugins/ArchBuilder/commands/ThreeCenterArch.py",
  "instruction": "Title         : ThreeCenterArch.py\nAuthor        : Bardia Samiee\nProject       : Parametric Forge\nLicense       : MIT\nPath          : rhino/plugins/ArchBuilder/commands/ThreeCenterArch.py",
  "code": "# r: numpy\n\"\"\"\nTitle         : ThreeCenterArch.py\nAuthor        : Bardia Samiee\nProject       : Parametric Forge\nLicense       : MIT\nPath          : rhino/plugins/ArchBuilder/commands/ThreeCenterArch.py\n\nDescription\n----------------------------------------------------------------------------\nCommand for creating three-center (basket-handle) arches.\n\"\"\"\n\nfrom __future__ import annotations\n\nfrom typing import Any\n\nimport Rhino.Geometry as rg\nfrom libs.command_base import ArchCommandBase\nfrom libs.geometry.profiles import ProfileSegments, three_center_profile\nfrom libs.specs import ArchFamily, ArchSpec, ThreeCenterArchOptions\nfrom libs.ui import ProfileSelection\nfrom libs.utils import ArchBuilderUtils\n\nimport Rhino\n\n\n# --- Three-Center Command Class -------------------------------------------\nclass ThreeCenterArchCommand(ArchCommandBase):\n    \"\"\"Three-center arch command using traditional geometric proportions.\"\"\"\n\n    options_type = ThreeCenterArchOptions\n\n    def __init__(self) -> None:\n        super().__init__(ArchFamily.THREE_CENTER, self.build_three_center)\n\n    def collect_parameters(self, profile: ProfileSelection) -> dict[str, Any] | None:\n        \"\"\"Calculate traditional three-center arch proportions from geometry.\"\"\"\n        options = self.options_type.from_geometry(profile.span, profile.rise)\n        return options.to_metadata()\n\n    def build_three_center(self, spec: ArchSpec) -> rg.Curve:\n        \"\"\"Return the closed three-center profile for the requested spec.\"\"\"\n        tolerance = ArchBuilderUtils.model_absolute_tolerance()\n        options = self.options_type.from_metadata(spec.metadata)\n\n        profile: ProfileSegments = three_center_profile(\n            spec.span,\n            spec.rise,\n            options,\n            tolerance,\n        )\n        return ArchBuilderUtils.close_with_baseline(\n            profile.segments,\n            profile.start,\n            profile.end,\n            tolerance,\n        )\n\n\n# --- Command Entry Points -------------------------------------------------\ndef ThreeCenterArch() -> None:\n    \"\"\"Execute the ThreeCenterArch command.\"\"\"\n    command = ThreeCenterArchCommand()\n    if command.execute():\n        Rhino.RhinoApp.WriteLine(\"ArchBuilder: ThreeCenterArch created.\")\n\n\ndef RunCommand(is_interactive: bool) -> int:\n    try:\n        ThreeCenterArch()\n        return 0  # noqa: TRY300\n    except RuntimeError as exc:\n        Rhino.RhinoApp.WriteLine(f\"ArchBuilder cancelled: {exc}\")\n        return 0\n\n\nif __name__ == \"__main__\":\n    ThreeCenterArch()\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}