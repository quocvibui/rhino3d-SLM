{
  "source_url": "https://github.com/jackhymowitz/main/blob/7325131db23094f1a28bd184b6a68f864f41a729/01_GH_Components/py/BT_DHW_Tank.py",
  "repo": "jackhymowitz/main",
  "repo_stars": 0,
  "repo_description": "IDF2PH is a free open source toolkit for working with E+ and PHPP Energy Models",
  "license": "GPL-3.0",
  "filepath": "01_GH_Components/py/BT_DHW_Tank.py",
  "instruction": "Creates DHW Tank for the 'DHW+Distribution' PHPP worksheet.\r\r\n-\r\r\nEM June 20, 2020\r\r\n    Args:\r\r\n        _tank_type: (\"0-No storage tank\", \"1-DHW and heating\", \"2-DHW only\") The type of use for this...",
  "code": "#\r\r\n# IDF2PHPP: A Plugin for exporting an EnergyPlus IDF file to the Passive House Planning Package (PHPP). Created by blgdtyp, llc\r\r\n# \r\r\n# This component is part of IDF2PHPP.\r\r\n# \r\r\n# Copyright (c) 2020, bldgtyp, llc <info@bldgtyp.com> \r\r\n# IDF2PHPP is free software; you can redistribute it and/or modify \r\r\n# it under the terms of the GNU General Public License as published \r\r\n# by the Free Software Foundation; either version 3 of the License, \r\r\n# or (at your option) any later version. \r\r\n# \r\r\n# IDF2PHPP is distributed in the hope that it will be useful,\r\r\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \r\r\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \r\r\n# GNU General Public License for more details.\r\r\n# \r\r\n# For a copy of the GNU General Public License\r\r\n# see <http://www.gnu.org/licenses/>.\r\r\n# \r\r\n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\r\r\n#\r\r\n\"\"\"\r\r\nCreates DHW Tank for the 'DHW+Distribution' PHPP worksheet.\r\r\n-\r\r\nEM June 20, 2020\r\r\n    Args:\r\r\n        _tank_type: (\"0-No storage tank\", \"1-DHW and heating\", \"2-DHW only\") The type of use for this tank.\r\r\n        tank_solar_: (True/False) Is this tank hooked up to a Solar HW system?\r\r\n        tank_HLrate_: (W/k) Heat Loss rate from the tank. Default is 4.0 W/k\r\r\n        tank_volume_: (litres) Nominal tank volume. Default is 300 litres (80 gallons)\r\r\n        tank_standby_frac_: (%) The Standby Fraction. Default is 0.30 (30%)\r\r\n        tank_location_: (\"1-Inside\", \"2-Outside\") The location of this HW tank.\r\r\n        tank_location_T_: (Deg C) The avg air-temp of the tank location if outside the building. \r\r\n    Returns:\r\r\n        tank_location_T_: A DHW Tank Object. Connect this to one of the 'tank_' inputs on the 'DHW System' component in order to pass along to the PHPP.\r\r\n\"\"\"\r\r\n\r\r\nghenv.Component.Name = \"BT_DHW_Tank\"\r\r\nghenv.Component.NickName = \"DHW Tank\"\r\r\nghenv.Component.Message = 'JUN_20_2020'\r\r\nghenv.Component.IconDisplayMode = ghenv.Component.IconDisplayMode.application\r\r\nghenv.Component.Category = \"BT\"\r\r\nghenv.Component.SubCategory = \"01 | Model\"\r\r\n\r\r\nimport scriptcontext as sc\r\r\nimport Grasshopper.Kernel as ghK\r\r\n\r\r\n# Classes and Defs\r\r\npreview = sc.sticky['Preview']\r\r\nPHPP_DHW_tank = sc.sticky['PHPP_DHW_tank']\r\r\n\r\r\ndef cleanInputs(_in, _nm, _default):\r\r\n    # Apply defaults if the inputs are Nones\r\r\n    out = _in if _in != None else _default\r\r\n    \r\r\n    # Check that output can be float\r\r\n    if out:\r\r\n        try:\r\r\n            out = float(out)\r\r\n            # Check units\r\r\n            if _nm == \"tank_standby_frac_\":\r\r\n                if out > 1:\r\r\n                    unitWarning = \"Standby Units should be decimal fraction. ie: 30% should be entered as 0.30\" \r\r\n                    ghenv.Component.AddRuntimeMessage(ghK.GH_RuntimeMessageLevel.Warning, unitWarning)\r\r\n                    return out/100\r\r\n            return out\r\r\n        except:\r\r\n            ghenv.Component.AddRuntimeMessage(ghK.GH_RuntimeMessageLevel.Warning, '\"{}\" input should be a number'.format(_nm))\r\r\n            return out\r\r\n\r\r\ndef clean_ttype(_type):\r\r\n    # Clean Inputs\r\r\n    if _type == None:\r\r\n        return \"0-No storage tank\"\r\r\n    else:\r\r\n        try:\r\r\n            if \"1\" == str(_type)[0]:\r\r\n                return \"1-DHW and heating\"\r\r\n            elif \"2\" == str(_type)[0]:\r\r\n                return \"2-DHW only\"\r\r\n            elif \"0\" == str(_type)[0]:\r\r\n                return \"0-No storage tank\"\r\r\n            else:\r\r\n                raise Exception()\r\r\n        except Exception:\r\r\n            ttypeWarning = 'Please enter either \"0-No storage tank\", \"1-DHW and heating\", \"2-DHW only\" for the \"_tank_type input\"'\r\r\n            ghenv.Component.AddRuntimeMessage(ghK.GH_RuntimeMessageLevel.Warning, ttypeWarning)\r\r\n            return \"0-No storage tank\"\r\r\n\r\r\ndef clean_location(_in):\r\r\n    # Clean Inputs\r\r\n    if _in == None:\r\r\n        return \"1-Inside\"\r\r\n    else:\r\r\n        try:\r\r\n            if \"1\" == str(_in)[0]:\r\r\n                return \"1-Inside\"\r\r\n            elif \"2\" == str(_in)[0]:\r\r\n                return \"2-Outside\"\r\r\n            else:\r\r\n                raise Exception()\r\r\n        except Exception:\r\r\n            ttypeWarning = 'Please enter either \"1-Inside\" or \"2-Outside\" for the \"tank_location_ input\"'\r\r\n            ghenv.Component.AddRuntimeMessage(ghK.GH_RuntimeMessageLevel.Warning, ttypeWarning)\r\r\n            return \"1-Inside\"\r\r\n\r\r\n# Clean Inputs and defaults\r\r\nttype = clean_ttype(_tank_type)\r\r\nsolar = tank_solar_ if tank_solar_==True else False\r\r\nhlRate = cleanInputs(tank_HLrate_, 'tank_HLrate_', 4)\r\r\nvol = cleanInputs(tank_volume_, 'tank_volume_', 300)\r\r\nstndBy = cleanInputs(tank_standby_frac_, 'tank_standby_frac_', 0.30)\r\r\nloc = clean_location(tank_location_)\r\r\nlocT = cleanInputs(tank_location_T_, 'tank_location_T_', '')\r\r\n\r\r\n# Creat Storage Tank\r\r\nstorage_tank_ = PHPP_DHW_tank(ttype,\r\r\n                        solar,\r\r\n                        hlRate,\r\r\n                        vol,\r\r\n                        stndBy,\r\r\n                        loc,\r\r\n                        locT\r\r\n                        )\r\r\n\r\r\nprint('----\\nDHW Tank:')\r\r\npreview(storage_tank_)\r\n",
  "language": "python",
  "imports": [
    "scriptcontext"
  ],
  "has_docstring": true
}