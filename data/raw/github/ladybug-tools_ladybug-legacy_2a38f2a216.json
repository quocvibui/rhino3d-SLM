{
  "source_url": "https://github.com/ladybug-tools/ladybug-legacy/blob/d90db02f2776febbb38100dea26ec0c93e77aa53/src/Ladybug_North.py",
  "repo": "ladybug-tools/ladybug-legacy",
  "repo_stars": 202,
  "repo_description": ":beetle: Ladybug is an environmental plugin for Grasshopper.",
  "license": "NOASSERTION",
  "filepath": "src/Ladybug_North.py",
  "instruction": "Use this component to create a compass sign that indicates the direction of North in the Rhino scene.",
  "code": "# North Arrow\n#\n# Ladybug: A Plugin for Environmental Analysis (GPL) started by Mostapha Sadeghipour Roudsari\n# \n# This file is part of Ladybug.\n# \n# Copyright (c) 2013-2020, Mostapha Sadeghipour Roudsari <mostapha@ladybug.tools> \n# Ladybug is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# Ladybug is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# You should have received a copy of the GNU General Public License\n# along with Ladybug; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n\n\n\"\"\"\nUse this component to create a compass sign that indicates the direction of North in the Rhino scene.\n\n-\nProvided by Ladybug 0.0.69\n    \n    Args:\n        _north_: Input a vector to be used as a North direction or a number between 0 and 360 that represents the degrees off from the y-axis to make North.  The default North direction is set to the Y-axis (0 degrees).\n        _centerPt_: Input a point here to change the location of the North sign in the Rhino scene.  The default is set to the Rhino model origin (0,0,0).\n        _scale_: Input a number here to change the scale of the sun path.  The default is set to 1.\n    Returns:\n        readMe!: ...\n        northSign: A set of surfaces and curves that indicate the direction of North in Rhino.\n\"\"\"\n\nghenv.Component.Name = \"Ladybug_North\"\nghenv.Component.NickName = 'northArrow'\nghenv.Component.Message = 'VER 0.0.69\\nJUL_07_2020'\nghenv.Component.IconDisplayMode = ghenv.Component.IconDisplayMode.application\nghenv.Component.Category = \"LB-Legacy\"\nghenv.Component.SubCategory = \"5 | Extra\"\n#compatibleLBVersion = VER 0.0.59\\nFEB_01_2015\ntry: ghenv.Component.AdditionalHelpFromDocStrings = \"6\"\nexcept: pass\n\n\nimport scriptcontext as sc\nimport Rhino as rc\nimport Grasshopper.Kernel as gh\n\ndef main(north, centerPt, scale):\n    # import the classes\n    if sc.sticky.has_key('ladybug_release'):\n        try:\n            if not sc.sticky['ladybug_release'].isCompatible(ghenv.Component): return -1\n            if sc.sticky['ladybug_release'].isInputMissing(ghenv.Component): return -1\n        except:\n            warning = \"You need a newer version of Ladybug to use this compoent.\" + \\\n            \"Use updateLadybug component to update userObjects.\\n\" + \\\n            \"If you have already updated userObjects drag Ladybug_Ladybug component \" + \\\n            \"into canvas and try again.\"\n            w = gh.GH_RuntimeMessageLevel.Warning\n            ghenv.Component.AddRuntimeMessage(w, warning)\n            return -1\n        lb_preparation = sc.sticky[\"ladybug_Preparation\"]()\n        \n    else:\n        print \"You should first let the Ladybug fly...\"\n        w = gh.GH_RuntimeMessageLevel.Warning\n        ghenv.Component.AddRuntimeMessage(w, \"You should first let the Ladybug fly...\")\n        return -1\n    \n    conversionFac = lb_preparation.checkUnits()\n    \n    # north direction\n    northAngle, northVector = lb_preparation.angle2north(north)\n    cenPt = lb_preparation.getCenPt(centerPt)\n    scale = lb_preparation.setScale(scale, conversionFac)\n    \n    # main Circle\n    radius = 10*scale\n    mainCircle = rc.Geometry.Circle(cenPt, radius).ToNurbsCurve()\n    offsetCircle =  rc.Geometry.Circle(cenPt, .85*radius).ToNurbsCurve()\n    \n    # main North line\n    arrow = rc.Geometry.Line(cenPt, rc.Geometry.Point3d.Add(cenPt, 1.5*radius*northVector)).ToNurbsCurve()\n    \n    # offset to both sides\n    rOffset = arrow.Offset(rc.Geometry.Plane.WorldXY, .15*radius, sc.doc.ModelAbsoluteTolerance, rc.Geometry.CurveOffsetCornerStyle.None)[0]\n    lOffset = arrow.Offset(rc.Geometry.Plane.WorldXY, -.15*radius, sc.doc.ModelAbsoluteTolerance, rc.Geometry.CurveOffsetCornerStyle.None)[0]\n    \n    # creat the rectangle\n    pts = [rOffset.PointAtStart, rOffset.PointAtEnd, lOffset.PointAtEnd, lOffset.PointAtStart, rOffset.PointAtStart]\n    rect = rc.Geometry.Polyline(pts).ToNurbsCurve()\n    \n    # boolean union the curves\n    outlineCrv = rc.Geometry.Curve.CreateBooleanUnion([rect, mainCircle])[0].ToNurbsCurve()\n    inlineCrv = rc.Geometry.Curve.CreateBooleanDifference(offsetCircle, rect)[0].ToNurbsCurve()\n    \n    # create the planar surface\n    northSign = rc.Geometry.Brep.CreatePlanarBreps([outlineCrv, inlineCrv])[0]\n    \n    # additional lines\n    eastVector = rc.Geometry.Vector3d.CrossProduct(northVector, rc.Geometry.Vector3d.ZAxis)\n    southPt = rc.Geometry.Point3d.Add(cenPt, -1.2*radius*northVector)\n    eastPt = rc.Geometry.Point3d.Add(cenPt, 1.2*radius*eastVector)\n    westPt = rc.Geometry.Point3d.Add(cenPt, -1.2*radius*eastVector)\n    \n    eastWestLine = rc.Geometry.Line(eastPt, westPt).ToNurbsCurve()\n    southNorthLine = rc.Geometry.Line(southPt, cenPt).ToNurbsCurve()\n    \n    return northSign, southNorthLine, eastWestLine\n    \n\nif not _north_: _north_ == 0\nnorthSign = main(_north_, _centerPt_, _scale_)\n",
  "language": "python",
  "imports": [
    "Rhino",
    "scriptcontext"
  ],
  "has_docstring": true
}