{
  "source_url": "https://github.com/Parsons3506/MeshFunction/blob/d432169620ca7a74088ef43586d594a04ba1eb8e/loadFunction.py",
  "repo": "Parsons3506/MeshFunction",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "loadFunction.py",
  "instruction": "Load function",
  "code": "import rhinoscriptsyntax as rs\nimport math \nimport random as r\n\n\ndef createmeshvertices(function, fdomain, resolution):\n    xstep = (fdomain[1]-fdomain[0])/resolution\n    ystep = (fdomain[3]-fdomain[2])/resolution\n    v = []\n    for x in rs.frange(fdomain[0],fdomain[1]+(0.5*xstep), xstep):\n        for y in rs.frange(fdomain[2],fdomain[3]+(0.5*ystep),ystep):\n            z = solveequation(function, x, y)\n            v.append( (x,y,z) )\n    return v\n    \n\n\ndef createmeshfaces(resolution):\n    nX = resolution\n    nY = resolution\n    f = []\n    for i in range(nX-1):\n        for j in range(nY-1):\n            baseindex = i*(nY+1)+j\n            f.append( (baseindex, baseindex+1, baseindex+nY+2, baseindex+nY+1) )\n    return f\n\n\ndef solveequation( function, x, y ):\n    d = 10\n    angledata = rs.Angle( (0,0,0), (x,y,0))\n    a = 0.0\n    if angledata: a = angledata[0] * math.pi/180\n    try:\n        z = eval(function)\n    except:\n        z = 0\n    return z\n    \ndef SaveFunctionData(strFunction, fDomain, Resolution):\n    file = open(\"MeshSettings_XY.txt\", \"w\")\n    file.write(strFunction)\n    file.write(\"\\n\")\n    for d in fDomain:\n        file.write(str(d))\n        file.write(\"\\n\")\n    file.write(str(Resolution))\n    file.close()\n    \n\ndef loadfunctiondata():\n    try:\n        file = open(\"MeshSettings_XY.txt\", \"r\")\n        items = file.readlines()\n        file.close()\n        function = str(items[0])\n        domain = (float(items[1]), float(items[2]),\n        float(items[3]), float(items[4]))\n        resolution = int(items[5])\n    except:\n        function = \"math.cos(math.sqrt(x**2+y**2))\"\n        domain = (-10.0, 10.0, -10.0, 10.0)\n        resolution = 50\n    return function, domain, resolution\n    \ndef meshfunction_xy():\n    zfunc, domain, resolution = loadfunctiondata()\n    zfunc = rs.StringBox( zfunc, \"Specify a function f(x,y[,D,A])\", \"Mesh function\")\n    if not zfunc: return\n    while True:\n        prompt = \"Function domain x{%f,%f} y{%f,%f} @%d\" % (domain[0], domain[1],domain[2], domain[3], resolution)\n        result = rs.GetString(prompt, \"Insert\", (\"xMin\",\"xMax\",\"yMin\",\"yMax\",\"Resolution\",\"Insert\"))\n        \n        if not result: return\n        result = result.upper()\n        if result==\"XMIN\":\n            f = rs.GetReal(\"X-Domain start\", domain[0])\n            if f is not None: domain[0]=f\n        elif result==\"XMAX\":\n            f = rs.GetReal(\"X-Domain end\", domain[1])\n            if f is not None: domain[1]=f\n        elif result==\"YMIN\":\n            f = rs.GetReal(\"Y-Domain start\", domain[2])\n            if f is not None: domain[2]=f\n        elif result==\"YMAX\":\n            f = rs.GetReal(\"Y-Domain end\", domain[3])\n            if f is not None: domain[3]=f\n        elif result==\"RESOLUTION\":\n            f = rs.GetInteger(\"Resolution of the graph\", resolution)\n            if f is not None: resolution=f\n        elif result==\"INSERT\": break\n    verts = createmeshvertices(zfunc, domain, resolution)\n    faces = createmeshfaces(resolution)\n    rs.AddMesh(verts, faces)\n    SaveFunctionData(zfunc, domain, resolution)\n        \n        \nmeshfunction_xy()",
  "language": "python",
  "imports": [
    "rhinoscriptsyntax"
  ],
  "has_docstring": false
}