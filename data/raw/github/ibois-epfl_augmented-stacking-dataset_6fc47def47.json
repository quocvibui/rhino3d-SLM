{
  "source_url": "https://github.com/ibois-epfl/augmented-stacking-dataset/blob/171bc42e16609d8690f3b8219a482ba4f1e1f63a/util/rh_pcd_2_mesh.py",
  "repo": "ibois-epfl/augmented-stacking-dataset",
  "repo_stars": 4,
  "repo_description": "Dataset of stone files for augmented stacking project.",
  "license": "MIT",
  "filepath": "util/rh_pcd_2_mesh.py",
  "instruction": "Author: Andrea Settimi (andrea.settimi@epfl.ch), 2022\nThe script allows batch convert a PCD file to a mesh file.",
  "code": "\n'''\nAuthor: Andrea Settimi (andrea.settimi@epfl.ch), 2022\nThe script allows batch convert a PCD file to a mesh file.\n'''\n\n\nimport os\nimport sys\nimport rhinoscriptsyntax as rs\n\n\nIN_PCD_DIR = r\"C:\\augmented-stacking-dataset\\util\\test_folder_in\"  # replace with clouds dir\nOUT_MESH_DIR = r\"C:\\augmented-stacking-dataset\\util\\test_folder_out\"  # replace with out dir\n\n\ndef main():\n    print(\"POP\")\n    \n    # Get all pcd file paths\n    pcds = []\n    pcd_names = []\n    for file in os.listdir(IN_PCD_DIR):\n        if file.endswith(\".ply\"):\n            pcd_file = os.path.join(IN_PCD_DIR, file)\n            pcds.append(pcd_file)\n            pcd_names.append(pcd_file.split('_')[-1].split('.')[0])\n    \n    # Get pcd, scale to m, mesh and export\n    rs.EnableRedraw(True)\n    for i in range(len(pcds)):\n        filepath = pcds[i]\n        rs.Command(\"!_-Import \\\"\" + filepath + \"\\\" -Enter -Enter\")\n        rs.Command(\"_SelectAll\")\n        rs.Command(\"_Cockroach_MeshPoisson\" + \" -Enter -Enter -Enter !\")\n\n        rs.UnselectAllObjects()\n        filename = \"remeshed_high_res_\" + pcd_names[i] + '.ply'\n        filepath = os.path.join(OUT_MESH_DIR, filename)\n\n        rs.Command(\"_-SelMesh\")  # mm to m\n        rs.Command(\"_-Scale 0 1000\")\n\n        rs.Command('! _-Export \"{}\" _Enter _Enter'.format(filepath), True)\n        \n        rs.UnselectAllObjects()\n        rs.Command(\"-SelAll\")\n        rs.Command(\"-Delete\")\n\nif __name__ == \"__main__\":\n    main()",
  "language": "python",
  "imports": [
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}