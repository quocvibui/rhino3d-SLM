{
  "source_url": "https://github.com/mcneel/compute.rhino3d/blob/677087c3683fb307c9d3a6e55651377c28c41e92/src/ghhops-server-py/examples/app_query.py",
  "repo": "mcneel/compute.rhino3d",
  "repo_stars": 378,
  "repo_description": "REST geometry server based on RhinoCommon and headless Rhino",
  "license": "NOASSERTION",
  "filepath": "src/ghhops-server-py/examples/app_query.py",
  "instruction": "Hops flask middleware example",
  "code": "\"\"\"Hops flask middleware example\"\"\"\nfrom flask import Flask\nimport sys\n\nsys.path.append(r\"C:\\Users\\ein\\gits\\compute.rhino3d\\src\\ghhops-server-py\")\n\nimport ghhops_server as hs\nimport rhino3dm\n\n# register hops app as middleware\napp = Flask(__name__)\nhops: hs.HopsFlask = hs.Hops(app)\n\n\n# flask app can be used for other stuff drectly\n@app.route(\"/help\")\ndef help():\n    return \"Welcome to Grashopper Hops for CPython!\"\n\n\n@hops.component(\n    \"/curves/pointAt\",\n    name=\"PointAt\",\n    nickname=\"PtAt\",\n    description=\"Get point along curve\",\n    icon=\"examples/pointat.png\",\n    inputs=[\n        hs.HopsCurve(\"Curve\", \"C\", \"Curve to evaluate\"),\n        hs.HopsNumber(\"t\", \"t\", \"Parameter on Curve to evaluate\"),\n    ],\n    outputs=[hs.HopsPoint(\"P\", \"P\", \"Point on curve at t\")],\n)\ndef pointat(curve: rhino3dm.Curve, t=0.0):\n    return curve.PointAt(t)\n\n\n@hops.component(\n    \"/surfaces/srf4pt\",\n    name=\"4Point Surface\",\n    nickname=\"Srf4Pt\",\n    icon=\"srf4pt.png\",\n    description=\"Create ruled surface from four points\",\n    inputs=[\n        hs.HopsPoint(\"Corner A\", \"A\", \"First corner\"),\n        hs.HopsPoint(\"Corner B\", \"B\", \"Second corner\"),\n        hs.HopsPoint(\"Corner C\", \"C\", \"Third corner\"),\n        hs.HopsPoint(\"Corner D\", \"D\", \"Fourth corner\"),\n    ],\n    outputs=[hs.HopsSurface(\"Surface\", \"S\", \"Resulting surface\")],\n)\ndef ruled_surface(\n    a: rhino3dm.Point3d,\n    b: rhino3dm.Point3d,\n    c: rhino3dm.Point3d,\n    d: rhino3dm.Point3d,\n):\n    edge1 = rhino3dm.LineCurve(a, b)\n    edge2 = rhino3dm.LineCurve(c, d)\n    return rhino3dm.NurbsSurface.CreateRuledSurface(edge1, edge2)\n\n\n@hops.component(\n    \"/add\",\n    name=\"Add\",\n    nickname=\"Add\",\n    description=\"Add numbers with CPython\",\n    icon=\"add.png\",\n    inputs=[\n        hs.HopsNumber(\"A\", \"A\", \"First number\"),\n        hs.HopsNumber(\"B\", \"B\", \"Second number\"),\n    ],\n    outputs=[hs.HopsNumber(\"Sum\", \"S\", \"A + B\")],\n)\ndef add(a: float, b: float):\n    return a + b\n\n\n@hops.component(\n    \"/multiply\",\n    inputs=[hs.HopsNumber(\"A\"), hs.HopsNumber(\"B\")],\n    outputs=[hs.HopsNumber(\"Multiply\")],\n)\ndef BinaryMultiply(a: float, b: float):\n    return a * b\n\n\nif __name__ == \"__main__\":\n    app.run()\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": true
}