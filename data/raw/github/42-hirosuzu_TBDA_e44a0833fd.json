{
  "source_url": "https://github.com/42-hirosuzu/TBDA/blob/e5c4ce5d7c527bb719b0325b45e2ba07de994f3b/server/.venv/Lib/python3.12/site-packages/compute_rhino3d/Util.py",
  "repo": "42-hirosuzu/TBDA",
  "repo_stars": 0,
  "repo_description": "Browser slider → REST API → Grasshopper → GLB → three.js rendering",
  "license": "unknown",
  "filepath": "server/.venv/Lib/python3.12/site-packages/compute_rhino3d/Util.py",
  "instruction": null,
  "code": "import rhino3dm\nimport json\nimport requests\n\n__version__ = '0.12.2'\n\nurl = 'https://compute.rhino3d.com/'\nauthToken = ''\napiKey = ''\nstopat = 0\n\n\ndef ComputeFetch(endpoint, arglist):\n    class __Rhino3dmEncoder(json.JSONEncoder):\n        def default(self, o):\n            if hasattr(o, \"Encode\"):\n                return o.Encode()\n            return json.JSONEncoder.default(self, o)\n    global authToken\n    global apiKey\n    global url\n    global stopat\n    posturl = url + endpoint\n    if(stopat>0):\n        if(posturl.find('?')>0): posturl += '&stopat='\n        else: posturl += '?stopat='\n        posturl += str(stopat)\n    postdata = json.dumps(arglist, cls=__Rhino3dmEncoder)\n    headers = { 'User-Agent': 'compute.rhino3d.py/' + __version__ }\n    if authToken:\n        headers['Authorization'] = 'Bearer ' + authToken\n    if apiKey:\n        headers['RhinoComputeKey'] = apiKey\n    r = requests.post(posturl, data=postdata, headers=headers)\n    return r.json()\n\n\ndef PythonEvaluate(script, inputs, output_names):\n    \"\"\"\n    Evaluate a python script on the compute server. The script can reference an\n    `input` parameter which is passed as a dictionary. The script also has\n    access to an 'output' parameter which is returned from the server.\n\n    Args:\n        script (str): the python script to evaluate\n        inputs (dict): dictionary of data passed to the server for use by the\n                       script as an input variable\n        output_names (list): list of strings defining which variables in the\n                       script to return\n    Returns:\n        dict: The script has access to an output dict variable that it can\n              fill with values. This information is returned from the server\n              to the client.\n    \"\"\"\n    encodedInput = rhino3dm.ArchivableDictionary.EncodeDict(inputs)\n    url = 'rhino/python/evaluate'\n    args = [script, json.dumps(encodedInput), output_names]\n    response = ComputeFetch(url, args)\n    output = rhino3dm.ArchivableDictionary.DecodeDict(json.loads(response))\n    return output\n\n\ndef DecodeToCommonObject(item):\n    if item is None:\n        return None\n    if isinstance(item, list):\n        return [DecodeToCommonObject(x) for x in item]\n    return rhino3dm.CommonObject.Decode(item)\n\n\ndef DecodeToPoint3d(item):\n    if item is None:\n        return None\n    if isinstance(item, list):\n        return [DecodeToPoint3d(x) for x in item]\n    return rhino3dm.Point3d(item['X'], item['Y'], item['Z'])\n\n\ndef DecodeToVector3d(item):\n    if item is None:\n        return None\n    if isinstance(item, list):\n        return [DecodeToVector3d(x) for x in item]\n    return rhino3dm.Vector3d(item['X'], item['Y'], item['Z'])\n\n\ndef DecodeToLine(item):\n    if item is None:\n        return None\n    if isinstance(item, list):\n        return [DecodeToLine(x) for x in item]\n    start = DecodeToPoint3d(item['From'])\n    end = DecodeToPoint3d(item['To'])\n    return rhino3dm.Line(start,end)\n\n\ndef DecodeToBoundingBox(item):\n    if item is None:\n        return None\n    if isinstance(item, list):\n        return [DecodeToBoundingBox(x) for x in item]\n    return rhino3dm.BoundingBox(item['Min']['X'], item['Min']['Y'], item['Min']['Z'], item['Max']['X'], item['Max']['Y'], item['Max']['Z'])\n\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}