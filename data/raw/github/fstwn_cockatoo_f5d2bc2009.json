{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_CreateManualKnitConstraint.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_CreateManualKnitConstraint.py",
  "instruction": "Used to create a manual KnitConstraint by supplying curves for start, end, left\nboundary and right boundary. Together, these curves must form a closed loop!\n    Inputs:\n        StartCourse: The curve...",
  "code": "\"\"\"\nUsed to create a manual KnitConstraint by supplying curves for start, end, left\nboundary and right boundary. Together, these curves must form a closed loop!\n    Inputs:\n        StartCourse: The curve that defines the start of the knit.\n                     {item, curve}\n        EndCourse: The curve that defines the end of the knit.\n                   {item, curve}\n        LeftBoundary: The curve that defines the left boundary of the knit.\n                      {item, curve}\n        RightBoundary: Curve that defines the right boundary of the knit.\n                       {item, curve}\n    Output:\n        KnitConstraint: The KnitConstraint resulting from the given inputs.\n                        {item, KnitConstraint}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200731\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"CreateManualKnitConstraint\"\nghenv.Component.NickName =\"CMKC\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"04 Constraints\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    from cockatoo import KnitConstraint\nexcept ImportError as e:\n    errMsg = \"The Cockatoo python module seems to be not correctly \" + \\\n             \"installed! Please make sure the module is in you search \" + \\\n             \"path, see README for instructions!.\"\n    raise ImportError(errMsg)\n\nclass CreateManualKnitConstraint(component):\n    \n    def __init__(self):\n        super(CreateManualKnitConstraint, self).__init__()\n        self.SC = None\n        self.EC = None\n        self.LB = []\n        self.RB = []\n    \n    def get_ClippingBox(self):\n        return Rhino.Geometry.BoundingBox()\n    \n    def DrawViewportWires(self, args):\n        try:\n            # get display from args\n            display = args.Display\n            \n            if self.SC and self.EC:\n                # diplay colors for start and end in custom display\n                scol = System.Drawing.Color.Red\n                ecol = System.Drawing.Color.Green\n                bcol = System.Drawing.Color.SkyBlue\n                # add start and end to customdisplay\n                display.DrawCurve(self.SC, scol, 3)\n                display.DrawCurve(self.EC, ecol, 3)\n                [display.DrawCurve(c, bcol, 2) for c in self.LB]\n                [display.DrawCurve(c, bcol, 2) for c in self.RB]\n            \n        except Exception, e:\n            System.Windows.Forms.MessageBox.Show(str(e),\n                                                 \"Error while drawing preview!\")\n    \n    def RunScript(self, StartCourse, EndCourse, LeftBoundary, RightBoundary):\n        # define default break angle for mesh boundary\n        \n        NullTree = Grasshopper.DataTree[object]()\n        \n        input_complete = True\n        if not StartCourse:\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, \"No StartCourse input!\")\n            input_complete = False\n        if not EndCourse:\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, \"No EndCourse input!\")\n            input_complete = False\n        if not LeftBoundary:\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, \"No LeftBoundary input!\")\n            input_complete = False\n        if not RightBoundary:\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, \"No RightBoundary input!\")\n            input_complete = False\n        \n        if not input_complete:\n            return NullTree\n        else:\n            # StartBoundary startpoint\n            ssp = StartCourse.PointAtStart\n            # EndBoundary startpoint\n            esp = EndCourse.PointAtStart\n            # LeftBoundary startpoint\n            lsp = LeftBoundary.PointAtStart\n            # RightBoundary startpoint\n            rsp = RightBoundary.PointAtStart\n            \n            # define maximum distance for boundary direction flipping as 10 * abstol\n            md = Rhino.RhinoDoc.ActiveDoc.ModelAbsoluteTolerance\n            md = md * 10\n            \n            # check for flipping of left and right boundaries\n            lbsccp = StartCourse.ClosestPoint(lsp, md)\n            rbsccp = StartCourse.ClosestPoint(rsp, md)\n            if not lbsccp[0]:\n                LeftBoundary.Reverse()\n            if not rbsccp[0]:\n                RightBoundary.Reverse()\n            \n            # check for flipping of start and end courses\n            scrbcp = LeftBoundary.ClosestPoint(ssp, md)\n            ecrbcp = LeftBoundary.ClosestPoint(esp, md)\n            if not scrbcp[0]:\n                StartCourse.Reverse()\n            if not ecrbcp[0]:\n                EndCourse.Reverse()\n            \n            # set left and right for preview drawing\n            self.SC = StartCourse\n            self.EC = EndCourse\n            self.LB = [LeftBoundary]\n            self.RB = [RightBoundary]\n            \n            KC = KnitConstraint(StartCourse, EndCourse, [LeftBoundary], [RightBoundary])\n            \n            return KC\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}