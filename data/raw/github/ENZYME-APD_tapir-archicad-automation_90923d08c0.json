{
  "source_url": "https://github.com/ENZYME-APD/tapir-archicad-automation/blob/3cc4d67228a62381d6cf7d9c0c3897171044ace2/sandbox/grasshopper-plugin/Examples/template_component.py",
  "repo": "ENZYME-APD/tapir-archicad-automation",
  "repo_stars": 94,
  "repo_description": "The easiest way to use the JSON/Python API from Archicad without knowing how to code.",
  "license": "MIT",
  "filepath": "sandbox/grasshopper-plugin/Examples/template_component.py",
  "instruction": "NOTE: This is Optional __all__ is a list of strings, containsing the class / component names.",
  "code": "#!/usr/bin/env ipy\n# -*- coding: utf-8 -*-\n\n# NOTE: This is Optional\n# __all__ is a list of strings, containsing the class / component names.\n__all__ = ['Sample_Component']\n\n# - - - - - - - - BUILT-IN IMPORTS\nimport System\nimport traceback # for error handling\n\n# NOTE: tapir_py is copied just before compiling the grasshopper plugin.\n# So, it is assumed that tapir_py can be imported locally.\n# - - - - - - - - LOCAL IMPORTS\nimport tapir\nfrom tapir_py import core\n\n# - - - - - - - - RH/GH IMPORTS\n# All components / nodes inherit from 'dotnetcompiledcomponent' class.\nfrom ghpythonlib.componentbase import dotnetcompiledcomponent as component\nfrom Grasshopper.Kernel import GH_RuntimeMessageLevel as RML # for error handling\nimport Rhino, Grasshopper, GhPython\n\n# - - - - - - - - COMPONENT\nclass Sample_Component(component):\n\n    # Runs when the grasshopper window is loaded\n    def __new__(cls):\n        # Creates a new instance of this class / component inside Grasshopper.\n        # Source: https://developer.rhino3d.com/api/grasshopper/html/T_Grasshopper_Kernel_GH_Component.htm\n        # cls: Component Class\n        # Name\n        # NickName\n        # Description\n        # Category (The plugin category you see on Grasshopper Ribbon)\n        # SubCategory\n        instance = Grasshopper.Kernel.GH_Component.__new__(cls,\n                                                            \"ComponentName\",\n                                                            \"ComponentNickName\",\n                                                            \"Component description goes here.\",\n                                                            \"tAPIr\", # NOTE: Do not change this\n                                                            \"SubCategory\")\n        return instance\n    \n    def get_ComponentGuid(self):\n        # It is better to generate a GUID and then paste it here.\n        # guid = System.Guid.NewGuid()\n        # But this GUID needs to be static, and should be unique\n        # to each component or node.\n        # So when changes are made to this component, old components\n        # are updated by matching this GUID.\n        return System.Guid(\"00000000-0000-0000-0000-000000000000\")\n    \n    # NOTE: DO Not change this.\n    # This is a template method to create input(s) / output(s) on the component.\n    def SetUpParam(self, p, name, nickname, description):\n        p.Name = name\n        p.NickName = nickname\n        p.Description = description\n        p.Optional = True\n\n    # At this point, there are no input / output parameters on this component.\n    # Create and Register Inputs to the component\n    def RegisterInputParams(self, pManager):\n        \"\"\"\n        Different type of parameters can be set.\n\n        Param_Arc\n        Param_Boolean\n        Param_Box\n        Param_Brep\n        Param_Circle\n        Param_Colour\n        Param_Complex\n        Param_Culture\n        Param_Curve\n        Param_Field\n        Param_FilePath\n        Param_GenericObject\n        Param_Geometry\n        Param_Group\n        Param_Guid\n        Param_Integer\n        Param_Interval\n        Param_Interval2D\n        Param_Interval2D_OBSOLETE\n        Param_LatLonLocation\n        Param_Line\n        Param_Matrix\n        Param_Mesh\n        Param_MeshFace\n        Param_MeshParameters\n        Param_Number\n        Param_OGLShader\n        Param_Plane\n        Param_Point\n        Param_Rectangle\n        Param_ScriptVariable\n        Param_String\n        Param_StructurePath\n        Param_SubD\n        Param_Surface\n        Param_Time\n        Param_Transform\n        Param_Vector\n        \"\"\"\n        # Define the type of input paramter.\n        new_parameter = Grasshopper.Kernel.Parameters.Param_Point()\n        self.SetUpParam(new_parameter,\n                        name=\"Position\",\n                        nickname=\"P\",\n                        description=\"Position as Point\")\n        # This sets up the type of access (item / List / Tree)\n        new_parameter.Access = Grasshopper.Kernel.GH_ParamAccess.item\n        \n        # Add this paramter to this component under Inputs\n        self.Params.Input.Add(new_parameter)\n\n    def RegisterOutputParams(self, pManager):\n        # Define the type of output parameter\n        new_parameter = Grasshopper.Kernel.Parameters.Param_Vector()\n        self.SetUpParam(new_parameter,\n                        name=\"Vector\",\n                        nickname=\"V\",\n                        description=\"Position Vector\")\n        # Add this parameter to this component under Outputs\n        self.Params.Output.Add(new_parameter)\n\n        # Repeat same if you want to add more outputs\n        second_parameter = Grasshopper.Kernel.Parameters.Param_Line()\n        self.SetUpParam(second_parameter,\n                        name=\"Line\",\n                        nickname=\"L\",\n                        description=\"Line representing the Position Vector\")\n        self.Params.Output.Add(second_parameter)\n    \n    # This is the method that the component calls\n    # to execute your script.\n    # It interacts directly with IGH_DataAccess class (input / output data)\n    # It calls the RunScript method where you can place the business logic.\n    def SolveInstance(self, DA):\n        # number of inputs need to match the number of inputs registered.\n        p0 = self.marshal.GetInput(DA, 0)\n        #p1 = self.marshal.GetInput(DA, 1) # If there are two inputs\n        result = self.RunScript(p0) #result = self.RunScript(01, 01) # If there are two inputs\n\n        # Pass result / return values from RunScript to output params\n        if result is not None:\n            self.marshal.SetOutput(result[0], DA, 0, True) # Vector - Check RunScript\n            self.marshal.SetOutput(result[1], DA, 1, True)  # Line - Check RunScript\n\n    # Set the Icon for this component.\n    # NOTE: Creating Icon as a 64Base String is outside the scope of this tutorial. I will skip it for now.\n    def get_internal_Icon_24x24(self):\n        o = \"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAADJSURBVEhL7ZNbDsQgCEV1/4vu8PYCpm0yyfyMJzFeEARMOw7/whyXKWOifU1avKtJSDzGhJY4i08UR0oAzN8KRNzylaaTkS9KuP20M6jZkEttpQl0ZC2mfiu8niLFK6m51um7CeCtd/GgXxfY+klvJrgvEPazX3PBL8XW+W+QLiZ+v9hB1WGX7911/2+IZNiYjmp8xqXrTqTcgJ0wQbwjLUvAKa0A6gXmFmBkPOw+LCBg17sJrDtSftgTcqeioSHGNe++DoevGeMDe+h/wjhtikQAAAAASUVORK5CYII=\"\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\n    \n    # - - - - - - - - - - - - - - - - - - - - - - - -\n    \n    def __init__(self):\n        # Any initialisations can be done here\n        pass\n\n    # NOTE: The number of arguments for Runscript\n    # should match the number of inputs that were\n    # created in RegisterInputParams()\n    def RunScript(self, point):\n        # This is where the your code needs to be placed.\n        # Everything inside RunScript is executed everytime\n        # the component is refreshed / recomputed,\n        # or when inputs / outputs are connected and \n        # disconnected.\n\n        # SAMPLE CODE\n        origin = Rhino.Geometry.Point3d.Origin\n        line = Rhino.Geometry.Line(origin, point)\n        vector = line.Direction\n\n        # The number and order of Returning values\n        # need to match the number and order of outputs\n        # that were created in RegisterOutputParams()\n        return vector, line\n      \n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib"
  ],
  "has_docstring": true
}