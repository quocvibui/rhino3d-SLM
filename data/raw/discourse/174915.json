{
  "source_url": "https://discourse.mcneel.com/t/rhino-8-bug-ghpython-gh-component-sdk-mode-broken/174915",
  "topic_id": 174915,
  "title": "Rhino 8 Bug: GHPython GH_Component SDK Mode Broken",
  "question": "Hi McNeel,\n\n\nBoth GHPython components that ship with Rhino 8.4.24023.15001 break when running in SDK mode:\n\n\n2024-02-05 12_50_34-Grasshopper - unnamed\n1532Ã—1091 118 KB\n\n\nBest,\n\n\nAnders",
  "code_blocks": [
    {
      "code": "------ GhPython, Version=8.5.24044.18001, Culture=neutral, PublicKeyToken=null\n   at __RhinoCodeScript__.<>c__DisplayClass0_0.<__RunScript__>g__AssemblyLoaded|0(Object sender, AssemblyLoadEventArgs args)\n   at System.Runtime.Loader.AssemblyLoadContext.<LoadFromPath>g____PInvoke|5_0(IntPtr ptrNativeAssemblyBinder, UInt16* ilPath, UInt16* niPath, ObjectHandleOnStack retAssembly)\n   at System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath(String assemblyPath)\n   at System.Reflection.Assembly.LoadFrom(String assemblyFile)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run4[T0,T1,T2,T3,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3)\n   at System.Dynamic.UpdateDelegates.UpdateAndExecute3[T0,T1,T2,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`6.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run4[T0,T1,T2,T3,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3)\n   at IronPython.Compiler.Ast.CallExpression.Invoke1Instruction.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`5.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run2[T0,T1,TRet](T0 arg0, T1 arg1)\n   at IronPython.Compiler.PythonScriptCode.RunWorker(CodeContext ctx)\n   at IronPython.Compiler.PythonScriptCode.Run(Scope scope)\n   at Microsoft.Scripting.Hosting.CompiledCode.Execute(ScriptScope scope)\n   at RhinoPython.PyCompiledCode.Execute(PythonScript scope)\n   at GhPython.Component.ScriptingAncestorComponent.SafeSolveInstance(IGH_DataAccess da)\n   at GhPython.Component.SafeComponent.SolveInstance(IGH_DataAccess DA)\n   at Grasshopper.Kernel.GH_Component.Solution_Compute_MixedAccess(GH_StructureIterator it)\n   at Grasshopper.Kernel.GH_Component.ComputeData()\n   at Grasshopper.Kernel.GH_Document.SolveAllObjects(GH_SolutionMode mode)\n   at Grasshopper.Kernel.GH_Document.NewSolution(Boolean expireAllObjects, GH_SolutionMode mode)\n   at Grasshopper.Kernel.GH_Document.NewSolution(Boolean expireAllObjects)\n   at Grasshopper.Kernel.GH_Document.DocObjSolutionExpired(Object sender, GH_SolutionExpiredEventArgs e)\n   at Grasshopper.Kernel.GH_DocumentObject.OnSolutionExpired(Boolean recompute)\n   at Grasshopper.Kernel.GH_DocumentObject.ExpireSolution(Boolean recompute)\n   at Grasshopper.Kernel.GH_ActiveObject.ExpireSolution(Boolean recompute)\n   at GhPython.Forms.PythonScriptForm.SetDefinitionValue(Boolean close, Boolean expire)\n   at GhPython.Forms.PythonScriptForm.switchTocomponentModeMenuItem_Click(Object sender, EventArgs e)\n   at System.Windows.Forms.ToolStripMenuItem.OnClick(EventArgs e)\n   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)\n   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)\n   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)\n   at System.Windows.Forms.ToolStripDropDown.OnMouseUp(MouseEventArgs mea)\n   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)\n   at System.Windows.Forms.Control.WndProc(Message& m)\n   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)\n   at System.Windows.Forms.ToolStrip.WndProc(Message& m)\n   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)\n   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, WM msg, IntPtr wparam, IntPtr lparam)",
      "language": "unknown",
      "author": "eirannejad",
      "post_number": 15,
      "is_solution": false
    },
    {
      "code": "# ghpythonlib package\n__all__ = [\"components\", \"treehelpers\", \"parallel\", \"componentbase\", \"component\"]\n\nimport os.path as op\nimport clr\nclr.AddReference(\"Grasshopper, Culture=neutral, PublicKeyToken=dda4f5ec2cd80803\")\n\nimport System\nimport Grasshopper\n\ntry:\n    clr.AddReference(\"GhPython\")\nexcept:\n    ghdllpath = Grasshopper.Instances.ComponentServer.GetType().Assembly.Location\n    System.Reflection.Assembly.LoadFrom(\n        op.join(op.dirname(ghdllpath), \"Components\\GhPython.gha\")\n    )\n    clr.AddReference(\"GhPython\")\n\nfrom ghpythonlib import components\nfrom ghpythonlib import treehelpers\nfrom ghpythonlib import parallel\nfrom ghpythonlib import componentbase\nfrom ghpythonlib import component",
      "language": "python",
      "author": "eirannejad",
      "post_number": 16,
      "is_solution": true
    }
  ],
  "tags": [
    "boolean",
    "file-io",
    "grasshopper",
    "python"
  ],
  "has_accepted_answer": true,
  "category_id": 8,
  "posts_count": 21,
  "views": 1136
}