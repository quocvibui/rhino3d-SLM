{
  "source_url": "https://github.com/Eridaa/1.RhinoGH--Python-hops-examples/blob/db30011918629b550eb1e26aa638723944303b9a/AS01/2.%20networks/app.py",
  "repo": "Eridaa/1.RhinoGH--Python-hops-examples",
  "repo_stars": 2,
  "repo_description": null,
  "license": "unknown",
  "filepath": "AS01/2. networks/app.py",
  "instruction": null,
  "code": "from flask import Flask\nimport ghhops_server as hs\nimport rhino3dm as rg\nimport geometry as geo\nimport networkx as nx\n\napp = Flask(__name__)\nhops = hs.Hops(app)\n\n\n\n@hops.component(\n    \"/createGraph\",\n    name = \"Create Graph\",\n    inputs=[\n        hs.HopsInteger(\"Count X\", \"X\", \"Number of node in X\", hs.HopsParamAccess.ITEM, default= 1),\n        hs.HopsInteger(\"Count Y\", \"Y\", \"Number of node in Y\", hs.HopsParamAccess.ITEM, default= 1),\n        hs.HopsInteger(\"Layout\", \"L\", \"Layout to order Nodes\", hs.HopsParamAccess.ITEM, default= 0),\n\n\n    ],\n    outputs=[\n       hs.HopsPoint(\"Nodes\",\"N\",\"List of Nodes \", hs.HopsParamAccess.LIST),\n       hs.HopsCurve(\"Edges\",\"E\",\"List of Edges \", hs.HopsParamAccess.LIST)\n\n    ]\n)\ndef createGraph(X, Y, layout):\n\n    G = geo.createGridGraph(X, Y)\n    GW = geo.addRandomWeights(G)\n\n    nodes = geo.getNodes(GW, layout)\n    edges = geo.getEdges(GW, layout) \n\n    return nodes, edges\n\n@hops.component(\n    \"/convertToNetworkX\",\n    name = \" Convert Graph to NetworkX\",\n    inputs=[\n        hs.HopsPoint(\"Nodes\", \"N\", \"List of Nodes\",hs.HopsParamAccess.LIST),\n        hs.HopsCurve(\"Edges\", \"E\", \"List of Edges\", hs.HopsParamAccess.LIST),\n        hs.HopsInteger(\"Layout\", \"L\", \"Layout to order Nodes\", hs.HopsParamAccess.ITEM, default= 0)\n    ],\n    outputs=[\n        hs.HopsPoint(\"Nodes\",\"N\",\"List of Nodes \", hs.HopsParamAccess.LIST),\n        hs.HopsCurve(\"Edges\",\"E\",\"List of Edges \", hs.HopsParamAccess.LIST)\n    ]\n)\n\ndef convertToNetworkX(nodes, edges, layout):\n\n    G = nx.Graph()\n\n    nd =[]\n\n    #adding nodes\n    for node in nodes:\n        G.add_node(node)\n        nd.append((node.X, node.Y, node.Z))\n\n    #adding edges\n    for edge in edges:\n       pstart= nd.index((edge.PointAtStart.X, edge.PointAtStart.Y, edge.PointAtStart.Z))\n       pend = nd.index((edge.PointAtEnd.X, edge.PointAtEnd.Y, edge.PointAtEnd.Z)) \n       G.add_edge(pstart, pend)\n    \n    #applying random weights and getting nodes and edges as outputs\n    GW = geo.addRandomWeights(G)\n    \n    nodes = geo.getNodes(GW, layout)\n    edges = geo.getEdges(GW, layout)\n\n    return nodes, edges\n\nif __name__== \"__main__\":\n    app.run(debug=True)\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}