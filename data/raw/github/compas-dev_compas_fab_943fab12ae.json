{
  "source_url": "https://github.com/compas-dev/compas_fab/blob/431e82c810ea299b9727b010b73a39abc73c5d62/src/compas_fab/ghpython/components/Cf_PlanCartesianMotion/code.py",
  "repo": "compas-dev/compas_fab",
  "repo_stars": 124,
  "repo_description": "Robotic fabrication package for the COMPAS Framework.",
  "license": "MIT",
  "filepath": "src/compas_fab/ghpython/components/Cf_PlanCartesianMotion/code.py",
  "instruction": "Calculate a cartesian motion path (linear in tool space).",
  "code": "\"\"\"\nCalculate a cartesian motion path (linear in tool space).\n\nCOMPAS FAB v1.0.2\n\"\"\"\n\nfrom compas_rhino.conversions import plane_to_compas_frame\nfrom ghpythonlib.componentbase import executingcomponent as component\nfrom scriptcontext import sticky as st\n\nfrom compas_fab.ghpython.components import create_id\nfrom compas_fab.robots import FrameWaypoints\n\n\nclass PlanCartesianMotion(component):\n    def RunScript(\n        self, robot, planes, start_configuration, group, attached_collision_meshes, path_constraints, max_step, compute\n    ):\n        key = create_id(self, \"trajectory\")\n\n        max_step = float(max_step) if max_step else 0.01\n        path_constraints = list(path_constraints) if path_constraints else None\n        attached_collision_meshes = list(attached_collision_meshes) if attached_collision_meshes else None\n\n        if robot and robot.client and robot.client.is_connected and start_configuration and planes and compute:\n            frames = [plane_to_compas_frame(plane) for plane in planes]\n            frame_waypoints = FrameWaypoints(frames)\n            st[key] = robot.plan_cartesian_motion(\n                frame_waypoints,\n                start_configuration=start_configuration,\n                group=group,\n                options=dict(\n                    max_step=max_step,\n                    path_constraints=path_constraints,\n                    attached_collision_meshes=attached_collision_meshes,\n                ),\n            )\n\n        trajectory = st.get(key, None)\n        return trajectory\n",
  "language": "python",
  "imports": [
    "ghpythonlib",
    "scriptcontext"
  ],
  "has_docstring": true
}