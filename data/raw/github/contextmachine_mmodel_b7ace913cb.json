{
  "source_url": "https://github.com/contextmachine/mmodel/blob/0545e5c2a11c641fc54e91f603e709d3dea549f3/connectors/conversions/gmdl/txt.py",
  "repo": "contextmachine/mmodel",
  "repo_stars": 0,
  "repo_description": "Deployment branch",
  "license": "Apache-2.0",
  "filepath": "connectors/conversions/gmdl/txt.py",
  "instruction": null,
  "code": "from geomdl import _exchange as exch\nfrom geomdl._utilities import export\nfrom geomdl.exceptions import GeomdlException\n\n\ndef read_file(file, **kwargs):\n    binary = kwargs.get('binary', False)\n    skip_lines = kwargs.get('skip_lines', 0)\n    callback = kwargs.get('callback', None)\n    try:\n        for _ in range(skip_lines):\n            next(file)\n        content = fp.read() if callback is None else callback(fp)\n        return content\n    except IOError as e:\n        raise GeomdlException(\"An error occurred during reading '{0}': {1}\".format(file_name, e.args[-1]))\n    except Exception as e:\n        raise GeomdlException(\"An error occurred: {0}\".format(str(e)))\n\n\ndef write_file(file, content, **kwargs):\n    binary = kwargs.get('binary', False)\n    callback = kwargs.get('callback', None)\n    try:\n\n        if callback is None:\n            fp.write(content)\n        else:\n            callback(fp, content)\n        return True\n    except IOError as e:\n        raise GeomdlException(\"An error occurred during writing '{0}': {1}\".format(file_name, e.args[-1]))\n    except Exception as e:\n        raise GeomdlException(\"An error occurred: {0}\".format(str(e)))\n\n\n@export\ndef import_txt(file, two_dimensional=False, **kwargs):\n    \"\"\" Reads control points from a text file and generates a 1-dimensional list of control points.\n    The following code examples illustrate importing different types of text files for curves and surfaces:\n    .. code-block:: python\n        :linenos:\n        # Import curve control points from a text file\n        curve_ctrlpts = exchange.import_txt(file_name=\"control_points.txt\")\n        # Import surface control points from a text file (1-dimensional file)\n        surf_ctrlpts = exchange.import_txt(file_name=\"control_points.txt\")\n        # Import surface control points from a text file (2-dimensional file)\n        surf_ctrlpts, size_u, size_v = exchange.import_txt(file_name=\"control_points.txt\", two_dimensional=True)\n    If argument ``jinja2=True`` is set, then the input file is processed as a `Jinja2 <http://jinja.pocoo.org/>`_\n    template. You can also use the following convenience template functions which correspond to the given mathematical\n    equations:\n    * ``sqrt(x)``:  :math:`\\\\sqrt{x}`\n    * ``cubert(x)``: :math:`\\\\sqrt[3]{x}`\n    * ``pow(x, y)``: :math:`x^{y}`\n    You may set the file delimiters using the keyword arguments ``separator`` and ``col_separator``, respectively.\n    ``separator`` is the delimiter between the coordinates of the control points. It could be comma\n    ``1, 2, 3`` or space ``1 2 3`` or something else. ``col_separator`` is the delimiter between the control\n    points and is only valid when ``two_dimensional`` is ``True``. Assuming that ``separator`` is set to space, then\n    ``col_operator`` could be semi-colon ``1 2 3; 4 5 6`` or pipe ``1 2 3| 4 5 6`` or comma ``1 2 3, 4 5 6`` or\n    something else.\n    The defaults for ``separator`` and ``col_separator`` are *comma (,)* and *semi-colon (;)*, respectively.\n    The following code examples illustrate the usage of the keyword arguments discussed above.\n    .. code-block:: python\n        :linenos:\n        # Import curve control points from a text file delimited with space\n        curve_ctrlpts = exchange.import_txt(file_name=\"control_points.txt\", separator=\" \")\n        # Import surface control points from a text file (2-dimensional file) w/ space and comma delimiters\n        surf_ctrlpts, size_u, size_v = exchange.import_txt(file_name=\"control_points.txt\", two_dimensional=True,\n                                                           separator=\" \", col_separator=\",\")\n    Please note that this function does not check whether the user set delimiters to the same value or not.\n    :param file_name: file name of the text file\n    :type file_name: str\n    :param two_dimensional: type of the text file\n    :type two_dimensional: bool\n    :return: list of control points, if two_dimensional, then also returns size in u- and v-directions\n    :rtype: list\n    :raises GeomdlException: an error occurred reading the file\n    \"\"\"\n    # Read file\n    content = file.read()\n\n    # Are we using a Jinja2 template?\n    j2tmpl = kwargs.get('jinja2', False)\n    if j2tmpl:\n        content = exch.process_template(content)\n\n    # File delimiters\n    col_sep = kwargs.get('col_separator', \";\")\n    sep = kwargs.get('separator', \",\")\n\n    return exch.import_text_data(content, sep, col_sep, two_dimensional)\n\n\n@export\ndef export_txt(obj, file, two_dimensional=False, **kwargs):\n    \"\"\" Exports control points as a text file.\n    For curves the output is always a list of control points. For surfaces, it is possible to generate a 2-dimensional\n    control point output file using ``two_dimensional``.\n    Please see :py:func:`.exchange.import_txt()` for detailed description of the keyword arguments.\n    :param obj: a spline geometry object\n    :type obj: abstract.SplineGeometry\n    :param file_name: file name of the text file to be saved\n    :type file_name: str\n    :param two_dimensional: type of the text file (only works for Surface objects)\n    :type two_dimensional: bool\n    :raises GeomdlException: an error occurred writing the file\n    \"\"\"\n    # Check if the user has set any control points\n    if obj.ctrlpts is None or len(obj.ctrlpts) == 0:\n        raise exch.GeomdlException(\"There are no control points to save!\")\n\n    # Check the usage of two_dimensional flag\n    if obj.pdimension == 1 and two_dimensional:\n        # Silently ignore two_dimensional flag\n        two_dimensional = False\n\n    # File delimiters\n    col_sep = kwargs.get('col_separator', \";\")\n    sep = kwargs.get('separator', \",\")\n\n    content = exch.export_text_data(obj, sep, col_sep, two_dimensional)\n    return write_file(file, content)\nimport rhino3dm._rhino3dm as rh\nrh.Transform.Rotation()\nrhino3dm.Transform.",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}