{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_UnitConverter.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_UnitConverter.py",
  "instruction": "Converts units specified in millimeters or with a signed string into document units.\n    Inputs:\n        Value: Signed value. Can end with mm, dm, cm, m. For example 10mm is 10 millimeters. {item,...",
  "code": "\"\"\"\nConverts units specified in millimeters or with a signed string into document units.\n    Inputs:\n        Value: Signed value. Can end with mm, dm, cm, m. For example 10mm is 10 millimeters. {item, number}\n    Outputs:\n        ModelUnits: The input number converted to current model units of the Rhino document {item, number}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200705\n\"\"\"\n\n# PYTHON MODULE IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# COMPONENT PROPERTIES\nghenv.Component.Name = \"UnitConverter\"\nghenv.Component.NickName = \"UC\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"10 Utilities\"\n\nclass UnitConverter(component):\n    \n    def splitString(self, strToSplit): \n        alpha = \"\" \n        num = \"\" \n        special = \"\" \n        for i in range(len(strToSplit)):\n            if (strToSplit[i].isdigit()) or strToSplit[i] == \".\": \n                num = num + strToSplit[i] \n            elif((strToSplit[i] >= 'A' and strToSplit[i] <= 'Z') or\n                 (strToSplit[i] >= 'a' and strToSplit[i] <= 'z')): \n                alpha += strToSplit[i] \n            else: \n                special += strToSplit[i] \n        \n        return alpha, num, special\n    \n    def RunScript(self, Value):\n        # get current Rhino unit system and absolute tolerance setting\n        musys = Rhino.RhinoDoc.ActiveDoc.ModelUnitSystem\n        abstol = Rhino.RhinoDoc.ActiveDoc.ModelAbsoluteTolerance\n        \n        # set component info message\n        self.Message = (\"UnitSystem: \" + str(musys) + \"\\n\"\n                                   \"Tolerance: \" + str(abstol))\n        \n        if Value:\n            if Value.startswith(\"1E\") \\\n            or Value.startswith(\"1e\") \\\n            or Value.startswith(\"1.0e\") \\\n            or Value.startswith(\"1.0E\"):\n                Value = \"{:.500f}\".format(float(Value))\n                Value = Value.rstrip(\"0\")\n            \n            alpha, num, special = self.splitString(Value)\n            if alpha == \"\" or alpha == \"mm\":\n                insys = Rhino.UnitSystem.Millimeters\n            elif alpha == \"cm\":\n                insys = Rhino.UnitSystem.Centimeters\n            elif alpha == \"dm\":\n                insys = Rhino.UnitSystem.Decimeters\n            elif alpha == \"m\":\n                insys = Rhino.UnitSystem.Meters\n            elif alpha == '\"' or alpha == \"in\":\n                insys = Rhino.UnitSystem.Inches\n            try:\n                ModelUnits = float(num) * Rhino.RhinoMath.UnitScale(insys, musys)\n            except:\n                rml = self.RuntimeMessageLevel.Error\n                self.AddRuntimeMessage(rml, \"Could not parse signed value.\")\n                return None\n        else:\n            ModelUnits = None\n        \n        # return outputs if you have them; here I try it for you:\n        return ModelUnits",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}