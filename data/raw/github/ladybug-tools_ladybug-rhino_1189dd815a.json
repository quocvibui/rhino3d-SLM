{
  "source_url": "https://github.com/ladybug-tools/ladybug-rhino/blob/f3efee1cc7d68fad592b2538ad7aedead49455fd/ladybug_rhino/fromhoneybee.py",
  "repo": "ladybug-tools/ladybug-rhino",
  "repo_stars": 12,
  "repo_description": "üêû ü¶è A library for translating between Ladybug Tools core libraries and Rhino CAD",
  "license": "AGPL-3.0",
  "filepath": "ladybug_rhino/fromhoneybee.py",
  "instruction": "Functions to translate from Honeybee geometries to Rhino geometries.",
  "code": "\"\"\"Functions to translate from Honeybee geometries to Rhino geometries.\"\"\"\nfrom __future__ import division\n\nfrom .config import current_tolerance\nfrom .fromgeometry import from_face3d, from_mesh3d, from_face3d_to_wireframe, \\\n    from_mesh3d_to_wireframe\n\ntry:\n    import Rhino.Geometry as rg\nexcept ImportError as e:\n    raise ImportError('Failed to import Rhino Geometry.\\n{}'.format(e))\n\ntry:  # import the core honeybee dependencies\n    from honeybee.model import Model\n    from honeybee.room import Room\n    from honeybee.face import Face\n    from honeybee.aperture import Aperture\n    from honeybee.door import Door\n    from honeybee.shade import Shade\n    from honeybee.shademesh import ShadeMesh\nexcept ImportError as e:\n    print('Failed to import honeybee. Translation from Honeybee objects '\n          'is unavailable.\\n{}'.format(e))\n\n\n\"\"\"________TRANSLATORS TO BREPS/MESHES________\"\"\"\n\n\ndef from_shade(shade):\n    \"\"\"Rhino Brep from a Honeybee Shade.\"\"\"\n    return from_face3d(shade.geometry)\n\n\ndef from_shade_mesh(shade_mesh):\n    \"\"\"Rhino Mesh from a Honeybee ShadeMesh.\"\"\"\n    return from_mesh3d(shade_mesh.geometry)\n\n\ndef from_door(door):\n    \"\"\"Rhino Breps from a Honeybee Door (with shades).\n\n    The first Brep in the returned result is the Door. All following Breps\n    are Door-assigned Shades.\n    \"\"\"\n    door_breps = [from_face3d(door.geometry)]\n    door_breps.extend([from_shade(shd) for shd in door.shades])\n    return door_breps\n\n\ndef from_aperture(aperture):\n    \"\"\"Rhino Breps from a Honeybee Aperture (with shades).\n\n    The first Brep in the returned result is the Aperture. All following Breps\n    are Aperture-assigned Shades.\n    \"\"\"\n    aperture_breps = [from_face3d(aperture.geometry)]\n    aperture_breps.extend([from_shade(shd) for shd in aperture.shades])\n    return aperture_breps\n\n\ndef from_face(face):\n    \"\"\"Rhino Breps from a Honeybee Face (with shades).\n\n    The first Brep in the returned result is the Face (with Apertures and Doors\n    joined into it). All following Breps are assigned Shades.\n    \"\"\"\n    face_breps = [from_face3d(face.punched_geometry)]\n    shade_breps = [from_shade(shd) for shd in face.shades]\n    for ap in face.apertures:\n        aperture_breps = from_aperture(ap)\n        face_breps.append(aperture_breps[0])\n        shade_breps.extend(aperture_breps[1:])\n    for dr in face.doors:\n        door_breps = from_aperture(dr)\n        face_breps.append(door_breps[0])\n        shade_breps.extend(door_breps[1:])\n    face_breps = list(rg.Brep.JoinBreps(face_breps, current_tolerance()))\n    return face_breps + shade_breps\n\n\ndef from_room(room):\n    \"\"\"Rhino Breps from a Honeybee Room (with shades).\n\n    The first Brep in the returned result is a joined Polyface Brep for the Room.\n    All following Breps are assigned Shades.\n    \"\"\"\n    room_breps = []\n    shade_breps = [from_shade(shd) for shd in room.shades]\n    for face in room.faces:\n        face_breps = from_face(face)\n        room_breps.append(face_breps[0])\n        shade_breps.extend(face_breps[1:])\n    room_breps = list(rg.Brep.JoinBreps(room_breps, current_tolerance()))\n    return room_breps + shade_breps\n\n\ndef from_model(model):\n    \"\"\"Rhino Breps and Meshes from a Honeybee Model.\n\n    The first Breps in the returned result will be joined Polyface Breps for each\n    Room in the Model. This will be followed by Breps for orphaned objects, which\n    will be followed by Breps for Shades assigned to any parent objects. Lastly,\n    there will be Meshes for any ShadeMeshes in the Model.\n    \"\"\"\n    parent_geo = []\n    shade_geo = [from_shade(shd) for shd in model.orphaned_shades]\n    for room in model.rooms:\n        room_breps = from_room(room)\n        parent_geo.append(room_breps[0])\n        shade_geo.extend(room_breps[1:])\n    for face in model.orphaned_faces:\n        face_breps = from_face(face)\n        parent_geo.append(face_breps[0])\n        shade_geo.extend(face_breps[1:])\n    for ap in model.orphaned_apertures:\n        ap_breps = from_aperture(ap)\n        parent_geo.append(ap_breps[0])\n        shade_geo.extend(ap_breps[1:])\n    for dr in model.orphaned_doors:\n        dr_breps = from_door(dr)\n        parent_geo.append(dr_breps[0])\n        shade_geo.extend(dr_breps[1:])\n    shade_mesh_geo = [from_shade_mesh(sm) for sm in model.shade_meshes]\n    return parent_geo + shade_geo + shade_mesh_geo\n\n\ndef from_hb_objects(hb_objects):\n    \"\"\"Rhino Breps and Meshes from a list of any Honeybee geometry objects.\n\n    Any Honeybee geometry object may be input to this method (Model, Room, Face,\n    Aperture, Door, Shade, ShadeMesh). The returned result will always have\n    Breps first and Meshes last (if applicable).\n    \"\"\"\n    brep_geo, mesh_geo = [], []\n    for hb_obj in hb_objects:\n        if isinstance(hb_obj, Room):\n            brep_geo.extend(from_room(hb_obj))\n        elif isinstance(hb_obj, Shade):\n            brep_geo.append(from_shade(hb_obj))\n        elif isinstance(hb_obj, Face):\n            brep_geo.extend(from_face(hb_obj))\n        elif isinstance(hb_obj, Aperture):\n            brep_geo.extend(from_aperture(hb_obj))\n        elif isinstance(hb_obj, Door):\n            brep_geo.extend(from_door(hb_obj))\n        elif isinstance(hb_obj, Model):\n            model_geo = from_model(hb_obj)\n            for geo in reversed(model_geo):\n                if isinstance(geo, rg.Mesh):\n                    mesh_geo.append(geo)\n                else:\n                    brep_geo.append(geo)\n        elif isinstance(hb_obj, ShadeMesh):\n            mesh_geo.append(from_shade_mesh(hb_obj))\n        else:\n            raise TypeError(\n                'Unrecognized honeybee object type: {}'.format(type(hb_obj)))\n    return brep_geo + mesh_geo\n\n\n\"\"\"________TRANSLATORS TO WIREFRAMES________\"\"\"\n\n\ndef from_shade_to_wireframe(shade):\n    \"\"\"Rhino PolyLineCurves from a Honeybee Shade.\"\"\"\n    return from_face3d_to_wireframe(shade.geometry)\n\n\ndef from_shade_mesh_to_wireframe(shade_mesh):\n    \"\"\"Rhino PolyLineCurves from a Honeybee ShadeMesh.\"\"\"\n    return from_mesh3d_to_wireframe(shade_mesh.geometry)\n\n\ndef from_door_to_wireframe(door):\n    \"\"\"Rhino PolyLineCurves from a Honeybee Door (with shades).\"\"\"\n    door_wires = from_face3d_to_wireframe(door.geometry)\n    for shd in door.shades:\n        door_wires.extend(from_shade_to_wireframe(shd))\n    return door_wires\n\n\ndef from_aperture_to_wireframe(aperture):\n    \"\"\"Rhino PolyLineCurves from a Honeybee Aperture (with shades).\"\"\"\n    aperture_wires = from_face3d_to_wireframe(aperture.geometry)\n    for shd in aperture.shades:\n        aperture_wires.extend(from_shade_to_wireframe(shd))\n    return aperture_wires\n\n\ndef from_face_to_wireframe(face):\n    \"\"\"Rhino PolyLineCurves from a Honeybee Face (with shades).\"\"\"\n    face_wires = from_face3d_to_wireframe(face.punched_geometry)\n    for ap in face.apertures:\n        face_wires.extend(from_aperture_to_wireframe(ap))\n    for dr in face.doors:\n        face_wires.extend(from_door_to_wireframe(dr))\n    for shd in face.shades:\n        face_wires.extend(from_shade_to_wireframe(shd))\n    return face_wires\n\n\ndef from_room_to_wireframe(room):\n    \"\"\"Rhino PolyLineCurves from a Honeybee Room (with shades).\"\"\"\n    room_wires = []\n    for face in room.faces:\n        room_wires.extend(from_face_to_wireframe(face))\n    for shd in room.shades:\n        room_wires.extend(from_shade_to_wireframe(shd))\n    return room_wires\n\n\ndef from_model_to_wireframe(model):\n    \"\"\"Rhino PolyLineCurves and Meshes from a Honeybee Model.\"\"\"\n    model_wires = []\n    for room in model.rooms:\n        model_wires.extend(from_room_to_wireframe(room))\n    for face in model.orphaned_faces:\n        model_wires.extend(from_face_to_wireframe(face))\n    for ap in model.orphaned_apertures:\n        model_wires.extend(from_aperture_to_wireframe(ap))\n    for dr in model.orphaned_doors:\n        model_wires.extend(from_door_to_wireframe(dr))\n    for shd in model.orphaned_shades:\n        model_wires.extend(from_shade_to_wireframe(shd))\n    for sm in model.shade_meshes:\n        model_wires.extend(from_shade_mesh_to_wireframe(sm))\n    return model_wires\n\n\ndef from_hb_objects_to_wireframe(hb_objects):\n    \"\"\"Rhino PolyLineCurves and Meshes from a list of any Honeybee geometry objects.\"\"\"\n    wire_geo = []\n    for hb_obj in hb_objects:\n        if isinstance(hb_obj, Room):\n            wire_geo.extend(from_room_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, Shade):\n            wire_geo.extend(from_shade_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, Face):\n            wire_geo.extend(from_face_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, Aperture):\n            wire_geo.extend(from_aperture_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, Door):\n            wire_geo.extend(from_door_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, ShadeMesh):\n            wire_geo.extend(from_shade_mesh_to_wireframe(hb_obj))\n        elif isinstance(hb_obj, Model):\n            wire_geo.extend(from_model_to_wireframe(hb_obj))\n        else:\n            raise TypeError(\n                'Unrecognized honeybee object type: {}'.format(type(hb_obj)))\n    return wire_geo\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry"
  ],
  "has_docstring": true
}