{
  "source_url": "https://github.com/maartjedamen/window_placement/blob/614900bd07f92e174fc80252d6db7fa52ca9b7b2/simplehops.py",
  "repo": "maartjedamen/window_placement",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "simplehops.py",
  "instruction": "Simplehops",
  "code": "from flask import Flask\r\nimport ghhops_server as hs\r\nimport rhino3dm\r\nimport json\r\nimport flatgeobuf as fgb\r\n\r\n# register hops app as middleware\r\napp = Flask(__name__)\r\nhops = hs.Hops(app)\r\n\r\n@hops.component(\r\n    \"/pointat\",\r\n    name=\"PointAt\",\r\n    description=\"Get point along curve\",\r\n    # icon=\"examples/pointat.png\",\r\n    inputs=[\r\n        hs.HopsCurve(\"Curve\", \"C\", \"Curve to evaluate\"),\r\n        hs.HopsNumber(\"t\", \"t\", \"Parameter on Curve to evaluate\"),\r\n    ],\r\n    outputs=[\r\n        hs.HopsPoint(\"P\", \"P\", \"Point on curve at t\")\r\n    ]\r\n)\r\n\r\ndef pointat(curve, t):\r\n    return curve.PointAt(t)\r\n\r\n\r\n\"-----------------------------------------------------------\"\r\n\r\n@hops.component(\r\n        \"/geojsonfile\",\r\n        name=\"importjson\",\r\n        nickname=\"json\",\r\n        description=\"import GIS point based information from a JSON file to grasshopper\",\r\n        inputs=[\r\n            hs.HopsString(\"Filepath\", \"JSON\", \"Path to JSON file\"),\r\n        ],\r\n        outputs=[\r\n            hs.HopsPoint(\"P\", \"P\", \"point list from GIS\")\r\n        ]\r\n)\r\n\r\ndef geojsonfile(filepath):\r\n    with open(filepath) as json_file:\r\n        data = json.load(json_file)\r\n        # retrieve the valuable data out of dictionary\r\n        # tiles = (data[\"features\"][0][\"geometry\"][\"coordinates\"])\r\n    #     tiles = (data[\"features\"])\r\n\r\n    # coords = []\r\n\r\n    # # for n in range(20):\r\n    # for n in range(len(tiles)):\r\n    #     features = (data[\"features\"][n][\"geometry\"][\"coordinates\"])\r\n    #     coords.append(features)\r\n    return(data)\r\n\r\n\r\n# def geojsonfile(filepath): \r\n    # coords = []\r\n    # # load input coordinates from a geojson file\r\n    # with open(filepath) as json_file:\r\n    #     # with open(\"data/tile_index.fgb\", \"rb\") as f:\r\n    #     reader = fgb.Reader(json_file)\r\n    #     # for index, item in enumerate(items):\r\n    #     # print(index, item)\r\n    #     for index, feature in enumerate(reader):\r\n    #     # print(feature)\r\n    #         coords.append(feature[\"features\"][index][\"geometry\"][\"coordinates\"])\r\n    #         # clean_tiles_dict.append(feature[\"properties\"][\"tile_id\"])\r\n    \r\n    \r\n    #     # data = json.load(json_file)\r\n    #     # retrieve the valuable data out of dictionary\r\n    #     # tiles = (data[\"features\"][0][\"geometry\"][\"coordinates\"])\r\n    #     # tiles = (data[\"features\"])\r\n\r\n\r\n    # # for n in range(len(tiles)):\r\n    # #     features = (data[\"features\"][n][\"geometry\"][\"coordinates\"])\r\n\r\n    #     # json.dumps(features)\r\n    \r\n    # # coords = json.dumps(coords)\r\n    \r\n    # return coords\r\n\r\n\r\n\r\n# @hops.component(\r\n#     \"importOSM\", \r\n#     name=\"importOSM\", \r\n#     nickname=\"OSM\",\r\n#     description=\"import OSM information based on a bounding box\",\r\n#     inputs=[\r\n#         hs.HopsPoint(\"corner1\", \"p1\", 'first corner bounding box')\r\n#         hs.HopsPoint(\"corner2\", \"p2\", 'first corner bounding box')\r\n#         hs.HopsPoint(\"corner3\", \"p3\", 'first corner bounding box')\r\n#         hs.HopsPoint(\"corner4\", \"p4\", 'first corner bounding box')\r\n#     ]\r\n# )\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    app.run()\r\n\r\n",
  "language": "python",
  "imports": [
    "rhino3dm"
  ],
  "has_docstring": false
}