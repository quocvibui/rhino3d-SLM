{
  "source_url": "https://github.com/localsoftware/localsoftware_rhino-grasshopper/blob/4aafec57e33b9f09cce6fd73dcda12b17cf794a5/python/UnpickleView.py",
  "repo": "localsoftware/localsoftware_rhino-grasshopper",
  "repo_stars": 0,
  "repo_description": null,
  "license": "BSD-2-Clause",
  "filepath": "python/UnpickleView.py",
  "instruction": "Deserializes view data from binary file.",
  "code": "\"\"\"Deserializes view data from binary file.\n\nSets a view by un-pickling a pickled view file.\nReturns a site geometry, a camera vector and a focal point.\nBased on the work of Jackie Berry.\n\n    Typical usage:\n        Plug in a slider or number to the siteNumber input of the component. This numbere will be the site number, and name of the pickle.\n        If youâ€™re only working with one site, you can leave it empty.\n        Specify a path for the pickles. This is the folder where the pickles are.\n        Finally plug in a boolean toggle component to the read input of the component.\n        Once you are ready to UnPickle the geometry, set it to true.\n        The component will return a site geometry a camera vector and a camera target.\n\n    Inputs:\n        siteNumber: site number\n        layer: layer name\n        path: path to source file directory.\n        read: boolean\n\n    Outputs:\n        geometry: converted geometry\n        vector: camera view vector\n        target: camera view target (3D Point)\"\"\"\n\n__author__ = \"palomagr\"\n__version__ = \"2020.07.09\"\n\n#ghenv.Component.Name = \"Unpicke Data\"\n#ghenv.Component.NickName = \"Unpickle Data\"\n\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython, System, Rhino, os\nimport rhinoscriptsyntax as rs\nimport cPickle as pickle\n\nclass MyComponent(component):\n    geometry, vector, target, status  = None, None, None, None\n\n    def RunScript(self, siteNumber, layer, path, read):\n        if path!=None and read==True and layer!=None:\n            try:\n                if siteNumber!=None:\n                    filepath = os.path.join(path,str(int(siteNumber))+layer)\n                else:\n                    filepath = os.path.join(path,layer)\n                f = open(filepath, 'rb')\n                data = pickle.load(f)\n                if len(data)>2:\n                    geometry = data[:-2]\n                    vector = data[-1]\n                    target = data[-2]\n                    status = \"file successfully loaded\"\n                else:\n                    status = \"This doesn't look like a view file. \\nTry the UnpickleData component instead.\"\n                f.close()\n\n            except:\n                status = 'Problem loading\\n\\n %s\\n\\nFile may not exist or the path may be invalid' % filepath\n        else:\n            geometry, vector, target  = None, None, None\n            if path==None:\n                status = \"please provide path to source file directory.\"\n            if layer==None:\n                status = \"please provide layer name of source file.\"\n            if read!=True:\n                status = \"set read to True to unpickle view file.\"\n\n        # return outputs if you have them; here I try it for you:\n        return (geometry, vector, target, status)\n",
  "language": "python",
  "imports": [
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}