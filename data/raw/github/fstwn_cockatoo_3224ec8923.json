{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_RenderKnitContours.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_RenderKnitContours.py",
  "instruction": "Attempts to visualise the time flow on KnitContours by rendering them as\ngradient coloured curves. Will work with any type of curve, actually.\n    Inputs:\n        KnitContours: Some KnitContours to...",
  "code": "\"\"\"\nAttempts to visualise the time flow on KnitContours by rendering them as\ngradient coloured curves. Will work with any type of curve, actually.\n    Inputs:\n        KnitContours: Some KnitContours to visualise (works with any curve). \n                      {list, curve/polyline}\n        Thickness: The thickness of the rendered curves.\n                   Defaults to 3.\n                   {item, int}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 210929\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# ADDITIONAL RHINO IMPORTS\nfrom scriptcontext import sticky as st\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"RenderKnitContours\"\nghenv.Component.NickName =\"RKC\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"08 Visualisation\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    from cockatoo.utilities import map_values_as_colors\nexcept ImportError:\n    errMsg = \"The Cockatoo python module seems to be not correctly \" + \\\n             \"installed! Please make sure the module is in you search \" + \\\n             \"path, see README for instructions!.\"\n    raise ImportError(errMsg)\n\nclass RenderKnitContours(component):\n    \n    def __init__(self):\n        super(RenderKnitContours, self).__init__()\n        \n        self.drawing_curves = []\n    \n    def get_ClippingBox(self):\n        return Rhino.Geometry.BoundingBox()\n    \n    def DrawViewportWires(self, args):\n        try:\n            # get the display from the arguments\n            display = args.Display\n            \n            for curve in self.drawing_curves:\n                display.DrawCurve(curve[0], curve[1], curve[2])\n            \n        except Exception, e:\n            System.Windows.Forms.MessageBox.Show(str(e),\n                                                 \"Error while drawing preview!\")\n    \n    def RunScript(self, KnitContours, Thickness):\n        \n        # VISUALISATION OF CONTOURS USING CUSTOM DISPLAY -----------------------\n        \n        # set default thickness\n        if Thickness == None:\n            Thickness = 3\n        \n        if KnitContours:\n            \n            drawing_curves = []\n            \n            # make customdisplay\n            for i, pl in enumerate(KnitContours):\n                if type(pl) == Rhino.Geometry.PolylineCurve and pl.Degree == 1:\n                    polypts = []\n                    for j in range(pl.PointCount):\n                        cpt = pl.Point(j)\n                        polypts.append(Rhino.Geometry.Point3d(cpt.X, \n                                                              cpt.Y,\n                                                              cpt.Z))\n                    pl = Rhino.Geometry.Polyline(polypts)\n                    segs = [Rhino.Geometry.LineCurve(s) \\\n                            for s in pl.GetSegments()]\n                    numseg = len(segs)\n                    ccols = map_values_as_colors(range(numseg),\n                                                 0,\n                                                 numseg,\n                                                 0.0,\n                                                 0.35)\n                    for j, seg in enumerate(segs):\n                        drawing_curves.append((seg, ccols[j], Thickness))\n                else:\n                    abstol = Rhino.RhinoDoc.ActiveDoc.ModelAbsoluteTolerance\n                    angletol = Rhino.RhinoDoc.ActiveDoc.ModelAngleToleranceRadians\n                    minlen = abstol\n                    maxlen = 100\n                    # make polylinecurve (!)\n                    pl = pl.ToPolyline(abstol, angletol, minlen, maxlen)\n                    # make polyline\n                    pl = pl.ToPolyline()\n                    segs = [Rhino.Geometry.LineCurve(s) \\\n                            for s in pl.GetSegments()]\n                    numseg = len(segs)\n                    ccols = map_values_as_colors(range(numseg),\n                                                 0,\n                                                 numseg,\n                                                 0.0,\n                                                 0.35)\n                    for j, seg in enumerate(segs):\n                        drawing_curves.append((seg, ccols[j], Thickness))\n            \n            # set attributes for drawing routine\n            self.drawing_curves = drawing_curves\n            \n        elif not KnitContours:\n            self.drawing_curves = []\n            rml = self.RuntimeMessageLevel.Warning\n            rMsg = \"No KnitContours input!\"\n            self.AddRuntimeMessage(rml, rMsg)\n        else:\n            self.drawing_curves = []\n",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "ghpythonlib",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}