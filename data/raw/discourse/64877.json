{
  "source_url": "https://discourse.mcneel.com/t/add-userdata-object-reference-not-set-to-the-instance-of-an-object/64877",
  "topic_id": 64877,
  "title": "Add UserData: Object Reference not set to the instance of an object",
  "question": "Hi, I got this error when add UserData to the attributes of the object.\n\n\nSystem.NullReferenceException: Object reference not set to an instance of an object.\n   at Rhino.DocObjects.Custom.UserData.NonConstPointer(Boolean createIfMissing)\n   at Rhino.DocObjects.Custom.UserDataList.Add(UserData userdata)\n\n\n\nI am following this sample\n\n\n\n\n\n\nwww.rhino3d.com\n\n\n\n\n\n\nUser Data\n\n\nRhinoCommon object plugin user data\n\n\n\n\n\n\n\n\n\n\n\n\nMyUserData\n class is inherited from \nDocObjects.Custom.UserData\n\n\nI am adding user data directly to the attributes of RhinoObject:\n\n\nrobj.Attributes.UserData.Add(MyUserData)\n\n\nWhere can be the problem?\n\n\nI see it leads to \nUserData.NonConstPointer\n but no idea what is wrong there.\n\n\nThanks,\n\nDmitriy",
  "code_blocks": [
    {
      "code": "protected override void SolveInstance(IGH_DataAccess DA)\n {\n    var objGuid = Guid.Empty;\n    if (!DA.GetData(0, ref objGuid)) return;\n    var ro = RhinoDoc.ActiveDoc.Objects.Find(objGuid);\n    if (ro == null)\n    {\n        AddRuntimeMessage(GH_RuntimeMessageLevel.Error, \"The Id is not for a Rhino Object\");\n        return;\n    }\n    foreach (var ud in ro.Attributes.UserData)\n    {\n        if (ud is ICustomUserData csd)\n        {\n            DA.SetData(0, csd.Notes);\n            return;\n        }\n    }\n    AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, \"The Object Did not contain Custom User Data\");\n    return; \n}",
      "language": "csharp",
      "author": "cullen.sarles",
      "post_number": 17,
      "is_solution": false
    },
    {
      "code": "System.NullReferenceException: Object reference not set to an instance of an object.\n   at Rhino.DocObjects.Custom.UserData.NonConstPointer(Boolean createIfMissing)\n   at Rhino.DocObjects.Custom.UserDataList.Add(UserData userdata)",
      "language": "unknown",
      "author": "Dmitriy",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "boolean",
    "csharp",
    "geometry",
    "rhinocommon"
  ],
  "has_accepted_answer": false,
  "category_id": 3,
  "posts_count": 22,
  "views": 4800
}