{
  "source_url": "https://discourse.mcneel.com/t/rhino8-plugin-panel-empty-in-macos/210796",
  "topic_id": 210796,
  "title": "Rhino8 plugin panel: Empty in macOS",
  "question": "Hello, in Rhino 8 the plugin works fine on Windows, but on macOS, when the panel is closed and reopened, it becomes empty.\n\nIs this something maybe related to macOS or etoforms?\n\n\nusing Rhino.PlugIns;using Rhino.UI;\n\nnamespace TestPlugin\n{\n  public class TestPlugin: PlugIn\n  {\n     public static TestPlugin Instance { get; private set; }  \n     public TestPlugin ()\n     {\n        Instance = this;\n     }\n\n     protected override LoadReturnCode OnLoad(ref string errorMessage)\n     {\n        Panels.RegisterPanel(this, typeof(TestPanel), \"Test\", Properties.Resources.test);\n        return LoadReturnCode.Success;\n     }\n  }\n}\n\n---------------------------------------------------------------\n\nusing Eto.Forms;\nusing System;\nusing System.Runtime.InteropServices;\n\nnamespace TestRhino\n{\n    [Guid(\"EF3437E1-99A5-4408-A1F8-3721AA65525C\")]\n    public class TestPanel: Panel\n    {\n        public static Guid PanelId => new Guid(\"EF3437E1-99A5-4408-A1F8-3721AA65525C\");\n\n        private readonly PanelViewModel _viewModel;\n\n        public TestPanel()\n        {\n            var geometryMap = ViewModelData.GetGeometryMap();\n            var roofTypeMap = ViewModelData.GetRoofTypeMap();\n\n            var uiManager = new UIManager(geometryMap, roofTypeMap);\n\n            _viewModel = new PanelViewModel(uiManager, this);\n\n            Content = uiManager.CreateLayout();\n\n            _viewModel.HookEvents();\n            _viewModel.InitializeState();\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposing && Rhino.RhinoApp.IsClosing)\n            {\n                base.Dispose(disposing);\n            }\n        }\n    }\n}\n\n---------------------------------------------------------------\n\nusing Rhino;\nusing Rhino.Commands;\nusing Rhino.UI;\nusing System;\nusing System.Runtime.InteropServices;\n\nnamespace TestRhino\n{\n    [Guid(\"15E43514-6B2A-447C-87B7-14A105D56A41\")]\n    public class ShowTestPanelCommand : Command\n    {\n        public ShowTestPanelCommand ()\n    ...",
  "code_blocks": [
    {
      "code": "using Rhino.PlugIns;using Rhino.UI;\n\nnamespace TestPlugin\n{\n  public class TestPlugin: PlugIn\n  {\n     public static TestPlugin Instance { get; private set; }  \n     public TestPlugin ()\n     {\n        Instance = this;\n     }\n\n     protected override LoadReturnCode OnLoad(ref string errorMessage)\n     {\n        Panels.RegisterPanel(this, typeof(TestPanel), \"Test\", Properties.Resources.test);\n        return LoadReturnCode.Success;\n     }\n  }\n}\n\n---------------------------------------------------------------\n\nusing Eto.Forms;\nusing System;\nusing System.Runtime.InteropServices;\n\nnamespace TestRhino\n{\n    [Guid(\"EF3437E1-99A5-4408-A1F8-3721AA65525C\")]\n    public class TestPanel: Panel\n    {\n        public static Guid PanelId => new Guid(\"EF3437E1-99A5-4408-A1F8-3721AA65525C\");\n\n        private readonly PanelViewModel _viewModel;\n\n        public TestPanel()\n        {\n            var geometryMap = ViewModelData.GetGeometryMap();\n            var roofTypeMap = ViewModelData.GetRoofTypeMap();\n\n            var uiManager = new UIManager(geometryMap, roofTypeMap);\n\n            _viewModel = new PanelViewModel(uiManager, this);\n\n            Content = uiManager.CreateLayout();\n\n            _viewModel.HookEvents();\n            _viewModel.InitializeState();\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposing && Rhino.RhinoApp.IsClosing)\n            {\n                base.Dispose(disposing);\n            }\n        }\n    }\n}\n\n---------------------------------------------------------------\n\nusing Rhino;\nusing Rhino.Commands;\nusing Rhino.UI;\nusing System;\nusing System.Runtime.InteropServices;\n\nnamespace TestRhino\n{\n    [Guid(\"15E43514-6B2A-447C-87B7-14A105D56A41\")]\n    public class ShowTestPanelCommand : Command\n    {\n        public ShowTestPanelCommand ()\n        {\n            Instance = this;\n        }\n\n        public static ShowTestPanelCommand Instance { get; private set; }\n\n        public override string EnglishName => \"TestPanel\";\n\n        protected override Result RunCommand(RhinoDoc doc, RunMode mode)\n        {\n            var panelId = TestPanel.PanelId;\n            var isVisible = Panels.IsPanelVisible(panelId);\n\n            if (isVisible)\n            {\n                // Hide the panel\n                Panels.ClosePanel(panelId);\n            }\n            else\n            {\n                // Show the panel\n                Panels.OpenPanel(panelId);\n            }\n\n            return Result.Success;\n        }\n    }\n}",
      "language": "csharp",
      "author": "seg",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "csharp",
    "rhinocommon"
  ],
  "has_accepted_answer": false,
  "category_id": 3,
  "posts_count": 3,
  "views": 63
}