{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_NodesByIndex.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_NodesByIndex.py",
  "instruction": "Select KnitNetwork Nodes by index.\n    Inputs:\n        KnitNetwork: The KnitNetwork to select nodes from.\n                     {item, KnitNetworkBase}\n        NodeIndex: Indices of the Nodes to...",
  "code": "\"\"\"\nSelect KnitNetwork Nodes by index.\n    Inputs:\n        KnitNetwork: The KnitNetwork to select nodes from.\n                     {item, KnitNetworkBase}\n        NodeIndex: Indices of the Nodes to select\n                   {list, int}\n        SkipInvalid: If True, invalid indices (indices that have no node) will\n                     be silently skipped. Otherwise, None will be inserted into\n                     the output for invalid indices.\n                     Defaults to False.\n                     {item, bool}\n    Outputs:\n        Nodes: The found nodes as node-2-tuples consisting of (index, data).\n               {list, nodes}\n        NodePoints: The Point3d geometry of the selected nodes.\n                    {list, point3d}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200705\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GHPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"NodesByIndex\"\nghenv.Component.NickName =\"NBI\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"07 KnitNetwork Editing\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import cockatoo\nexcept ImportError:\n    errMsg = \"The Cockatoo python module seems to be not correctly \" + \\\n             \"installed! Please make sure the module is in you search \" + \\\n             \"path, see README for instructions!.\"\n    raise ImportError(errMsg)\n\nclass NodesByIndex(component):\n    \n    def __init__(self):\n        super(NodesByIndex, self).__init__()\n        \n        self.drawing_nodes = []\n    \n    def RunScript(self, KnitNetwork, NodeIndex, SkipInvalid=True):\n        \n        # set defaults and catch None values\n        if SkipInvalid == None:\n            SkipInvalid = True\n        \n        # initialize output trees\n        Nodes = Grasshopper.DataTree[object]()\n        NodePoints = Grasshopper.DataTree[object]()\n        \n        # filter nodes\n        if KnitNetwork and NodeIndex:\n            \n            # initialize output lists\n            Nodes = []\n            NodePoints = []\n            \n            # loop through given indices\n            for i in NodeIndex:\n                try:\n                    selected_node = (i, KnitNetwork.node[i])\n                    Nodes.append(selected_node)\n                    NodePoints.append(selected_node[1][\"geo\"])\n                except KeyError:\n                    if SkipInvalid:\n                        errMsg = \"Node with index {} does not exist in \" + \\\n                                 \"network! It was skipped in the output!\"\n                        errMsg = errMsg.format(i)\n                        rml = self.RuntimeMessageLevel.Remark\n                        self.AddRuntimeMessage(rml, errMsg)\n                    else:\n                        errMsg = \"Node with index {} does not exist in \" + \\\n                                 \"network! None was inserted into the output!\"\n                        errMsg = errMsg.format(i)\n                        rml = self.RuntimeMessageLevel.Remark\n                        self.AddRuntimeMessage(rml, errMsg)\n                        Nodes.append(None)\n                        NodePoints.append(None)\n        if not KnitNetwork:\n            errMsg = \"No KnitNetwork input!\"\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, errMsg)\n        if not NodeIndex:\n            errMsg = \"No NodeIndex input!\"\n            rml = self.RuntimeMessageLevel.Warning\n            self.AddRuntimeMessage(rml, errMsg)\n        \n        return Nodes, NodePoints",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}