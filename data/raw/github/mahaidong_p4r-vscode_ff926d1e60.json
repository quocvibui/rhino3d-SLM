{
  "source_url": "https://github.com/mahaidong/p4r-vscode/blob/f75b8596c881faf1d5c2d0b7159ab2ec228acc4c/lib/rhinoscript/plane.py",
  "repo": "mahaidong/p4r-vscode",
  "repo_stars": 0,
  "repo_description": null,
  "license": "unknown",
  "filepath": "lib/rhinoscript/plane.py",
  "instruction": null,
  "code": "import utility as rhutil\nimport Rhino.Geometry\nimport scriptcontext\nimport math\n\ndef DistanceToPlane(plane, point):\n    \"\"\"Returns the distance from a 3D point to a plane\n    Parameters:\n      plane (plane): the plane\n      point (point): List of 3 numbers or Point3d\n    Returns:\n      number: The distance if successful, otherwise None\n    Example:\n      import rhinoscriptsyntax as rs\n      point = rs.GetPoint(\"Point to test\")\n      if point:\n          plane = rs.ViewCPlane()\n          if plane:\n              distance = rs.DistanceToPlane(plane, point)\n              if distance is not None:\n                  print \"Distance to plane: \", distance\n    See Also:\n      Distance\n      PlaneClosestPoint\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    point = rhutil.coerce3dpoint(point, True)\n    return plane.DistanceTo(point)\n\n\ndef EvaluatePlane(plane, parameter):\n    \"\"\"Evaluates a plane at a U,V parameter\n    Parameters:\n      plane (plane): the plane to evaluate\n      parameter ([number, number]): list of two numbers defining the U,V parameter to evaluate\n    Returns:\n      point: Point3d on success\n    Example:\n      import rhinoscriptsyntax as rs\n      view = rs.CurrentView()\n      plane = rs.ViewCPlane(view)\n      point = rs.EvaluatePlane(plane, (5,5))\n      rs.AddPoint( point )\n    See Also:\n      PlaneClosestPoint\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    return plane.PointAt(parameter[0], parameter[1])\n\n\ndef IntersectPlanes(plane1, plane2, plane3):\n    \"\"\"Calculates the intersection of three planes\n    Parameters:\n      plane1 (plane): the 1st plane to intersect\n      plane2 (plane): the 2nd plane to intersect\n      plane3 (plane): the 3rd plane to intersect\n    Returns:\n      point: the intersection point between the 3 planes on success\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      plane1 = rs.WorldXYPlane()\n      plane2 = rs.WorldYZPlane()\n      plane3 = rs.WorldZXPlane()\n      point = rs.IntersectPlanes(plane1, plane2, plane3)\n      if point: rs.AddPoint(point)\n    See Also:\n      LineLineIntersection\n      LinePlaneIntersection\n      PlanePlaneIntersection\n    \"\"\"\n    plane1 = rhutil.coerceplane(plane1, True)\n    plane2 = rhutil.coerceplane(plane2, True)\n    plane3 = rhutil.coerceplane(plane3, True)\n    rc, point = Rhino.Geometry.Intersect.Intersection.PlanePlanePlane(plane1, plane2, plane3)\n    if rc: return point\n\n\ndef MovePlane(plane, origin):\n    \"\"\"Moves the origin of a plane\n    Parameters:\n      plane (plane): Plane or ConstructionPlane\n      origin (point): Point3d or list of three numbers\n    Returns:\n      plane: moved plane\n    Example:\n      import rhinoscriptsyntax as rs\n      origin = rs.GetPoint(\"CPlane origin\")\n      if origin:\n          plane = rs.ViewCPlane()\n          plane = rs.MovePlane(plane,origin)\n          rs.ViewCplane(plane)\n    See Also:\n      PlaneFromFrame\n      PlaneFromNormal\n      RotatePlane\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    origin = rhutil.coerce3dpoint(origin, True)\n    rc = Rhino.Geometry.Plane(plane)\n    rc.Origin = origin\n    return rc\n\n\ndef PlaneClosestPoint(plane, point, return_point=True):\n    \"\"\"Returns the point on a plane that is closest to a test point.\n    Parameters:\n      plane (plane): The plane\n      point (point): The 3-D point to test.\n      return_point (bool, optional): If omitted or True, then the point on the plane\n         that is closest to the test point is returned. If False, then the\n         parameter of the point on the plane that is closest to the test\n         point is returned.\n    Returns:\n      point: If return_point is omitted or True, then the 3-D point\n      point: If return_point is False, then an array containing the U,V parameters\n      of the point\n      None: if not successful, or on error.\n    Example:\n      import rhinoscriptsyntax as rs\n      point = rs.GetPoint(\"Point to test\")\n      if point:\n          plane = rs.ViewCPlane()\n          if plane:\n              print rs.PlaneClosestPoint(plane, point)\n    See Also:\n      DistanceToPlane\n      EvaluatePlane\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    point = rhutil.coerce3dpoint(point, True)\n    if return_point:\n        return plane.ClosestPoint(point)\n    else:\n        rc, s, t = plane.ClosestParameter(point)\n        if rc: return s, t\n\n\ndef PlaneCurveIntersection(plane, curve, tolerance=None):\n    \"\"\"Intersect an infinite plane and a curve object\n    Parameters:\n      plane (plane): The plane to intersect.\n      curve (guid): The identifier of the curve object\n      torerance (number, optional): The intersection tolerance. If omitted, the document's absolute tolerance is used.\n    Returns:\n      A list of intersection information tuple if successful.  The list will contain one or more of the following tuple:\n\n        Element Type        Description\n\n        [0]       Number      The intersection event type, either Point (1) or Overlap (2).\n\n        [1]       Point3d     If the event type is Point (1), then the intersection point on the curve.\n                            If the event type is Overlap (2), then intersection start point on the curve.\n\n        [2]       Point3d     If the event type is Point (1), then the intersection point on the curve.\n                            If the event type is Overlap (2), then intersection end point on the curve.\n\n        [3]       Point3d     If the event type is Point (1), then the intersection point on the plane.\n                            If the event type is Overlap (2), then intersection start point on the plane.\n\n        [4]       Point3d     If the event type is Point (1), then the intersection point on the plane.\n\n                            If the event type is Overlap (2), then intersection end point on the plane.\n\n        [5]       Number      If the event type is Point (1), then the curve parameter.\n                            If the event type is Overlap (2), then the start value of the curve parameter range.\n                            \n        [6]       Number      If the event type is Point (1), then the curve parameter.\n                            If the event type is Overlap (2),  then the end value of the curve parameter range.\n\n        [7]       Number      If the event type is Point (1), then the U plane parameter.\n                            If the event type is Overlap (2), then the U plane parameter for curve at (n, 5).\n\n        [8]       Number      If the event type is Point (1), then the V plane parameter.\n                            If the event type is Overlap (2), then the V plane parameter for curve at (n, 5).\n\n        [9]       Number      If the event type is Point (1), then the U plane parameter.\n                            If the event type is Overlap (2), then the U plane parameter for curve at (n, 6).\n                            \n        [10]      Number      If the event type is Point (1), then the V plane parameter.\n                            If the event type is Overlap (2), then the V plane parameter for curve at (n, 6).\n\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      curve = rs.GetObject(\"Select curve\", rs.filter.curve)\n      if curve:\n          plane = rs.WorldXYPlane()\n          intersections = rs.PlaneCurveIntersection(plane, curve)\n          if intersections:\n              for intersection in intersections:\n                  rs.AddPoint(intersection[1])\n    See Also:\n      IntersectPlanes\n      PlanePlaneIntersection\n      PlaneSphereIntersection\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    curve = rhutil.coercecurve(curve, -1, True)\n    if tolerance is None: tolerance = scriptcontext.doc.ModelAbsoluteTolerance\n    intersections = Rhino.Geometry.Intersect.Intersection.CurvePlane(curve, plane, tolerance)\n    if intersections:\n        rc = []\n        for intersection in intersections:\n            a = 1\n            if intersection.IsOverlap: a = 2\n            b = intersection.PointA\n            c = intersection.PointA2\n            d = intersection.PointB\n            e = intersection.PointB2\n            f = intersection.ParameterA\n            g = intersection.ParameterB\n            h = intersection.OverlapA[0]\n            i = intersection.OverlapA[1]\n            j = intersection.OverlapB[0]\n            k = intersection.OverlapB[1]\n            rc.append( (a,b,c,d,e,f,g,h,i,j,k) )\n        return rc\n\n\ndef PlaneEquation(plane):\n    \"\"\"Returns the equation of a plane as a tuple of four numbers. The standard\n    equation of a plane with a non-zero vector is Ax+By+Cz+D=0\n    Parameters:\n      plane (plane): the plane to deconstruct\n    Returns:\n      tuple(number, number, number, number): containing four numbers that represent the coefficients of the equation  (A, B, C, D) if successful\n      None: if not successful\n    Example:\n      import rhinoscriptsyntax as rs\n      plane = rs.ViewCPlane()\n      equation = rs.PlaneEquation(plane)\n      print \"A =\", equation[0]\n      print \"B =\", equation[1]\n      print \"C =\", equation[2]\n      print \"D =\", equation[3]\n    See Also:\n      PlaneFromFrame\n      PlaneFromNormal\n      PlaneFromPoints\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    rc = plane.GetPlaneEquation()\n    return rc[0], rc[1], rc[2], rc[3]\n\n\ndef PlaneFitFromPoints(points):\n    \"\"\"Returns a plane that was fit through an array of 3D points.\n    Parameters:\n    points (point): An array of 3D points.\n    Returns: \n      plane: The plane if successful\n      None: if not successful\n    Example:\n      import rhinoscriptsyntax as rs\n      points = rs.GetPoints()\n      if points:\n          plane = rs.PlaneFitFromPoints(points)\n          if plane:\n              magX = plane.XAxis.Length\n              magY = plane.YAxis.Length\n              rs.AddPlaneSurface( plane, magX, magY )\n    See Also:\n      PlaneFromFrame\n      PlaneFromNormal\n      PlaneFromPoints\n    \"\"\"\n    points = rhutil.coerce3dpointlist(points, True)\n    rc, plane = Rhino.Geometry.Plane.FitPlaneToPoints(points)\n    if rc==Rhino.Geometry.PlaneFitResult.Success: return plane\n\n\ndef PlaneFromFrame(origin, x_axis, y_axis):\n    \"\"\"Construct a plane from a point, and two vectors in the plane.\n    Parameters:\n      origin (point): A 3D point identifying the origin of the plane.\n      x_axis (vector): A non-zero 3D vector in the plane that determines the X axis\n               direction.\n      y_axis (vector): A non-zero 3D vector not parallel to x_axis that is used\n               to determine the Y axis direction. Note, y_axis does not\n               have to be perpendicular to x_axis.\n    Returns:\n      plane: The plane if successful.\n    Example:\n      import rhinoscriptsyntax as rs\n      origin = rs.GetPoint(\"CPlane origin\")\n      if origin:\n          xaxis = (1,0,0)\n          yaxis = (0,0,1)\n          plane = rs.PlaneFromFrame( origin, xaxis, yaxis )\n          rs.ViewCPlane(None, plane)\n    See Also:\n      MovePlane\n      PlaneFromNormal\n      PlaneFromPoints\n      RotatePlane\n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    x_axis = rhutil.coerce3dvector(x_axis, True)\n    y_axis = rhutil.coerce3dvector(y_axis, True)\n    return Rhino.Geometry.Plane(origin, x_axis, y_axis)\n\n\ndef PlaneFromNormal(origin, normal, xaxis=None):\n    \"\"\"Creates a plane from an origin point and a normal direction vector.\n    Parameters:\n      origin (point): A 3D point identifying the origin of the plane.\n      normal (vector): A 3D vector identifying the normal direction of the plane.\n      xaxis (vector, optional): optional vector defining the plane's x-axis\n    Returns:\n      plane: The plane if successful.\n    Example:\n      import rhinoscriptsyntax as rs\n      origin = rs.GetPoint(\"CPlane origin\")\n      if origin:\n          direction = rs.GetPoint(\"CPlane direction\")\n          if direction:\n              normal = direction - origin\n              normal = rs.VectorUnitize(normal)\n              rs.ViewCPlane( None, rs.PlaneFromNormal(origin, normal) )\n    See Also:\n      MovePlane\n      PlaneFromFrame\n      PlaneFromPoints\n      RotatePlane\n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    normal = rhutil.coerce3dvector(normal, True)\n    rc = Rhino.Geometry.Plane(origin, normal)\n    if xaxis:\n        xaxis = rhutil.coerce3dvector(xaxis, True)\n        xaxis = Rhino.Geometry.Vector3d(xaxis)#prevent original xaxis parameter from being unitized too\n        xaxis.Unitize()\n        yaxis = Rhino.Geometry.Vector3d.CrossProduct(rc.Normal, xaxis)\n        rc = Rhino.Geometry.Plane(origin, xaxis, yaxis)\n    return rc\n\n\ndef PlaneFromPoints(origin, x, y):\n    \"\"\"Creates a plane from three non-colinear points\n    Parameters:\n      origin (point): origin point of the plane\n      x, y (point): points on the plane's x and y axes\n    Returns:\n      plane: The plane if successful, otherwise None\n    Example:\n      import rhinoscriptsyntax as rs\n      corners = rs.GetRectangle()\n      if corners:\n          rs.ViewCPlane( rs.PlaneFromPoints(corners[0], corners[1], corners[3]))\n    See Also:\n      PlaneFromFrame\n      PlaneFromNormal\n    \"\"\"\n    origin = rhutil.coerce3dpoint(origin, True)\n    x = rhutil.coerce3dpoint(x, True)\n    y = rhutil.coerce3dpoint(y, True)\n    plane = Rhino.Geometry.Plane(origin, x, y)\n    if plane.IsValid: return plane\n\n\ndef PlanePlaneIntersection(plane1, plane2):\n    \"\"\"Calculates the intersection of two planes\n    Parameters:\n      plane1 (plane): the 1st plane to intersect\n      plane2 (plane): the 2nd plane to intersect\n    Returns:\n      line:  a line with two 3d points identifying the starting/ending points of the intersection\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      plane1 = rs.WorldXYPlane()\n      plane2 = rs.WorldYZPlane()\n      line = rs.PlanePlaneIntersection(plane1, plane2)\n      if line: rs.AddLine(line[0], line[1])\n    See Also:\n      IntersectPlanes\n      LineLineIntersection\n      LinePlaneIntersection\n    \"\"\"\n    plane1 = rhutil.coerceplane(plane1, True)\n    plane2 = rhutil.coerceplane(plane2, True)\n    rc, line = Rhino.Geometry.Intersect.Intersection.PlanePlane(plane1, plane2)\n    if rc: return line.From, line.To\n\n\ndef PlaneSphereIntersection(plane, sphere_plane, sphere_radius):\n    \"\"\"Calculates the intersection of a plane and a sphere\n    Parameters:\n      plane (plane): the plane to intersect\n      sphere_plane (plane): equatorial plane of the sphere. origin of the plane is\n        the center of the sphere\n      sphere_radius (number): radius of the sphere\n    Returns:\n      list(number, point|plane, number): of intersection results\n          Element    Type      Description\n          [0]       number     The type of intersection, where 0 = point and 1 = circle.\n          [1]   point or plane If a point intersection, the a Point3d identifying the 3-D intersection location.\n                               If a circle intersection, then the circle's plane. The origin of the plane will be the center point of the circle\n          [2]       number     If a circle intersection, then the radius of the circle.\n      None: on error\n    Example:\n      import rhinoscriptsyntax as rs\n      plane = rs.WorldXYPlane()\n      radius = 10\n      results = rs.PlaneSphereIntersection(plane, plane, radius)\n      if results:\n          if results[0]==0:\n              rs.AddPoint(results[1])\n          else:\n              rs.AddCircle(results[1], results[2])\n    See Also:\n      IntersectPlanes\n      LinePlaneIntersection\n      PlanePlaneIntersection\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    sphere_plane = rhutil.coerceplane(sphere_plane, True)\n    sphere = Rhino.Geometry.Sphere(sphere_plane, sphere_radius)\n    rc, circle = Rhino.Geometry.Intersect.Intersection.PlaneSphere(plane, sphere)\n    if rc==Rhino.Geometry.Intersect.PlaneSphereIntersection.Point:\n        return 0, circle.Center\n    if rc==Rhino.Geometry.Intersect.PlaneSphereIntersection.Circle:\n        return 1, circle.Plane, circle.Radius\n\n\ndef PlaneTransform(plane, xform):\n    \"\"\"Transforms a plane\n    Parameters:\n      plane (plane): Plane to transform\n      xform (transform): Transformation to apply\n    Returns:\n      plane:the resulting plane if successful\n      None: if not successful\n    Example:\n      import rhinoscriptsyntax as rs\n      plane = rs.ViewCPlane()\n      xform = rs.XformRotation(45.0, plane.Zaxis, plane.Origin)\n      plane = rs.PlaneTransform(plane, xform)\n      rs.ViewCPlane(None, plane)\n    See Also:\n      PlaneFromFrame\n      PlaneFromNormal\n      PlaneFromPoints\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    xform = rhutil.coercexform(xform, True)\n    rc = Rhino.Geometry.Plane(plane)\n    if rc.Transform(xform): return rc\n\n\ndef RotatePlane(plane, angle_degrees, axis):\n    \"\"\"Rotates a plane\n    Parameters:\n      plane (plane): Plane to rotate\n      angle_degrees (number): rotation angle in degrees\n      axis (vector): Axis of rotation or list of three numbers\n    Returns:\n      plane: rotated plane on success\n    Example:\n      import rhinoscriptsyntax as rs\n      plane = rs.ViewCPlane()\n      rotated = rs.RotatePlane(plane, 45.0, plane.XAxis)\n      rs.ViewCPlane( None, rotated )\n    See Also:\n      MovePlane\n      PlaneFromFrame\n      PlaneFromNormal\n    \"\"\"\n    plane = rhutil.coerceplane(plane, True)\n    axis = rhutil.coerce3dvector(axis, True)\n    angle_radians = math.radians(angle_degrees)\n    rc = Rhino.Geometry.Plane(plane)\n    if rc.Rotate(angle_radians, axis): return rc\n\n\ndef WorldXYPlane():\n    \"\"\"Returns Rhino's world XY plane\n    Returns:\n      plane: Rhino's world XY plane\n    Example:\n      import rhinoscriptsyntax as rs\n      view = rs.CurrentView()\n      rs.ViewCPlane( view, rs.WorldXYPlane() )\n    See Also:\n      WorldYZPlane\n      WorldZXPlane\n    \"\"\"\n    return Rhino.Geometry.Plane.WorldXY\n\n\ndef WorldYZPlane():\n    \"\"\"Returns Rhino's world YZ plane\n    Returns:\n      plane: Rhino's world YZ plane\n    Example:\n      import rhinoscriptsyntax as rs\n      view = rs.CurrentView()\n      rs.ViewCPlane( view, rs.WorldYZPlane() )\n    See Also:\n      WorldXYPlane\n      WorldZXPlane\n    \"\"\"\n    return Rhino.Geometry.Plane.WorldYZ\n\n\ndef WorldZXPlane():\n    \"\"\"Returns Rhino's world ZX plane\n    Returns:\n      plane: Rhino's world ZX plane\n    Example:\n      import rhinoscriptsyntax as rs\n      view = rs.CurrentView()\n      rs.ViewCPlane( view, rs.WorldZXPlane() )\n    See Also:\n      WorldXYPlane\n      WorldYZPlane\n    \"\"\"\n    return Rhino.Geometry.Plane.WorldZX",
  "language": "python",
  "imports": [
    "Rhino",
    "Rhino.Geometry",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": false
}