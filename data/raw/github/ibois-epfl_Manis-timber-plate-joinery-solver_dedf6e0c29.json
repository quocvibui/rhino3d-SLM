{
  "source_url": "https://github.com/ibois-epfl/Manis-timber-plate-joinery-solver/blob/9b0d22db181d4f55f01816440a5c0a31cda502bc/Gh%20compilation%20files/edit.py",
  "repo": "ibois-epfl/Manis-timber-plate-joinery-solver",
  "repo_stars": 12,
  "repo_description": "A grasshopper plugin to create joints between timber panels and export CNC toolpath and robot trajectories for fully automated workflow from design to fabrication to assembly.",
  "license": "MIT",
  "filepath": "Gh compilation files/edit.py",
  "instruction": "Set user-specified attributes to the model. (Use carefully)",
  "code": "\"\"\"Set user-specified attributes to the model. (Use carefully)\"\"\"\r\n\r\nfrom ghpythonlib.componentbase import dotnetcompiledcomponent as component\r\nimport Grasshopper, GhPython\r\nimport System\r\nimport copy\r\nfrom Grasshopper import DataTree\r\nfrom Grasshopper.Kernel.Data import GH_Path\r\n\r\n__author__ = \"Nicolas Rogeau\"\r\n__laboratory__ = \"IBOIS, Laboratory for Timber Construction\" \r\n__university__ = \"EPFL, Ecole Polytechnique Federale de Lausanne\"\r\n__funding__ = \"NCCR Digital Fabrication, ETH Zurich\"\r\n__version__ = \"2021.09\"\r\n\r\nclass MyComponent(component):\r\n    def __new__(cls):\r\n        instance = Grasshopper.Kernel.GH_Component.__new__(cls,\r\n            \"Edit Model Attributes\", \"Edit\", \"\"\"Set user-specified attributes to the model. (Use carefully)\"\"\", \"Manis\", \"Utility\")\r\n        return instance\r\n    \r\n    def get_ComponentGuid(self):\r\n        return System.Guid(\"49c2b057-624d-44d8-bff2-8d2497f4e186\")\r\n    \r\n    def SetUpParam(self, p, name, nickname, description):\r\n        p.Name = name\r\n        p.NickName = nickname\r\n        p.Description = description\r\n        p.Optional = True\r\n    \r\n    def RegisterInputParams(self, pManager):\r\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\r\n        self.SetUpParam(p, \"model\", \"model\", \"Plate model.\")\r\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\r\n        self.Params.Input.Add(p)\r\n        \r\n        p = Grasshopper.Kernel.Parameters.Param_String()\r\n        self.SetUpParam(p, \"attribute\", \"attribute\", \"Attribute to modify (e.g. 'top_face').\")\r\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.item\r\n        self.Params.Input.Add(p)\r\n        \r\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\r\n        self.SetUpParam(p, \"set\", \"set\", \"Set new values for the specified attribute.\")\r\n        p.Access = Grasshopper.Kernel.GH_ParamAccess.tree\r\n        self.Params.Input.Add(p) \r\n    \r\n    def RegisterOutputParams(self, pManager):\r\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\r\n        self.SetUpParam(p, \"model\", \"model\", \"Updated plate model.\")\r\n        self.Params.Output.Add(p)\r\n        \r\n        p = Grasshopper.Kernel.Parameters.Param_GenericObject()\r\n        self.SetUpParam(p, \"get\", \"get\", \"Get old or new values for the specified attribute.\")\r\n        self.Params.Output.Add(p)\r\n        \r\n    \r\n    def SolveInstance(self, DA):\r\n        p0 = self.marshal.GetInput(DA, 0)\r\n        p1 = self.marshal.GetInput(DA, 1)\r\n        p2 = self.marshal.GetInput(DA, 2)\r\n        result = self.RunScript(p0, p1, p2)\r\n\r\n        if result is not None:\r\n            if not hasattr(result, '__getitem__'):\r\n                self.marshal.SetOutput(result, DA, 0, True)\r\n            else:\r\n                self.marshal.SetOutput(result[0], DA, 0, True)\r\n                self.marshal.SetOutput(result[1], DA, 1, True)\r\n        \r\n    def get_Internal_Icon_24x24(self):\r\n        o = \"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAJOgAACToAYJjBRwAAAQWSURBVEhLYxhSINlfz7e3xqHY21rdASpEPTCnxmnFj7MZ//8/K/7/6lDy/7Zcm2aoFCqQ0tGxVImIKFCNjq5WjYzEitXj46vlXF1DoVoYJpfZz/1/L///12Mp/w/NDrzx51z6/yc74v/bWigbQZWAAZd6cvIq40mT/luuXPnfcvXq/5arVmHF1ps2/Tfu7f0P1CMysdCq7v/1nP9/rmT/78izrQCKsV5eHvb+/+3C/9EBZqVgk0FALS5uOchQkxkz/uuUl1/RLiw8rFVUdAQb1i0vPyIUk9qeH6JT9w3o2v+38/5PLLWfCDJnQb3rov938v7fWBf531hHXgNsuLSOjp4R0EUms2b9V/T0LAILEgDFHtIhb46k/P//sPD/3FrnpSCxyaWOE0GWfTuX8b86xRxhjrK3d47l8uX/tcvL70GF8IIoL03/BzvjwBG6vM1jB0isPce6BhRMoOBqz7buBCuEARl391ILoAWaJSUXoEI4gYuFiv31DVE//78q+b+x3+ckSKwywSz98ylgUAEjenq5w0ywQmQg4+ZWbLFs2X+t0tJLUCGsQFtBWv/c8vAP/1+X/t813f8mUIglM9ww6PmBpP//nxT9X1RrvxIoxgxWjAyIsYCdnV/x6Pzgp//flP0H0s+AQkJhrpp2t7fE/Pv/ouT/1i7XjQxGrnkGzS03ZF1d3SC6oIAIC0R3T/e/AQrzCysj3srJiSmZGchpXVoT8f3/q9L/Wyf6goKWXaOwZIfd9u3/VWNieiHaoICABXwber1O/X9Y8P/J7vi/PDyCNkAx0ZNLQt6CfLNvVuB9IF8CpFAnL2+v1Zo1/9ViYlpBfDjAZ0FngW3L/1t5//9fy/7/73zG/xVtHtt2TfO7CYqHE4tCXgsLC6tDlTJo5+XtJtUCpv0zA2/+v5v3f1K5467rayNe/b+VC0z7Bf8vrgr/aqEvYwZVBwYkW2Bnomj6bn/i/2e74v8EOmtOPrYw+BHI8Fubov8GOGqgRiQQkGzBjGqnvv83cv5/Opj4///VHHBSvLY+6k+Sn14EVAkKINmC6dVOc/8/LgIanv3/ytrI93Ob3KaD8gJUGgPgtEDO3b0MnJNLS89DhcBAXl5UYmaty6TeMsdKIFcKIoobaOXm7rBauxaUTNuhQhCg5OOTYbl06X/dyspHUCGygFZh4RmwDyIi6qFCECCiqKhm0N7+32z+/P/KoaGggooPiJlIwFyKPj5FxtOm/TOZOvW/jIWFPVAMFQBrscmgeDBbuPC/bm3tC92qqptAH90iiEHqamqemM6eDa6kVOPjN0CNxABMqlFREww6On6CLDJfsYJoDIo/w+7u/+qJiYuA5nBBjMMBRNjYVBX8/XNlIiKKZUJCCOOwsGLF4OBCaWlsqYuBAQDgfWJKIeZjuAAAAABJRU5ErkJggg==\"\r\n        return System.Drawing.Bitmap(System.IO.MemoryStream(System.Convert.FromBase64String(o)))\r\n\r\n    \r\n    def RunScript(self, model, attribute, set):\r\n\r\n        def list_to_datatree(raggedList):\r\n            \"\"\"Python to Grasshopper\"\"\"\r\n            rl = raggedList\r\n            result = DataTree[object]()\r\n            for i in range(len(rl)):\r\n                temp = []\r\n                for j in range(len(rl[i])):\r\n                    temp.append(rl[i][j])\r\n                path = GH_Path(i)\r\n                result.AddRange(temp, path)\r\n            return result\r\n\r\n        def datatree_to_list(aTree):\r\n            \"\"\"Grasshopper to Python (from Chen Jingcheng)\"\"\"\r\n            theList = []\r\n            for i in range(aTree.BranchCount):\r\n                thisListPart = []\r\n                thisBranch = aTree.Branch(i)\r\n                for j in range(len(thisBranch)):\r\n                    thisListPart.append( thisBranch[j] )\r\n                theList.append(thisListPart)\r\n            return theList\r\n        \r\n        \r\n        get=[]\r\n        if set != []: set = datatree_to_list(set)\r\n        if model:\r\n            model = copy.deepcopy(model)\r\n            new_items = set\r\n            if attribute:\r\n                try:\r\n                    attr = getattr(model, attribute)\r\n                    get=attr\r\n                    if new_items:\r\n                        if type(attr) != type(new_items):\r\n                            raise Exception(\"You're trying to change attributes with the wrong data type!\")\r\n                        elif len(attr) != len(new_items):\r\n                            raise Exception(\"The provided list of new_items does not match the length of the list of attributes!\")\r\n                        else: setattr(model, new_items)\r\n                except:\r\n                    try:\r\n                        for i in range(model.count):\r\n                            attr = getattr(model.plates[i], attribute)\r\n                            get.append(attr)\r\n                            if new_items:\r\n                                if type(attr) != type(new_items[i]):\r\n                                    raise Exception(\"You're trying to change attributes with the wrong data type!\")\r\n                                elif model.count != len(new_items):\r\n                                    raise Exception(\"The provided list of new_items does not match the length of the list of attributes!\")\r\n                                else: \r\n                                    setattr(model.plates[i], attribute, new_items[i])\r\n                    except ValueError: \r\n                        print(\"\"\"This is the list of all plate attributes:\r\n                            temp\r\n                            id\r\n                            brep\r\n                            top_face\r\n                            bottom_face\r\n                            top_contour\r\n                            mid_contour\r\n                            bottom_contour\r\n                            top_holes\r\n                            bottom_holes\r\n                            top_center\r\n                            bottom_center\r\n                            plate_center\r\n                            top_normal\r\n                            bottom_normal\r\n                            top_plane\r\n                            bottom_plane\r\n                            mid_plane\r\n                            thickness\r\n                            joints_positives\r\n                            joints_negatives\r\n                            joints_keys\r\n                            top_milling_contour\r\n                            bottom_milling_contour\r\n                            top_milling_holes\r\n                            bottom_milling_holes\"\"\")\r\n                        print(\"\"\"This is the list of all model attributes:\r\n                            temp\r\n                            count\r\n                            sequence\r\n                            breps\r\n                            plates\r\n                            contact_ids\r\n                            contact_pairs\r\n                            contact_breps\r\n                            contact_zones\r\n                            contact_types\r\n                            contact_strings\r\n                            contact_centers\r\n                            contact_normals\r\n                            contact_planes\r\n                            contact_vectors\r\n                            needed_support\r\n                            assembly_vectors\r\n                            assembly_relatives\r\n                            \"\"\")\r\n        if get != []:\r\n            if type(get[0]) == list:\r\n                get = list_to_datatree(get)\r\n        \r\n        # return outputs if you have them; here I try it for you:\r\n        return (model, get)\r\n\r\nclass AssemblyInfo(GhPython.Assemblies.PythonAssemblyInfo):\r\n    def get_AssemblyName(self):\r\n        return \"Edit Model Attributes\"\r\n    \r\n    def get_AssemblyDescription(self):\r\n        return \"\"\"\"\"\"\r\n\r\n    def get_AssemblyVersion(self):\r\n        return \"0.1\"\r\n\r\n    def get_AuthorName(self):\r\n        return \"Nicolas Rogeau\"\r\n    \r\n    def get_Id(self):\r\n        return System.Guid(\"eef830d2-c6c3-4832-9fe8-89b603206475\")",
  "language": "python",
  "imports": [
    "ghpythonlib"
  ],
  "has_docstring": true
}