{
  "source_url": "https://github.com/Payette/SkinDesigner/blob/f53b5e9262a1e7a3da19c58d90c773e7cdb953d6/src/SkinDesigner_PanelViewer.py",
  "repo": "Payette/SkinDesigner",
  "repo_stars": 9,
  "repo_description": "SkinDesigner facade panelization tool for Grasshopper",
  "license": "GPL-3.0",
  "filepath": "src/SkinDesigner_PanelViewer.py",
  "instruction": "Use this component to display a panel or panel bay in the scene and/or generate grasshopper breps of the panel elements.",
  "code": "# SkinDesigner: A Plugin for Building Skin Design (GPL) started by Santiago Garay\n\n# This file is part of SkinDesigner.\n# \n# Copyright (c) 2017, Santiago Garay <sgaray1970@gmail.com> \n# SkinDesigner is free software; you can redistribute it and/or modify \n# it under the terms of the GNU General Public License as published \n# by the Free Software Foundation; either version 3 of the License, \n# or (at your option) any later version. \n# \n# SkinDesigner is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of \n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the \n# GNU General Public License for more details.\n# \n# You should have received a copy of the GNU General Public License\n# along with SkinDesigner; If not, see <http://www.gnu.org/licenses/>.\n# \n# @license GPL-3.0+ <http://spdx.org/licenses/GPL-3.0+>\n\n\"\"\"\nUse this component to display a panel or panel bay in the scene and/or generate grasshopper breps of the panel elements.\n\n    Args:\n        Panel_Bay: Panel object or Panel_Bay (list of Panels) generated by Panel components.\n        drawGeometry: A boolean that turns on/off drawing of panel object in the scene.\n        drawBreps: A boolean that turns on/off outputing grasshopper geometry versions of the panel object.\n        _locPoint: A grasshoper Point object object to indicate with the start location in the scene to draw the panel.\n\n    Returns:\n        Breps: A list of Breps of the panel elements created when drawBreps is turned on.\n\"\"\"\n\nghenv.Component.Name = \"SkinDesigner_PanelViewer\"\nghenv.Component.NickName = 'PanelViewer'\nghenv.Component.Message = 'VER 0.1.16\\nSep_22_2017'\nghenv.Component.Category = \"SkinDesigner\"\nghenv.Component.SubCategory = \"04 | Display\"\n\nimport Grasshopper.Kernel as gh\nimport rhinoscriptsyntax as rs\nimport Rhino as rc\nimport scriptcontext as sc\n#import sys\nSGLibPanel = sc.sticky[\"SGLib_Panel\"]\n\nPANEL_TYPES_ID=str(ghenv.Component.InstanceGuid)\nwarningData = []\n\ndef DeleteMockup():\n    \n    if not sc.sticky[\"Mockup_Data\" + PANEL_TYPES_ID] : return\n        \n    for panel in sc.sticky[\"Mockup_Data\" + PANEL_TYPES_ID] :\n        if isinstance(panel, SGLibPanel):\n            panel.HideAll() #same as deleting all panel objects\n    \n\n#initialize\noffsetX = 0; offsetY = 0; offsetZ = 0\nsc.doc = rc.RhinoDoc.ActiveDoc\nrs.EnableRedraw(False)\n\n\nfor i, panel in enumerate(Panel_Bay): \n    if not isinstance(panel, SGLibPanel): \n        warningData.append( \"Invalid panel #\" + str(i+1) + \" in PanelBay input\"); Panel_Bay[i] = None\ntry: \n    while True: Panel_Bay.remove(None)\nexcept: pass\nif Panel_Bay == []: warningData.append(\"'Panel_Bay' input data is missing\") \nlocP = None\n\nif  type(_locPoint) == rc.Geometry.ArcCurve: \n    success, circle = _locPoint.TryGetCircle()\n    locP = circle.Center\nelif type(_locPoint) == rc.Geometry.Point3d : locP = _locPoint\nelse: warningData.append( \"I need a circle or point for location\")    \n\nif locP: offsetX, offsetY, offsetZ = locP\n\n\n\nMockup_Bay = []\n\n\nif \"Mockup_Data\"+PANEL_TYPES_ID not in sc.sticky : sc.sticky[\"Mockup_Data\"+PANEL_TYPES_ID] = []\n\nDeleteMockup()\n    \nif Panel_Bay <> []and Panel_Bay[0] and locP:\n\n    for i in range(len(Panel_Bay)):\n        arrBoxPoints = [[offsetX, offsetY, offsetZ],[offsetX + Panel_Bay[i].GetPanelProperty(\"PanelWidth\"), offsetY, offsetZ],\\\n            [offsetX, offsetY, offsetZ+Panel_Bay[i].GetPanelProperty(\"PanelHeight\")],\\\n            [offsetX + Panel_Bay[i].GetPanelProperty(\"PanelWidth\"), offsetY, offsetZ+Panel_Bay[i].GetPanelProperty(\"PanelHeight\")]]\n        try:\n            Mockup_Bay.append(SGLibPanel())\n            Mockup_Bay[i].Copy(Panel_Bay[i])\n            Mockup_Bay[i].RunConditionalDefinition()\n            Mockup_Bay[i].MorphPanel(arrBoxPoints)\n            Mockup_Bay[i].Draw(drawGeometry)\n            if  drawBreps : Breps = Mockup_Bay[i].GetBreps()\n        except Exception:\n            DeleteMockup()\n            raise\n        offsetX = offsetX + Mockup_Bay[i].GetPanelProperty(\"PanelWidth\")\n    sc.sticky[\"Mockup_Data\" + PANEL_TYPES_ID] = Mockup_Bay\nelse:\n    DeleteMockup()\n    \n#Wrapup\nrs.EnableRedraw(True)\nsc.doc = ghdoc\n\n\nif warningData <> []: \n    for warning in warningData: ghenv.Component.AddRuntimeMessage(gh.GH_RuntimeMessageLevel.Warning, str(warning))\nprint \"done\"",
  "language": "python",
  "imports": [
    "Rhino",
    "rhinoscriptsyntax",
    "scriptcontext"
  ],
  "has_docstring": true
}