{
  "source_url": "https://discourse.mcneel.com/t/proper-way-to-convert-ghpy-method-compiling-to-rhino-8-method/205258",
  "topic_id": 205258,
  "title": "Proper way to convert ghpy method compiling to Rhino 8 method",
  "question": "Hi I have series components created using Rhino 7 and the method below compiling the python codes to ghpy. Seems like now Rhino 8 have Rhino Script Editor and all-Rhino Python compiler what is the proper process of converting what I created using the old ghpy compiling method? I tried doing some digging but couldn’t find anything specific that outlines the process.\n\n\n\n\n\n\n\n\n\n\n\n\nTutorial: creating a Grasshopper component with the Python GHPY compiler\n \nDeveloper\n\n\n\n\n\n\n\n\n[2025 update: McNeel no longer suggests or supports this compilation method in new versions of Rhino]\nGhPython in Rhino WIP ships with an all-Rhino Python compiler that can be used to create .Net compiled assemblies containing compiled instructions. Unlike other methods that are based on embedding a Python code string in a C# component, this speeds up code execution and makes reverse engineering more difficult. \nThere are two options for the process of making a component, \n1\n is extremely simplifi…\n  \n\n\n\n\nClosest one I was able to locate was this below. But I’m still a little confused on how I can take what was written in pythonSDK mode and properly convert it to the new method.\n\n\n\n\n\n\nwww.rhino3d.com\n\n\n\n\n\n\nRequired Inputs - Creating Rhino/Grasshopper Script Plugins\n\n\nProvides information on creating plugin projects in Script Editor\n\n\n\n\n\n\n\n\n\n\n\n\nObviously this is just stripped dumb version but previous generated source codes before compiling looks in the somewhat like this.  Any insights or guidelines how I might approach this is greatly appreciated.\n\n\nimage\n612×533 15.3 KB\n\n\n@piac\n Sorry I’m also tagging you into this as the original guide I followed is written by you and hoping you can help…",
  "code_blocks": [
    {
      "code": "from ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\n\nclass Button_UI(Grasshopper.Kernel.Attributes.GH_ComponentAttributes): # inherits all methods of GH_ComponentAttributes\n    def __init__(self, owner):\n        super(Button_UI, self).__init__(owner)\n        self.component = owner\n        self.button_down = False\n                \n    def Layout(self): # override inherited method Layout\n        Grasshopper.Kernel.Attributes.GH_ComponentAttributes.Layout(self)\n        component_rect = Grasshopper.Kernel.GH_Convert.ToRectangle(self.Bounds) \n        component_rect.Height += 22\n        self.button_rect = System.Drawing.Rectangle(component_rect.X, component_rect.Bottom-22, component_rect.Width, 22)\n        self.button_rect.Inflate(-2, -2)\n        Bounds = component_rect\n        self.Bounds=Bounds\n        ButtonBounds = self.button_rect\n        self.ButtonBounds=ButtonBounds\n            \n    def Render(self,canvas, graphics, channel): # Override Render method\n        Grasshopper.Kernel.Attributes.GH_ComponentAttributes.Render(self, canvas, graphics, channel)\n        if channel == Grasshopper.GUI.Canvas.GH_CanvasChannel.Objects:\n            color = Grasshopper.GUI.Canvas.GH_Palette.Grey if self.button_down else Grasshopper.GUI.Canvas.GH_Palette.Black\n            button = Grasshopper.GUI.Canvas.GH_Capsule.CreateTextCapsule(self.ButtonBounds, self.ButtonBounds, color, \"Button\", 2, 0)\n            button.Render(graphics, self.Selected, self.Owner.Locked, False)\n            button.Dispose()\n            \n    def RespondToMouseDown(self,sender,e):\n        if e.Button == System.Windows.Forms.MouseButtons.Left:\n            rec = self.button_rect\n            pt = System.Drawing.Point.Round(e.CanvasLocation)\n            if not self.button_down:\n                if pt.X > rec.X and pt.X < rec.X+rec.Width and pt.Y > rec.Y and pt.Y < rec.Y+rec.Height:\n                    self.button_down = True\n                    self.component.OnDisplayExpired(False)\n                    return  Grasshopper.GUI.Canvas.GH_ObjectResponse.Capture\n        return super(Button_UI, self).RespondToMouseDown(sender, e)\n        \n    def RespondToMouseUp(self,sender,e):\n        if e.Button == System.Windows.Forms.MouseButtons.Left:\n            if self.button_down:\n                self.button_down = False\n                self.component.OnDisplayExpired(False)\n                rec = self.button_rect\n                pt = System.Drawing.Point.Round(e.CanvasLocation)\n                if pt.X > rec.X and pt.X < rec.X+rec.Width and pt.Y > rec.Y and pt.Y < rec.Y+rec.Height:\n                    self.component.click_response()\n            return  Grasshopper.GUI.Canvas.GH_ObjectResponse.Release\n        return super(Button_UI, self).RespondToMouseUp(sender, e)\n        \nclass MyComponent(component):\n    def __init__(self):\n        self.click_count = 0\n    \n    def CreateAttributes(self): # Override inherited method create attributes\n        self.m_attributes=Button_UI(self) \n            \n    def RunScript(self, x, y):\n        return self.click_count\n        \n    def click_response(self):\n        self.click_count += 1\n        self.ExpireSolution(True)",
      "language": "python",
      "author": "User_aaa",
      "post_number": 8,
      "is_solution": false
    }
  ],
  "tags": [
    "csharp",
    "file-io",
    "geometry",
    "grasshopper",
    "materials",
    "python"
  ],
  "has_accepted_answer": false,
  "category_id": 11,
  "posts_count": 6,
  "views": 214
}