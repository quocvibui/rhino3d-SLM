{
  "source_url": "https://github.com/fstwn/cockatoo/blob/d952ac5d2148ec29fba52e8eb75f0f43770c74ca/usrobj_src/Cockatoo_CreateFinalNetworkTopology.py",
  "repo": "fstwn/cockatoo",
  "repo_stars": 38,
  "repo_description": "Cockatoo is a prototypical open-source software toolkit for generating (3d-)knitting patterns from NURBS surface and mesh geometry directly inside Grasshopper.",
  "license": "MIT",
  "filepath": "usrobj_src/Cockatoo_CreateFinalNetworkTopology.py",
  "instruction": "Create the final network topology by using the previosly created and embedded\nmapping network to sample the courses with the stitch width. Subsequently, all\nfinal 'weft' and 'warp' edges will be...",
  "code": "\"\"\"\nCreate the final network topology by using the previosly created and embedded\nmapping network to sample the courses with the stitch width. Subsequently, all\nfinal 'weft' and 'warp' edges will be created.\n---\n[WARNING] The implementation used is research-level code and not optimized. This\ncan lead to substantial computation time, depending on size of the mesh, stitch\nparameters and hardware of the machine!\n    Inputs:\n        Toggle: Set to true to activate the component.\n                {item, boolean}\n        KnitNetwork: A KnitNetwork with a previosly created, embedded mapping\n                     network.\n                     {item, KnitNetwork}\n        IncludeEnds: If True, 'end' nodes between adjacent segments in a source\n                     chain will be included in the first pass of connecting\n                     'warp' edges.\n                     Defaults to True.\n                     {item, bool}\n        Precise: If True, the more precise but slower DistanceTo() function will\n                 be used instead of DistanceToSquared().\n                 Defaults to False.\n                 {item, boolean}\n    Output:\n        KnitNetwork: The KnitNetwork representing the final knit topology with\n                     stitches, increases, decreases and short rows.\n                     {item, KnitNetwork}\n    Remarks:\n        Author: Max Eschenbach\n        License: MIT License\n        Version: 200705\n\"\"\"\n\n# PYTHON STANDARD LIBRARY IMPORTS\nfrom __future__ import division\n\n# GPYTHON SDK IMPORTS\nfrom ghpythonlib.componentbase import executingcomponent as component\nimport Grasshopper, GhPython\nimport System\nimport Rhino\nimport rhinoscriptsyntax as rs\n\n# GHENV COMPONENT SETTINGS\nghenv.Component.Name = \"CreateFinalNetworkTopology\"\nghenv.Component.NickName =\"CFNT\"\nghenv.Component.Category = \"Cockatoo\"\nghenv.Component.SubCategory = \"06 KnitNetwork\"\n\n# LOCAL MODULE IMPORTS\ntry:\n    import cockatoo\nexcept ImportError:\n    errMsg = \"The Cockatoo python module seems to be not correctly \" + \\\n             \"installed! Please make sure the module is in you search \" + \\\n             \"path, see README for instructions!.\"\n    raise ImportError(errMsg)\n\nclass CreateFinalNetworkTopology(component):\n    \n    def RunScript(self, Toggle, KN, StitchWidth, IncludeEnds=True, Precise=False):\n        \n        if Toggle and KN and StitchWidth:\n            KN = cockatoo.KnitNetwork(KN)\n            \n            # SAMPLING OF SEGMENT CONTOURS -------------------------------------\n            \n            KN.sample_segment_contours(StitchWidth)\n            \n            # CREATION OF FINAL WEFT CONNECTIONS -------------------------------\n            \n            KN.create_final_weft_connections()\n            \n            # CREATION OF WARP CONNECTIONS -------------------------------------\n            \n            KN.create_final_warp_connections(max_connections=4,\n                                             include_end_nodes=IncludeEnds,\n                                             precise=Precise,\n                                             verbose=False)\n        else:\n            if not KN:\n                rml = self.RuntimeMessageLevel.Warning\n                self.AddRuntimeMessage(rml, \"No KnitNetwork input!\")\n            if not StitchWidth:\n                rml = self.RuntimeMessageLevel.Warning\n                self.AddRuntimeMessage(rml, \"No StitchWidth input!\")\n            KN = Grasshopper.DataTree[object]()\n        \n        # return outputs if you have them; here I try it for you:\n        return KN",
  "language": "python",
  "imports": [
    "Rhino",
    "ghpythonlib",
    "rhinoscriptsyntax"
  ],
  "has_docstring": true
}