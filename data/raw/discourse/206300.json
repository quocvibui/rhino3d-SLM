{
  "source_url": "https://discourse.mcneel.com/t/compute-geometry-not-serving-requests-despite-active-child-count/206300",
  "topic_id": 206300,
  "title": "Compute Geometry not serving requests despite active child count",
  "question": "Once Compute goes idle, it stops serving new requests.  When I checked \n/activechildren\n, it returned 6.  The following error is printed on the Compute console.  It works only after I manually   kill the child process and make a request.  Then the instances are spawned and serves the request.\n\n\nRC [02:02:51 ERR] Connection id \"0HNDID7B7T55O\", Request id \"0HNDID7B7T55O:00000002\": An unhandled exception was thrown by the application.\n\n[System.Net.Http.HttpRequestException](http://system.net.http.httprequestexception/): No connection could be made because the target machine actively refused it. (localhost:6006)\n\n---> [System.Net.Sockets.SocketException](http://system.net.sockets.socketexception/) (10061): No connection could be made because the target machine actively refused it.\n\nat [System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError](about:blank) error, CancellationToken cancellationToken)\n\nat [System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16](about:blank) token)\n\nat [System.Net.Sockets.Socket](http://system.net.sockets.socket/).<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String](about:blank) host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\n\n--- End of inner exception stack trace ---\n\nat [System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String](about:blank) host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage](about:blank) request, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage](about:blank) request, Boolean async, Cancellatio...",
  "code_blocks": [
    {
      "code": "RC [02:02:51 ERR] Connection id \"0HNDID7B7T55O\", Request id \"0HNDID7B7T55O:00000002\": An unhandled exception was thrown by the application.\n\n[System.Net.Http.HttpRequestException](http://system.net.http.httprequestexception/): No connection could be made because the target machine actively refused it. (localhost:6006)\n\n---> [System.Net.Sockets.SocketException](http://system.net.sockets.socketexception/) (10061): No connection could be made because the target machine actively refused it.\n\nat [System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError](about:blank) error, CancellationToken cancellationToken)\n\nat [System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16](about:blank) token)\n\nat [System.Net.Sockets.Socket](http://system.net.sockets.socket/).<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String](about:blank) host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\n\n--- End of inner exception stack trace ---\n\nat [System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String](about:blank) host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage](about:blank) request, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage](about:blank) request, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem](about:blank) queueItem)\n\nat System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionAsync(Boolean](about:blank) async, CancellationToken requestCancellationToken)\n\nat [System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage](about:blank) request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\n\nat [System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage](about:blank) request, Boolean async, CancellationToken cancellationToken)\n\nat [System.Net.Http.HttpClient](http://system.net.http.httpclient/).<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\n\nat rhino.compute.ReverseProxyModule.SendProxyRequest(HttpRequest initialRequest, HttpMethod method, String baseurl) in D:\\BuildAgent\\work\\4852f584398a78e4\\src\\rhino.compute\\[ReverseProxy.cs:line](about:blank) 158\n\nat rhino.compute.ReverseProxyModule.ReverseProxyGrasshopper(HttpRequest req, HttpResponse res) in D:\\BuildAgent\\work\\4852f584398a78e4\\src\\rhino.compute\\[ReverseProxy.cs:line](about:blank) 211\n\nat Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\n\nat rhino.compute.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\\BuildAgent\\work\\4852f584398a78e4\\src\\rhino.compute\\[ApiKeyMiddleware.cs:line](about:blank) 35\n\nat Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\n\nat Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)",
      "language": "csharp",
      "author": "Selva_Prasad",
      "post_number": 1,
      "is_solution": false
    }
  ],
  "tags": [
    "boolean",
    "geometry",
    "grasshopper"
  ],
  "has_accepted_answer": false,
  "category_id": 90,
  "posts_count": 2,
  "views": 62
}